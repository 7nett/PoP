"use strict";Handlebars.registerHelper("locationsPageURL",function(e,r){return M.LOCATIONS_PAGE_URL[e]});
;"use strict";!function(t){window.popCreateLocation={createLocationModal:function(t){var a=this,e=t.pageSection,o=t.targets;a.execCreateLocationModal(e,o)},createLocationModalBlock:function(t){var a=this,e=t.pageSection,o=t.targets,r=t.relatedTarget;a.transferAttributes(o.closest(".modal"),r),a.execCreateLocationModal(e,o.closest(".modal"))},maybeCloseLocationModal:function(a){var e=a.pageSection,o=a.targets,r=popManager.getSettingsId(e);o.on("fetched",function(a,e){var o=t(this),n=popManager.getSettingsId(o);!0===e.feedback.block[r][n].result&&o.closest(".modal").modal("hide")})},transferAttributes:function(t,a){a=popManager.getOriginalLink(a),t.data("typeahead-target",a.data("typeahead-target"))},execCreateLocationModal:function(a,e){var o=this;e.addClass("pop-createlocation"),e.on("show.bs.modal",function(a){var e=t(this),r=t(a.relatedTarget);o.transferAttributes(e,r)})}}}(jQuery),popJSLibraryManager.register(popCreateLocation,["createLocationModal","createLocationModalBlock","maybeCloseLocationModal"]);
;"use strict";!function(e){window.popMap={map:function(r){var a=this,n=r.domain,o=r.pageSection,t=r.block,i=r.targets;t.one("rerender",function(e){a.destroy(o,t,i)}),e(document).ready(function(e){i.each(function(){var r=e(this);a.triggerShowMap(n,o,t,r)}),M.USE_PROGRESSIVEBOOTING&&!popManager.jsInitialized(t)&&t.one("initialize",function(){i.each(function(){var r=e(this);a.triggerAddMarkers(n,o,t,r)})})})},mapModal:function(r){var a=this,n=r.domain,o=r.pageSection;r.targets.on("shown.bs.modal",function(){var r=e(this);e.each(r.find(".pop-map"),function(){var r=e(this),t=popManager.getBlock(r);popManager.jsInitialized(t)&&a.triggerShowMap(n,o,t,r)})})},mapStandalone:function(r){var a=this,n=r.pageSection,o=r.block,t=r.targets;popPageSectionManager.getGroup(n).on("on.bs.pagesection:theater off.bs.pagesection:theater",function(r){t.each(function(){var r=e(this);popManager.isHidden(r)||a.refresh(n,o,r)})}),o.on("fetchDomainCompleted",function(r,i,s){popJSRuntimeManager.setBlockURL(o),t.each(function(){var r=e(this);a.triggerAddMarkers(s,n,o,r,i)})}),t.each(function(){var r=e(this);a.hoverBlockElems(n,o,r)})},destroy:function(r,a,n){var o=popMapMemory.getRuntimeMemoryPage(r,a);n.each(function(){var r=e(this).attr("id");delete o.maps[r]})},triggerShowMap:function(e,r,a,n){var o=this;popManager.isHidden(n)?o.pendingTriggerMap("showmap",e,r,a,n):o.execTriggerShowMap(e,r,a,n)},triggerAddMarkers:function(e,r,a,n,o){var t=this;if(o=o||{},popManager.isHidden(n))t.pendingTriggerMap("addmarkers",e,r,a,n,o);else{var i=o.reload&&o.isFirst;t.addMarkers(e,r,a,n,i)}},triggerFunction:function(e,r,a,n,o,t){var i=this;"showmap"==e?i.triggerShowMap(r,a,n,o):"addmarkers"==e&&i.triggerAddMarkers(r,a,n,o,t)},pendingTriggerMap:function(r,a,n,o,t,i){var s=this,p=popManager.getPageSectionPage(o);popPageSectionManager.execIsHidden(n)?popPageSectionManager.getGroup(n).one("on.bs.pagesection-group:pagesection-"+n.attr("id")+":opened",function(){(o=e("#"+o.attr("id"))).length&&s.triggerFunction(r,a,n,o,t,i)}):t.parents(".collapse").not(".in").length?t.parents(".collapse").not(".in").one("shown.bs.collapse",function(){s.triggerFunction(r,a,n,o,t,i)}):p.hasClass("tab-pane")&&!popManager.isActive(p)&&p.one("shown.bs.tabpane",function(){s.triggerFunction(r,a,n,o,t,i)})},execTriggerShowMap:function(e,r,a,n){this.addMarkers(e,r,a,n,n.data("markers-removecurrent")),windowResize()},refresh:function(e,r,a){var n=this.getGMap(e,r,a);n&&n.refresh()},hoverBlockElems:function(r,a,n){var o=this;a.on("mouseenter",".pop-openmapmarkers",function(){var t,i=e(this);if(i.hasClass("make-popover")){var s=i.attr("aria-describedby");s&&(t=e("#"+s).find("a.pop-modalmap-link"))}else t=i.find("a.pop-modalmap-link");o.openMapMarkers(r,a,n,t)})},openMapMarkers:function(e,r,a,n){var o=this;popManager.isHidden(a)||(o.closeMarkers(e,r,a),n.length&&o.openMarkers(e,r,a,n))},closeMarkers:function(r,a,n){var o=this,t=o.getGMap(r,a,n);if(t){var i=o.getMarkersInfo(r,a,n);t.hideInfoWindows(),e.each(i.markersOpen,function(e,r){var a=i.markersPos[r];t.markers[a]&&t.markers[a].setIcon("https://maps.google.com/mapfiles/ms/icons/red-dot.png")})}},getMarkerIdsFromLinkURLs:function(r){var a=[];return r.each(function(){var r=e(this),n=(r=popManager.getOriginalLink(r)).attr("href"),o=getParam(M.LOCATIONSID_FIELDNAME,n);o&&e.each(o,function(e,r){a.push(r)})}),a},openMarkers:function(r,a,n,o){var t=this,i=t.getMarkerIdsFromLinkURLs(o);if(i.length){i=i.filter(function(e,r){return i.indexOf(e)==r});var s=t.getGMap(r,a,n);if(s){var p=t.getMarkersInfo(r,a,n);if(e.each(i,function(e,r){var a=p.markersPos[r];s.markers[a]&&s.markers[a].setIcon("https://maps.google.com/mapfiles/ms/icons/green-dot.png")}),1==i.length){var g=p.markersPos[i[0]];s.markers[g]&&"undefined"!=typeof google&&google.maps.event.trigger(s.markers[g],"click")}else s.fitZoom();t.setMarkersOpen(r,a,n,i,!0)}}},hasMarker:function(e,r,a){return popMapMemory.getRuntimeMemoryPage(e,r).markers[a]},getGMap:function(e,r,a){if("undefined"!=typeof google&&"undefined"!=typeof GMaps){var n=popMapMemory.getRuntimeMemoryPage(e,r),o=a.attr("id"),t=n.maps[o];return t||(t=new GMaps({div:"#"+o,lat:M.LOCATIONSMAP_LAT,lng:M.LOCATIONSMAP_LNG,zoom:parseInt(M.LOCATIONSMAP_ZOOM)}),n.maps[o]=t),t}},getMarkersInfo:function(e,r,a){var n=a.data("markers-pagesection")||e,o=a.data("markers-block")||r,t=popMapMemory.getEmtpyBlockRuntimeMemory();try{t=popMapMemory.getRuntimeMemoryPage(n,o)}catch(e){console.log("Error: "+e.message)}var i=a.attr("id");return{markers:t.markers||{},markersPos:t.markersPos[i]||{},markersOpen:t.markersOpen[i]||[]}},setMarkersOpen:function(e,r,a,n,o){var t=popMapMemory.getRuntimeMemoryPage(e,r),i=a.attr("id");!o&&t.markersOpen[i]||(t.markersOpen[i]=[]),n&&(t.markersOpen[i]=t.markersOpen[i].concat(n))},setMarkersPos:function(r,a,n,o,t){var i=popMapMemory.getRuntimeMemoryPage(r,a),s=n.attr("id");!t&&i.markersPos[s]||(i.markersPos[s]={}),o&&e.extend(i.markersPos[s],o)},removeMarker:function(e,r,a,n){var o=this,t=o.getGMap(e,r,a);if(t){var i=o.getMarkersInfo(e,r,a).markersPos[n];t.markers[i]&&t.markers[i].setMap(null),o.zoom(e,r,a)}},zoom:function(e,r,a){var n=this.getGMap(e,r,a);if(n)if(n.markers.length>1)n.fitZoom();else if(1==n.markers.length){var o=n.markers[0].getPosition();n.setCenter(o.lat(),o.lng()),n.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM))}},addMarkers:function(r,a,n,o,t){var i=this,s=i.getGMap(a,n,o);if(s){t&&(s.removeMarkers(),i.setMarkersOpen(a,n,o,null,!0),i.setMarkersPos(a,n,o,null,!0));var p=o.data("marker-ids-"+removeScheme(r));if(p&&p.length){o.data("marker-ids-"+removeScheme(r),null);var g,c,m,d=i.getMarkersInfo(a,n,o),M={};e.each(p,function(e,r){if(g=d.markers[r]){var a={content:g.infoWindow.header+"<br/>"+g.infoWindow.content},n={lat:g.coordinates.lat,lng:g.coordinates.lng,title:g.title,infoWindow:a,icon:g.icon};"undefined"!=typeof google&&(n.animation=google.maps.Animation.DROP),c=s.addMarker(n),m=s.markers.length-1,M[r]=m}}),i.setMarkersPos(a,n,o,M);var f=o.data("open-onemarker-infowindow");1==p.length&&f&&(s.hideInfoWindows(),"undefined"!=typeof google&&google.maps.event.trigger(c,"click")),i.zoom(a,n,o)}}},geocode:function(e,r,a,n,o,t){var i=this.getGMap(e,r,a);i&&GMaps.geocode({address:n,callback:function(e,r){if("OK"==r){i.removeMarkers();var a=e[0].geometry.location;i.setCenter(a.lat(),a.lng()),i.addMarker({lat:a.lat(),lng:a.lng(),draggable:!0}),i.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM)),o.val(a.lat()),t.val(a.lng());var n=i.markers[0];"undefined"!=typeof google&&google.maps.event.addListener(n,"dragend",function(){var e=n.getPosition();o.val(e.lat()),t.val(e.lng())})}}})}}}(jQuery),popJSLibraryManager.register(popMap,["map","mapModal","mapStandalone"]);
;"use strict";!function(e){window.popMapMemory={initBlockRuntimeMemoryIndependent:function(e){var t=this,n=e.pageSection,r=e.block;e.runtimeMempage.map={},t.resetBlockRuntimeMemory(n,r)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).map},resetBlockRuntimeMemory:function(t,n){var r=this,m=r.getRuntimeMemoryPage(t,n),o=r.getEmtpyBlockRuntimeMemory();e.extend(m,o)},getEmtpyBlockRuntimeMemory:function(){return{markers:{},markersPos:{},markersOpen:{},maps:{}}}}}(jQuery),popJSLibraryManager.register(popMapMemory,["initBlockRuntimeMemoryIndependent"]);
;"use strict";jQuery,window.popMapInitMarker={initMarker:function(t,i,e,n){var o=popMapMemory.getRuntimeMemoryPage(t,i),r=o.markers[e];if(r){if(r.title.split(" | ").indexOf(n.title)>-1)return;n.title=r.title+" | "+n.title,n.infoWindow.content=n.infoWindow.content+"<hr/>"+r.infoWindow.content,n.icon="https://maps.google.com/mapfiles/ms/icons/red-dot.png"}o.markers[e]=n}};
;"use strict";jQuery,window.popMapRuntime={drawMarkers:function(e,t,i,r){var a=this;popManager.jsInitialized(i)?a.execDrawMarkers(e,t,i,r):i.one("initialize",function(){a.execDrawMarkers(e,t,i,r)})},execDrawMarkers:function(e,t,i,r){var a=popMapRuntimeMemory.getRuntimeMemoryPage(t,i);r.data("marker-ids-"+removeScheme(e),a.marker_ids)},resetMarkerIds:function(e,t){var i=this;popManager.jsInitialized(t)?i.execResetMarkerIds(e,t):t.one("initialize",function(){i.execResetMarkerIds(e,t)})},execResetMarkerIds:function(e,t){popMapRuntimeMemory.getRuntimeMemoryPage(e,t).marker_ids=[]},setMarkerData:function(e,t,i,r){var a=this;popManager.jsInitialized(t)?a.execSetMarkerData(e,t,i,r):t.one("initialize",function(){a.execSetMarkerData(e,t,i,r)})},execSetMarkerData:function(e,t,i,r){var a=popMapRuntimeMemory.getRuntimeMemoryPage(e,t);a.title||(a.title=i),a.content||(a.content=r)},initMarker:function(e,t,i,r,a,n,o){var s=this;popManager.jsInitialized(t)?s.execInitMarker(e,t,i,r,a,n,o):t.one("initialize",function(){s.execInitMarker(e,t,i,r,a,n,o)})},execInitMarker:function(e,t,i,r,a,n,o){var s=this,M=popMapRuntimeMemory.getRuntimeMemoryPage(e,t);s.setMarkerData(e,t,n,o);var c=M.title,p={coordinates:{lat:r,lng:a},title:c,infoWindow:{header:"<strong>"+c+"</strong>",content:M.content},icon:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"};M.marker_ids.push(i),popMapInitMarker.initMarker(e,t,i,p),M.content="",M.title=""}};
;"use strict";!function(e){window.popMapRuntimeMemory={initBlockRuntimeMemoryIndependent:function(e){var t=this,n=e.pageSection,i=e.block;e.runtimeMempage.mapRuntime={},t.resetBlockRuntimeMemory(n,i)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).mapRuntime},resetBlockRuntimeMemory:function(t,n){var i=this.getRuntimeMemoryPage(t,n),r={content:"",title:"",marker_ids:[]};e.extend(i,r)}}}(jQuery),popJSLibraryManager.register(popMapRuntimeMemory,["initBlockRuntimeMemoryIndependent"]);
;"use strict";!function(e){window.popTypeaheadMap={typeaheadMap:function(a){var p=a.domain,t=a.pageSection,o=a.block;a.targets.each(function(){var a=e(this),r=a.find(".pop-typeahead"),n=a.find(".pop-map"),i=a.data("addmarker-template");r.on("selected",function(r,d){if(!popMap.hasMarker(t,o,d.id)){var M=popManager.getTargetConfiguration(p,t,o,i);e.extend(M,{itemObject:d}),popJSRuntimeManager.setBlockURL(o);var s=popManager.getTemplateHtml(p,t,o,i);popManager.mergeHtml(s,a),popManager.runJSMethods(p,t,o,i,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(p,t,o,i)}n.data("marker-ids-"+removeScheme(p),[d.id]),popMap.addMarkers(p,t,o,n)}),r.on("close",function(e,a,p){popMap.removeMarker(t,o,n,p)})})}}}(jQuery),popJSLibraryManager.register(popTypeaheadMap,["typeaheadMap"]);
;"use strict";!function(a){window.popMapCollection={formMapLocationGeocode:function(o){var e=o.pageSection,t=o.block;o.targets.find("input.address-input").change(function(){var o=a(this).closest("div.pop-map-locationgeocode"),n=[];o.find("input.address-input").each(function(){var o=a(this);o.val()&&n.push(o.val())});var i=o.find("div.pop-map"),p=o.find("input.address-lat"),r=o.find("input.address-lng");popMap.geocode(e,t,i,n.join(", "),p,r)})},modalMap:function(o){var e=this,t=o.domain;o.targets.on("show.bs.modal",function(o){var n=a(this),i=a(o.relatedTarget);e.execModalMap(t,n,i)})},modalMapBlock:function(a){var o=this,e=a.domain,t=(a.pageSection,a.block,a.targets),n=a.relatedTarget,i=t.closest(".modal");o.execModalMap(e,i,n)},execModalMap:function(a,o,e){e=popManager.getOriginalLink(e);var t=popManager.getBlock(e),n=popManager.getPageSection(t),i=o.find(".pop-map");i.data("markers-pagesection",n),i.data("markers-block",t),i.data("markers-removecurrent",!0);var p=popMap.getMarkerIdsFromLinkURLs(e);i.data("marker-ids-"+removeScheme(a),p)}}}(jQuery),popJSLibraryManager.register(popMapCollection,["formMapLocationGeocode","modalMap","modalMapBlock"]);
;"use strict";!function(e){window.popFullCalendar={calendar:function(a){var t=this,n=a.domain,r=a.pageSection,o=a.block,l=a.targets,i=popManager.getPageSectionPage(o);i.one("destroy",function(){l.fullCalendar("destroy")}),i.hasClass("tab-pane")&&!popManager.isActive(i)&&i.one("shown.bs.tabpane",function(){l.fullCalendar("render")}),o.on("beforeRender",function(a,t){var n=e(this);t.operation==M.URLPARAM_OPERATION_REPLACE&&popFullCalendarMemory.resetBlockRuntimeMemory(r,n)}),o.on("addedEvents",function(){t.execCalendar(n,r,o,l,"update"),windowResize()}),t.execCalendar(n,r,o,l,"new")},execCalendar:function(a,t,n,r,o){var l,i=this,u=popFullCalendarMemory.getRuntimeMemoryPage(t,n),c=i.getDate(t,n);"new"==o&&(l={header:{left:"title",center:"",right:""},events:function(e,a,t,n){n(u.events)},defaultDate:c,fixedWeekCount:!1,height:"auto",contentHeight:"auto",dayNamesShort:M.DATERANGE_DAYSOFWEEK}),r.each(function(){var r=e(this);i.execFullCalendar(a,t,n,r,o,l)}),i.setDateLoaded(t,n,c)},execFullCalendar:function(a,t,n,r,o,l){var i=this;if("new"==o){var u=popManager.getJsSettings(a,t,n,r),c=u.options||{},d=e.extend({},l,c),s=u.layouts;d.eventRender=function(e,a){i.renderEvent(t,n,s,e,a)},d.eventAfterAllRender=function(e){i.renderEventAfterAll(t,n,s)},r.fullCalendar(d)}else"update"==o&&r.fullCalendar("refetchEvents")},setDateLoaded:function(e,a,t){popFullCalendarMemory.getRuntimeMemoryPage(e,a).loadedDates[t.year()+"-"+(t.month()+1)]=!0},isDateLoaded:function(e,a,t){return!0===popFullCalendarMemory.getRuntimeMemoryPage(e,a).loadedDates[t.year()+"-"+(t.month()+1)]},getDate:function(e,a){var t=popManager.getBlockQueryState(e,a),n=parseInt(t[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]),r=parseInt(t[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]);return moment(n+"-"+r+"-01","YYYY-M-DD")},renderEvent:function(a,t,n,r,o){var l=popFullCalendarMemory.getRuntimeMemoryPage(a,t),i=r.domain,u=r.id;l.eventsHtml[i]=l.eventsHtml[i]||{};var c=l.eventsHtml[i][u];if(c)l.runJS=!0;else{var d={},s=popManager.getDatabaseKeys(i,a,t)["db-key"];c="",popJSRuntimeManager.setBlockURL(t),e.each(n,function(e,n){c+=popManager.getTemplateHtml(i,a,t,n,d,s,u)}),l.eventsHtml[i][u]=c}o.html(c)},renderEventAfterAll:function(a,t,n){var r=popFullCalendarMemory.getRuntimeMemoryPage(a,t);if(popManager.triggerHTMLMerged(),r.runJS){r.runJS=!1;var o=popManager.getQueryMultiDomainUrls(a,t);e.each(o,function(r,o){e.each(n,function(e,n){popManager.runJSMethods(r,a,t,n,"full")})})}},fetch:function(e,a,t){var n=this,r=n.getDate(e,a);t.fullCalendar("gotoDate",r),n.isDateLoaded(e,a,r)||popManager.fetchBlock(e,a,{operation:M.URLPARAM_OPERATION_APPEND})}}}(jQuery),function(e){window.popFullCalendarControls={controlCalendarPrev:function(a){var t=this,n=a.pageSection,r=a.block;a.targets.click(function(a){var o=e(this);t.execute(n,r,o,"prev")})},controlCalendarNext:function(a){var t=this,n=a.pageSection,r=a.block;a.targets.click(function(a){var o=e(this);t.execute(n,r,o,"next")})},setCalendarBlockParams:function(e,a,t){var n=popManager.getBlockQueryState(e,a);n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]=t.year(),n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]=t.month()+1},execute:function(a,t,n,r){var o=this,l=e(n.closest(".pop-calendar-controls").data("target")),i=l.fullCalendar("getDate");"next"==r?i.add(1,"months"):i=i.subtract(1,"months"),o.setCalendarBlockParams(a,t,i),popManager.closeMessageFeedback(t),popFullCalendar.fetch(a,t,l)}}}(jQuery),popJSLibraryManager.register(popFullCalendar,["calendar"]),popJSLibraryManager.register(popFullCalendarControls,["controlCalendarPrev","controlCalendarNext"]);
;"use strict";!function(e){window.popFullCalendarMemory={initBlockRuntimeMemoryIndependent:function(e){var n=this,t=e.pageSection,r=e.block;e.runtimeMempage.fullCalendar={},n.resetBlockRuntimeMemory(t,r)},getRuntimeMemoryPage:function(e,n){return popManager.getRuntimeMemoryPage(e,n).fullCalendar},resetBlockRuntimeMemory:function(n,t){var r=this.getRuntimeMemoryPage(n,t),o={eventsHtml:{},runJS:!1,events:[],loadedEventIds:{},loadedDates:{}};e.extend(r,o)}}}(jQuery),popJSLibraryManager.register(popFullCalendarMemory,["initBlockRuntimeMemoryIndependent"]);
;"use strict";!function(e){window.popFullCalendarAddEvents={addEvents:function(n,d){var t=this;if(d.length){var a=popManager.getBlock(e("#"+n));if(void 0!==a){var o=popManager.getPageSection(a);popManager.jsInitialized(a)?t.execAddEvents(o,a,d):a.one("initialize",function(){t.execAddEvents(o,a,d)})}else e(document).one("template:merged",function(){t.addEvents(n,d)})}},execAddEvents:function(n,d,t){var a=this,o=popFullCalendarMemory.getRuntimeMemoryPage(n,d),i=[];e.each(t,function(e,t){a.isEventLoaded(n,d,t.domain,t.id)||(i.push(t),a.setEventLoaded(n,d,t.domain,t.id))}),e.merge(o.events,i),d.triggerHandler("addedEvents")},setEventLoaded:function(e,n,d,t){var a=popFullCalendarMemory.getRuntimeMemoryPage(e,n);a.loadedEventIds[d]=a.loadedEventIds[d]||{},a.loadedEventIds[d][t]=!0},isEventLoaded:function(e,n,d,t){var a=popFullCalendarMemory.getRuntimeMemoryPage(e,n);return a.loadedEventIds[d]&&!0===a.loadedEventIds[d][t]}}}(jQuery);