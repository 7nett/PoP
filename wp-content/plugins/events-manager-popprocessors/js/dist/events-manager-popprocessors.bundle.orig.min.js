(function($){popCreateLocation={createLocationModal:function(args){var t=this;var pageSection=args.pageSection,targets=args.targets;t.execCreateLocationModal(pageSection,targets);},createLocationModalBlock:function(args){var t=this;var pageSection=args.pageSection,targets=args.targets,link=args.relatedTarget;t.transferAttributes(targets.closest('.modal'),link);t.execCreateLocationModal(pageSection,targets.closest('.modal'));},maybeCloseLocationModal:function(args){var t=this;var pageSection=args.pageSection,targets=args.targets;var pssId=popManager.getSettingsId(pageSection);targets.on('fetched',function(e,response){var block=$(this);var bsId=popManager.getSettingsId(block);var blockFeedback=response.feedback.block[pssId][bsId];if(blockFeedback.result===true){block.closest('.modal').modal('hide');}});},transferAttributes:function(modals,link){var t=this;link=popManager.getOriginalLink(link);modals.data('typeahead-target',link.data('typeahead-target'));},execCreateLocationModal:function(pageSection,modals){var t=this;modals.addClass('pop-createlocation');modals.on('show.bs.modal',function(e){var modal=$(this);var link=$(e.relatedTarget);t.transferAttributes(modal,link);});}};})(jQuery);popJSLibraryManager.register(popCreateLocation,['createLocationModal','createLocationModalBlock','maybeCloseLocationModal']);;(function($){popMap={initBlockRuntimeMemory:function(args){var t=this;var pageSection=args.pageSection,block=args.block,mempage=args.runtimeMempage;mempage.map={};t.resetBlockRuntimeMemory(pageSection,block);},map:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;block.one('rerender',function(action){t.destroy(pageSection,block,targets);});targets.each(function(){var map=$(this);t.triggerShowMap(pageSection,block,map);});},mapModal:function(args){var t=this;var pageSection=args.pageSection,targets=args.targets;targets.on('shown.bs.modal',function(){var modal=$(this);$.each(modal.find('.pop-map'),function(){var map=$(this);var block=popManager.getBlock(map);if(popManager.jsInitialized(block)){t.triggerShowMap(pageSection,block,map);}});});},mapStandalone:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;popPageSectionManager.getGroup(pageSection).on('on.bs.pagesection:theater off.bs.pagesection:theater',function(e){targets.each(function(){var map=$(this);if(!popManager.isHidden(map)){t.refresh(pageSection,block,map);}});});block.on('fetchCompleted',function(e,status){popJSRuntimeManager.setBlockURL(block.data('toplevel-url'));targets.each(function(){var map=$(this);t.triggerAddMarkers(pageSection,block,map,status);});});targets.each(function(){var map=$(this);t.hoverBlockElems(pageSection,block,map);});},getRuntimeMemoryPage:function(pageSection,targetOrId){var t=this;return popManager.getRuntimeMemoryPage(pageSection,targetOrId).map;},resetBlockRuntimeMemory:function(pageSection,targetOrId){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,targetOrId);var empty={markers:{},markersPos:{},markersOpen:{},maps:{},};$.extend(mempage,empty);},destroy:function(pageSection,block,targets){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);targets.each(function(){var map=$(this);var mapId=map.attr('id');delete mempage.maps[mapId];});},triggerShowMap:function(pageSection,block,map){var t=this;if(!popManager.isHidden(map)){t.execTriggerShowMap(pageSection,block,map);}
else{t.pendingTriggerMap('showmap',pageSection,block,map);}},triggerAddMarkers:function(pageSection,block,map,status){var t=this;if(!popManager.isHidden(map)){t.addMarkers(pageSection,block,map,status.reload);}
else{t.pendingTriggerMap('addmarkers',pageSection,block,map,status);}},triggerFunction:function(functionName,pageSection,block,map,status){var t=this;if(functionName=='showmap'){t.triggerShowMap(pageSection,block,map);}
else if(functionName=='addmarkers'){t.triggerAddMarkers(pageSection,block,map,status);}},pendingTriggerMap:function(functionName,pageSection,block,map,status){var t=this;var pageSectionPage=popManager.getPageSectionPage(block);if(popPageSectionManager.execIsHidden(pageSection)){popPageSectionManager.getGroup(pageSection).one('on.bs.pagesection-group:pagesection-'+pageSection.attr('id')+':opened',function(){block=$('#'+block.attr('id'));if(block.length){t.triggerFunction(functionName,pageSection,block,map,status);}});}
else if(map.parents('.collapse').not('.in').length){var collapse=map.parents('.collapse').not('.in');collapse.one('shown.bs.collapse',function(){t.triggerFunction(functionName,pageSection,block,map,status);});}
else if(pageSectionPage.hasClass('tab-pane')&&!popManager.isActive(pageSectionPage)){pageSectionPage.one('shown.bs.tabpane',function(){t.triggerFunction(functionName,pageSection,block,map,status);});}},execTriggerShowMap:function(pageSection,block,map){var t=this;t.addMarkers(pageSection,block,map,map.data('markers-removecurrent'));windowResize();},refresh:function(pageSection,block,map){var t=this;var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;gMap.refresh();},hoverBlockElems:function(pageSection,block,map){var t=this;block.on('mouseenter','.pop-openmapmarkers',function(){var elem=$(this),links;if(elem.hasClass('make-popover')){var popover_id=elem.attr('aria-describedby');if(popover_id){links=$('#'+popover_id).find('a.pop-modalmap-link');}}
else{links=elem.find('a.pop-modalmap-link');}
t.openMapMarkers(pageSection,block,map,links);});},openMapMarkers:function(pageSection,block,map,links){var t=this;if(popManager.isHidden(map))return;t.closeMarkers(pageSection,block,map);if(links.length){t.openMarkers(pageSection,block,map,links);}},closeMarkers:function(pageSection,block,map){var t=this;var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;var markersInfo=t.getMarkersInfo(pageSection,block,map);gMap.hideInfoWindows();$.each(markersInfo.markersOpen,function(index,markerId){markerPos=markersInfo.markersPos[markerId];if(gMap.markers[markerPos]){gMap.markers[markerPos].setIcon('https://maps.google.com/mapfiles/ms/icons/red-dot.png');}});},getMarkerIdsFromLinkURLs:function(links){var t=this;var markerIds=[];links.each(function(){var link=$(this);link=popManager.getOriginalLink(link);var url=link.attr('href');var paramIds=getParam(M.LOCATIONSID_FIELDNAME,url);if(paramIds){$.each(paramIds,function(index,value){markerIds.push(value);})}});return markerIds;},openMarkers:function(pageSection,block,map,links){var t=this;var markerIds=t.getMarkerIdsFromLinkURLs(links);if(!markerIds.length)return;markerIds=markerIds.filter(function(item,pos){return markerIds.indexOf(item)==pos});var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;var markersInfo=t.getMarkersInfo(pageSection,block,map);$.each(markerIds,function(index,markerId){markerPos=markersInfo.markersPos[markerId];if(gMap.markers[markerPos]){gMap.markers[markerPos].setIcon('https://maps.google.com/mapfiles/ms/icons/green-dot.png');}});if(markerIds.length==1){markerPos=markersInfo.markersPos[markerIds[0]];if(gMap.markers[markerPos]){if(typeof google!='undefined'){google.maps.event.trigger(gMap.markers[markerPos],'click');}}}
else{gMap.fitZoom();}
t.setMarkersOpen(pageSection,block,map,markerIds,true);},initMarker:function(pageSection,block,markerId,markerData){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);var loadedMarkerData=mempage.markers[markerId];if(loadedMarkerData){if(loadedMarkerData.title.split(' | ').indexOf(markerData.title)>-1)return;markerData.title=loadedMarkerData.title+' | '+markerData.title;markerData.infoWindow.content=markerData.infoWindow.content+'<hr/>'+loadedMarkerData.infoWindow.content;markerData.icon='https://maps.google.com/mapfiles/ms/icons/red-dot.png';}
mempage.markers[markerId]=markerData;},hasMarker:function(pageSection,block,markerId){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);return mempage.markers[markerId];},getGMap:function(pageSection,block,map){var t=this;if(typeof google=='undefined'||typeof GMaps=='undefined')return;var mempage=t.getRuntimeMemoryPage(pageSection,block);var mapId=map.attr('id');var gMap=mempage.maps[mapId];if(!gMap){gMap=mempage.maps[mapId]=new GMaps({div:'#'+mapId,lat:M.LOCATIONSMAP_LAT,lng:M.LOCATIONSMAP_LNG,zoom:parseInt(M.LOCATIONSMAP_ZOOM),});}
return gMap;},getMarkersInfo:function(pageSection,block,map){var t=this;var markersPageSection=map.data('markers-pagesection')||pageSection;var markersBlock=map.data('markers-block')||block;var mempage=t.getRuntimeMemoryPage(markersPageSection,markersBlock);var mapId=map.attr('id');return{markers:mempage.markers||{},markersPos:mempage.markersPos[mapId]||{},markersOpen:mempage.markersOpen[mapId]||[]};},setMarkersOpen:function(pageSection,block,map,markersOpen,removeCurrent){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);var mapId=map.attr('id');if(removeCurrent||!mempage.markersOpen[mapId]){mempage.markersOpen[mapId]=[];}
if(markersOpen){mempage.markersOpen[mapId]=mempage.markersOpen[mapId].concat(markersOpen);}},setMarkersPos:function(pageSection,block,map,markersPos,removeCurrent){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);var mapId=map.attr('id');if(removeCurrent||!mempage.markersPos[mapId]){mempage.markersPos[mapId]={};}
if(markersPos){$.extend(mempage.markersPos[mapId],markersPos);}},removeMarker:function(pageSection,block,map,markerId){var t=this;var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;var markersInfo=t.getMarkersInfo(pageSection,block,map);markerPos=markersInfo.markersPos[markerId];if(gMap.markers[markerPos]){gMap.markers[markerPos].setMap(null);}
t.zoom(pageSection,block,map);},zoom:function(pageSection,block,map){var t=this;var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;if(gMap.markers.length>1){gMap.fitZoom();}
else if(gMap.markers.length==1){var pos=gMap.markers[0].getPosition();gMap.setCenter(pos.lat(),pos.lng());gMap.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM));}},addMarkers:function(pageSection,block,map,removeCurrent){var t=this;var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;if(removeCurrent){gMap.removeMarkers();t.setMarkersOpen(pageSection,block,map,null,true);t.setMarkersPos(pageSection,block,map,null,true);}
var markerIds=map.data('marker-ids');if(!markerIds||!markerIds.length)return;map.data('marker-ids',null);var markersInfo=t.getMarkersInfo(pageSection,block,map);var markerData,marker,markerPos;var markersPos={};$.each(markerIds,function(index,markerId){markerData=markersInfo.markers[markerId];var infoWindow={content:markerData.infoWindow.header+'<br/>'+markerData.infoWindow.content};var markerOptions={lat:markerData.coordinates.lat,lng:markerData.coordinates.lng,title:markerData.title,infoWindow:infoWindow,icon:markerData.icon};if(typeof google!='undefined'){markerOptions['animation']=google.maps.Animation.DROP;}
marker=gMap.addMarker(markerOptions);markerPos=gMap.markers.length-1;markersPos[markerId]=markerPos;});t.setMarkersPos(pageSection,block,map,markersPos);var onemarkerClick=map.data('open-onemarker-infowindow');if(markerIds.length==1&&onemarkerClick){gMap.hideInfoWindows();if(typeof google!='undefined'){google.maps.event.trigger(marker,'click');}}
t.zoom(pageSection,block,map);},geocode:function(pageSection,block,map,address,latInput,lngInput){var t=this;var gMap=t.getGMap(pageSection,block,map);if(!gMap)return;GMaps.geocode({address:address,callback:function(results,status){if(status=='OK'){gMap.removeMarkers();var latlng=results[0].geometry.location;gMap.setCenter(latlng.lat(),latlng.lng());gMap.addMarker({lat:latlng.lat(),lng:latlng.lng(),draggable:true});gMap.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM));latInput.val(latlng.lat());lngInput.val(latlng.lng());var marker=gMap.markers[0];if(typeof google!='undefined'){google.maps.event.addListener(marker,'dragend',function(){var latlng=marker.getPosition();latInput.val(latlng.lat());lngInput.val(latlng.lng());});}}}});}};})(jQuery);(function($){popMapRuntime={initBlockRuntimeMemory:function(args){var t=this;var pageSection=args.pageSection,block=args.block,mempage=args.runtimeMempage;mempage.mapRuntime={};t.resetBlockRuntimeMemory(pageSection,block);},getRuntimeMemoryPage:function(pageSection,targetOrId){var t=this;return popManager.getRuntimeMemoryPage(pageSection,targetOrId).mapRuntime;},resetBlockRuntimeMemory:function(pageSection,targetOrId){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,targetOrId);var empty={content:'',title:'',marker_ids:[],};$.extend(mempage,empty);},drawMarkers:function(pageSection,block,mapDiv){var t=this;if(popManager.jsInitialized(block)){t.execDrawMarkers(pageSection,block,mapDiv);}
else{block.one('initialize',function(){t.execDrawMarkers(pageSection,block,mapDiv);});}},execDrawMarkers:function(pageSection,block,mapDiv){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);mapDiv.data('marker-ids',mempage.marker_ids);},resetMarkerIds:function(pageSection,block){var t=this;if(popManager.jsInitialized(block)){t.execResetMarkerIds(pageSection,block);}
else{block.one('initialize',function(){t.execResetMarkerIds(pageSection,block);});}},execResetMarkerIds:function(pageSection,block){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);mempage.marker_ids=[];},setMarkerData:function(pageSection,block,title,content){var t=this;if(popManager.jsInitialized(block)){t.execSetMarkerData(pageSection,block,title,content);}
else{block.one('initialize',function(){t.execSetMarkerData(pageSection,block,title,content);});}},execSetMarkerData:function(pageSection,block,title,content){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);if(!mempage.title){mempage.title=title;}
if(!mempage.content){mempage.content=content;}},initMarker:function(pageSection,block,locationId,lat,lng,defaultTitle,defaultContent){var t=this;if(popManager.jsInitialized(block)){t.execInitMarker(pageSection,block,locationId,lat,lng,defaultTitle,defaultContent);}
else{block.one('initialize',function(){t.execInitMarker(pageSection,block,locationId,lat,lng,defaultTitle,defaultContent);});}},execInitMarker:function(pageSection,block,locationId,lat,lng,defaultTitle,defaultContent){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);t.setMarkerData(pageSection,block,defaultTitle,defaultContent);var title=mempage.title;var content=mempage.content;var marker_data={coordinates:{lat:lat,lng:lng},title:title,infoWindow:{header:'<strong>'+title+'</strong>',content:content},icon:'https://maps.google.com/mapfiles/ms/icons/red-dot.png'};mempage.marker_ids.push(locationId);popMap.initMarker(pageSection,block,locationId,marker_data);mempage.content='';mempage.title='';},};})(jQuery);popJSLibraryManager.register(popMap,['initBlockRuntimeMemory','map','mapModal','mapStandalone']);popJSLibraryManager.register(popMapRuntime,['initBlockRuntimeMemory']);;(function($){popTypeaheadMap={typeaheadMap:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;targets.each(function(){var typeaheadMap=$(this);var typeahead=typeaheadMap.find('.pop-typeahead');var map=typeaheadMap.find('.pop-map');var template=typeaheadMap.data('addmarker-template');typeahead.on('selected',function(e,datum){if(!popMap.hasMarker(pageSection,block,datum.id)){var targetConfiguration=popManager.getTargetConfiguration(pageSection,block,template);$.extend(targetConfiguration,{itemObject:datum});popJSRuntimeManager.setBlockURL(block.data('toplevel-url'));var html=popManager.getTemplateHtml(pageSection,block,template);popManager.mergeHtml(html,typeaheadMap);popManager.runJSMethods(pageSection,block,template,'last');popJSRuntimeManager.deleteBlockLastSessionIds(pageSection,block,template);}
map.data('marker-ids',[datum.id]);popMap.addMarkers(pageSection,block,map);});typeahead.on('close',function(e,alert,markerId){popMap.removeMarker(pageSection,block,map,markerId);});});}};})(jQuery);popJSLibraryManager.register(popTypeaheadMap,['typeaheadMap']);;(function($){popMapCollection={formMapLocationGeocode:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;targets.find('input.address-input').change(function(){var input=$(this);var locationMapGeocode=input.closest('div.pop-map-locationgeocode');var address=[];locationMapGeocode.find('input.address-input').each(function(){var addressInput=$(this);if(addressInput.val()){address.push(addressInput.val());}});var map=locationMapGeocode.find('div.pop-map');var latInput=locationMapGeocode.find('input.address-lat');var lngInput=locationMapGeocode.find('input.address-lng');popMap.geocode(pageSection,block,map,address.join(', '),latInput,lngInput);});},modalMap:function(args){var t=this;var targets=args.targets;targets.on('show.bs.modal',function(e){var modal=$(this);var link=$(e.relatedTarget);t.execModalMap(modal,link);});},modalMapBlock:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets,link=args.relatedTarget;var modal=targets.closest('.modal');t.execModalMap(modal,link);},execModalMap:function(modals,link){var t=this;link=popManager.getOriginalLink(link);var block=popManager.getBlock(link);var pageSection=popManager.getPageSection(block);var mapDiv=modals.find('.pop-map');mapDiv.data('markers-pagesection',pageSection);mapDiv.data('markers-block',block);mapDiv.data('markers-removecurrent',true);var markerIds=popMap.getMarkerIdsFromLinkURLs(link);mapDiv.data('marker-ids',markerIds);},};})(jQuery);popJSLibraryManager.register(popMapCollection,['formMapLocationGeocode','modalMap','modalMapBlock']);;(function($){popFullCalendar={initBlockRuntimeMemory:function(args){var t=this;var pageSection=args.pageSection,block=args.block,mempage=args.runtimeMempage;mempage.fullCalendar={};t.resetBlockRuntimeMemory(pageSection,block);},calendar:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;var pageSectionPage=popManager.getPageSectionPage(block);pageSectionPage.one('destroy',function(){targets.fullCalendar('destroy');});if(pageSectionPage.hasClass('tab-pane')&&!popManager.isActive(pageSectionPage)){pageSectionPage.one('shown.bs.tabpane',function(){targets.fullCalendar('render');});}
block.on('beforeMerge',function(e,options){var block=$(this);if(options.operation==M.URLPARAM_OPERATION_REPLACE){t.resetBlockRuntimeMemory(pageSection,block);}});block.on('rendered',function(e){var block=$(this);var pageSection=popManager.getPageSection(block);t.execCalendar(pageSection,block,targets,'update');windowResize();});t.execCalendar(pageSection,block,targets,'new');},getRuntimeMemoryPage:function(pageSection,targetOrId){var t=this;return popManager.getRuntimeMemoryPage(pageSection,targetOrId).fullCalendar;},resetBlockRuntimeMemory:function(pageSection,targetOrId){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,targetOrId);var empty={eventsHtml:{},runJS:false,events:[],loadedEventIds:{},loadedDates:{},};$.extend(mempage,empty);},addEvents:function(pageSection,block,events_data){var t=this;if(!events_data.length)return;if(popManager.jsInitialized(block)){t.execAddEvents(pageSection,block,events_data);}
else{block.one('initialize',function(){t.execAddEvents(pageSection,block,events_data);});}},execAddEvents:function(pageSection,block,events_data){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);var events_data_to_add=[];$.each(events_data,function(index,event_data){if(!t.isEventLoaded(pageSection,block,event_data.id)){events_data_to_add.push(event_data);t.setEventLoaded(pageSection,block,event_data.id);}});$.merge(mempage.events,events_data_to_add);},execCalendar:function(pageSection,block,targets,state){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);var date=t.getDate(pageSection,block);var options;if(state=='new'){options={header:{left:'title',center:'',right:''},events:function(start,end,timezone,callback){var events;events=mempage.events;callback(events);},defaultDate:date,fixedWeekCount:false,height:'auto',contentHeight:'auto',dayNamesShort:M.DATERANGE_DAYSOFWEEK};}
targets.each(function(){var calendar=$(this);if(state=='new'){var jsSettings=popManager.getJsSettings(pageSection,block,calendar);var customOptions=jsSettings.options||{};var calendarOptions=$.extend({},options,customOptions);var layouts=jsSettings.layouts;calendarOptions.eventRender=function(event,element){t.renderEvent(pageSection,block,layouts,event,element);};calendarOptions.eventAfterAllRender=function(view){t.renderEventAfterAll(pageSection,block,layouts);};calendar.fullCalendar(calendarOptions);}
else if(state=='update'){calendar.fullCalendar('refetchEvents');}});t.setDateLoaded(pageSection,block,date);},setDateLoaded:function(pageSection,block,date){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);mempage.loadedDates[date.year()+'-'+(date.month()+1)]=true;},isDateLoaded:function(pageSection,block,date){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);return mempage.loadedDates[date.year()+'-'+(date.month()+1)]===true;},setEventLoaded:function(pageSection,block,eventId){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);mempage.loadedEventIds[eventId]=true;},isEventLoaded:function(pageSection,block,eventId){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);return mempage.loadedEventIds[eventId]===true;},getDate:function(pageSection,block){var t=this;var blockParams=popManager.getBlockParams(pageSection,block);var year=parseInt(blockParams[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]);var month=parseInt(blockParams[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]);return moment(year+'-'+month+'-01','YYYY-M-DD');},renderEvent:function(pageSection,block,layouts,event,element){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);var eventId=event.id;var html=mempage.eventsHtml[eventId];if(html){mempage.runJS=true;}
else{var options={}
var dbKeys=popManager.getDatabaseKeys(pageSection,block);var itemDBKey=dbKeys['db-key'];html='';popJSRuntimeManager.setBlockURL(block.data('toplevel-url'));$.each(layouts,function(index,layout){html+=popManager.getTemplateHtml(pageSection,block,layout,options,itemDBKey,eventId);});mempage.eventsHtml[eventId]=html;}
element.html(html);},renderEventAfterAll:function(pageSection,block,layouts){var t=this;var mempage=t.getRuntimeMemoryPage(pageSection,block);popManager.triggerHTMLMerged();if(mempage.runJS){mempage.runJS=false;$.each(layouts,function(index,layout){popManager.runJSMethods(pageSection,block,layout,'full');});}},fetch:function(pageSection,block,calendar){var t=this;var date=t.getDate(pageSection,block);calendar.fullCalendar('gotoDate',date);if(t.isDateLoaded(pageSection,block,date)){return;}
popManager.fetchBlock(pageSection,block,{operation:M.URLPARAM_OPERATION_APPEND});}};})(jQuery);(function($){popFullCalendarControls={controlCalendarPrev:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;targets.click(function(e){var control=$(this);t.execute(pageSection,block,control,'prev');});},controlCalendarNext:function(args){var t=this;var pageSection=args.pageSection,block=args.block,targets=args.targets;targets.click(function(e){var control=$(this);t.execute(pageSection,block,control,'next');});},setCalendarBlockParams:function(pageSection,block,date){var t=this;var blockParams=popManager.getBlockParams(pageSection,block);blockParams[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]=date.year();blockParams[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]=date.month()+1;},execute:function(pageSection,block,control,operation){var t=this;var calendar=$(control.closest('.pop-calendar-controls').data('target'));var date=calendar.fullCalendar('getDate');if(operation=='next'){date.add(1,'months');}
else{date=date.subtract(1,'months');}
t.setCalendarBlockParams(pageSection,block,date);popManager.closeMessageFeedback(block);popFullCalendar.fetch(pageSection,block,calendar);}};})(jQuery);popJSLibraryManager.register(popFullCalendar,['initBlockRuntimeMemory','calendar']);popJSLibraryManager.register(popFullCalendarControls,['controlCalendarPrev','controlCalendarNext']);