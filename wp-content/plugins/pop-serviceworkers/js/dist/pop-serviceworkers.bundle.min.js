!function(e){popServiceWorkers={pages:{},documentInitialized:function(o){var a=this;"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=function(o){var n=JSON.parse(o.data);if("refresh"===n.type&&a.pages[n.url]){var r=e("#"+a.pages[n.url]);r&&r.data("fetch-url")&&(a.showRefreshMessage(r),delete a.pages[n.url])}},navigator.serviceWorker.addEventListener("controllerchange",function(){var o=e("#"+M.IDS_APPSTATUS);o.prepend(M.SW_MESSAGES_WEBSITEUPDATED.format(window.location.href))}))},pageSectionNewDOMsBeforeInitialize:function(e){var o=this,a=e.pageSection,n=e.newDOMs,r=a.attr("id");if(M.SW_MAIN_PAGESECTIONS&&M.SW_MAIN_PAGESECTIONS.indexOf(r)>-1){var t=n.filter(".pop-pagesection-page");if(t.length){var i=t.data("fetch-url");i&&(o.pages[i]=t.attr("id"),t.one("destroy",function(){delete o.pages[i]}))}}},modifyOptions:function(e){var o=e.options,a=(e.url,e.anchor);a.data("sw-networkfirst")&&(o.params=o.params||{},o.params[M.SW_URLPARAM_NETWORKFIRST]="true")},modifyFetchBlockOptions:function(e){var o=e.options;e.url;o.reload&&(o["onetime-post-data"]=o["onetime-post-data"]?o["onetime-post-data"]+"&":"",o["onetime-post-data"]+=M.SW_URLPARAM_NETWORKFIRST+"=true")},fetchBrowserURL:function(o){e(document).on("initialized.pop.document",function(){var e={skipPushState:!0};popManager.fetch(window.location.href,e)})},reopenTabs:function(o){"serviceWorker"in navigator&&e(document).on("initialized.pop.document",function(){var o=!1,a=popManager.getTabsCurrentURL(),n=popManager.getScreenOpenTabs();if(e.each(n,function(e,n){if(n.length>1||e!=M.URLPARAM_TARGET_MAIN&&n.length||e==M.URLPARAM_TARGET_MAIN&&n[0]!=a)return o=!0,-1}),o)if(e.cookie("opentabs"))"true"==e.cookie("opentabs")?popManager.openTabs():popManager.keepScreenOpenTab(window.location.href,M.URLPARAM_TARGET_MAIN);else{var r=e("#"+M.IDS_APPSTATUS),t="popServiceWorkers.openTabs()",i="popServiceWorkers.keepScreenOpenTab('{0}', '{1}')".format(window.location.href,M.URLPARAM_TARGET_MAIN);r.prepend(M.SW_MESSAGES_REOPENTABS.format(t,i))}})},saveCookie:function(o){e("#"+M.SW_IDS_CHECKBOX_REMEMBER).attr("checked")&&(console.log("adentro"),e.cookie("opentabs",o,{expires:365,path:"/"}))},openTabs:function(){var e=this;e.saveCookie("true"),popManager.openTabs()},keepScreenOpenTab:function(e,o){var a=this;a.saveCookie("false"),popManager.keepScreenOpenTab(e,o)},showRefreshMessage:function(e){var o=e.data("url"),a=e.data("target");e.prepend(M.SW_MESSAGES_PAGEUPDATED.format(o,a))}}}(jQuery),popJSLibraryManager.register(popServiceWorkers,["documentInitialized","pageSectionNewDOMsBeforeInitialize","modifyOptions","modifyFetchBlockOptions","fetchBrowserURL","reopenTabs"]);