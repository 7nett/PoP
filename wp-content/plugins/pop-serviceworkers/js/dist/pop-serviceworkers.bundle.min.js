!function(e){popServiceWorkers={pages:{},documentInitialized:function(t){var a=this;"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=function(t){var o=JSON.parse(t.data);if("refresh"===o.type&&a.pages[o.url]){var r=e("#"+a.pages[o.url]);r&&r.data("fetch-url")&&(a.showRefreshMessage(r),delete a.pages[o.url])}},navigator.serviceWorker.addEventListener("controllerchange",function(){var t=e("#"+M.IDS_APPSTATUS);t.prepend(M.SW_MESSAGES_WEBSITEUPDATED.format(window.location.href))}))},pageSectionNewDOMsBeforeInitialize:function(e){var t=this,a=e.pageSection,o=e.newDOMs,r=a.attr("id");if(M.SW_MAIN_PAGESECTIONS&&M.SW_MAIN_PAGESECTIONS.indexOf(r)>-1){var i=o.filter(".pop-pagesection-page");if(i.length){var n=i.data("fetch-url");n&&(t.pages[n]=i.attr("id"),i.one("destroy",function(){delete t.pages[n]}))}}},modifyOptions:function(e){var t=e.options,a=(e.url,e.anchor);a.data("sw-networkfirst")&&(t.params=t.params||{},t.params[M.SW_URLPARAM_NETWORKFIRST]="true")},modifyFetchBlockOptions:function(e){var t=e.options;e.url;t.reload&&(t["onetime-post-data"]=t["onetime-post-data"]?t["onetime-post-data"]+"&":"",t["onetime-post-data"]+=M.SW_URLPARAM_NETWORKFIRST+"=true")},fetchBrowserURL:function(t){e(document).on("initialized.pop.document",function(){var e={skipPushState:!0};popManager.fetch(window.location.href,e)})},showRefreshMessage:function(e){var t=e.data("url"),a=e.data("target");e.prepend(M.SW_MESSAGES_PAGEUPDATED.format(t,a))}}}(jQuery),popJSLibraryManager.register(popServiceWorkers,["documentInitialized","pageSectionNewDOMsBeforeInitialize","modifyOptions","modifyFetchBlockOptions","fetchBrowserURL"]);