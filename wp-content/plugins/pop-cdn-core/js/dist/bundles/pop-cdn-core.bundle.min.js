!function(t){popCDN={localStorageKey:"PoP:cdn-thumbprints",thumbprintValues:{},documentInitialized:function(e){var a=this,r=e.domain,n=popManager.getTopLevelFeedback(r)[M.CDN_THUMBPRINTVALUES];a.thumbprintValues=popManager.getStoredData(a.localStorageKey,!1),a.thumbprintValues?a.updateThumbprintValues(n):(a.thumbprintValues=t.extend({},n),a.storeData())},pageSectionFetchSuccess:function(t){var e=this,a=t.response;e.fetchSuccess(a)},blockFetchSuccess:function(t){var e=this,a=t.response;e.fetchSuccess(a)},modifyFetchArgs:function(t){var e=this,a=t.options,r=t.url;if(e.useCDN(r)){t.url=e.getCDNUrl(r);var n=e.getThumbprintValue(r);n&&(a.params=a.params||{},a.params[M.CDN_URLPARAM_THUMBPRINT]=n)}},modifyFetchBlockArgs:function(t){var e=this,a=t.options,r=t.url;if("GET"==t.type&&e.useCDN(r)){t.url=e.getCDNUrl(r);var n=e.getThumbprintValue(r);n&&(a["onetime-post-data"]=a["onetime-post-data"]?a["onetime-post-data"]+"&":"",a["onetime-post-data"]+=M.CDN_URLPARAM_THUMBPRINT+"="+n)}},fetchSuccess:function(t){this.updateThumbprintValues(t.feedback.toplevel[M.CDN_THUMBPRINTVALUES])},updateThumbprintValues:function(t){var e=this,a=!1;for(var r in t)t[r]>e.thumbprintValues[r]&&(e.thumbprintValues[r]=t[r],a=!0);a&&e.storeData()},storeData:function(){var t=this;popManager.storeData(t.localStorageKey,t.thumbprintValues)},useCDN:function(t){return M.CDN_CONTENT_URI&&t.startsWith(M.HOME_DOMAIN)&&popCDNThumbprints.canUseCDN(t)},getCDNUrl:function(t){return M.CDN_CONTENT_URI+t.substr(M.HOME_DOMAIN.length)},getThumbprintValue:function(e){var a=this,r=popCDNThumbprints.getThumbprints(e),n=[];return t.each(r,function(t,e){n.push(a.thumbprintValues[e])}),n.join(M.CDN_SEPARATOR_THUMBPRINT)},convertURL:function(t){var e=this;if(e.useCDN(t)){var a=e.getThumbprintValue(t);t=e.getCDNUrl(t),a&&(t=add_query_arg(M.CDN_URLPARAM_THUMBPRINT,a,t))}return t}}}(jQuery),popJSLibraryManager.register(popCDN,["documentInitialized","pageSectionFetchSuccess","blockFetchSuccess"],!0),popJSLibraryManager.register(popCDN,["modifyFetchArgs","modifyFetchBlockArgs"]);
;!function(t){popCDNThumbprints={canUseCDN:function(t){var r=this;return!!popCDNConfig&&!r.evalCriteria(t,popCDNConfig.criteria.rejected)},getThumbprints:function(r){var e=this;if(!popCDNConfig)return console.log("There is no popCDNConfig object, no thumbprints returned"),[];var n=[];return t.each(popCDNConfig.thumbprints,function(t,i){e.evalCriteria(r,popCDNConfig.criteria.thumbprints[i])&&n.push(i)}),n},isHome:function(t){var r=removeParams(t);return[M.HOME_DOMAIN,M.HOME_DOMAIN+"/",M.HOMELOCALE_URL,M.HOMELOCALE_URL+"/"].indexOf(r)>-1},evalCriteria:function(r,e){var n=this,i=function(t){var e=t[0],n=t[1],i=getParam(e,r);return"object"==typeof i?searchInObject(i,n):i==n},a=[{isHome:e.isHome&&n.isHome(r),startsWith:e.startsWith.full.some(function(t){return r.startsWith(t)}),pageStartsWith:e.startsWith.partial.some(function(t){return r.startsWith(M.HOMELOCALE_URL+"/"+t)}),hasParamValues:e.hasParamValues.some(i)},{noParamValues:!e.noParamValues.some(i)}],o=0;return t.each(a,function(t,r){Object.keys(r).filter(function(t){return r[t]}).length&&o++}),o==a.length}}}(jQuery);
;jQuery,popCDNCoreHooks={mentionsSource:function(e){e.url=popCDN.convertURL(e.url)},typeaheadPrefetchURL:function(e){e.url=popCDN.convertURL(e.url)},typeaheadRemoteURL:function(e){e.url=popCDN.convertURL(e.url)}},popJSLibraryManager.register(popCDNCoreHooks,["mentionsSource","typeaheadPrefetchURL","typeaheadRemoteURL"]);