"use strict";!function(t){window.popCDN={localStorageKey:"PoP:cdn-thumbprints",thumbprintValues:{},documentInitialized:function(e){var r=this,a=e.domain,n=popManager.getTopLevelFeedback(a)[M.CDN_THUMBPRINTVALUES];r.thumbprintValues=popManager.getStoredData(r.localStorageKey,!1),r.thumbprintValues?r.updateThumbprintValues(n):(r.thumbprintValues=t.extend({},n),r.storeData())},pageSectionFetchSuccess:function(t){var e=this,r=t.response;e.fetchSuccess(r)},blockFetchSuccess:function(t){var e=this,r=t.response;e.fetchSuccess(r)},modifyFetchArgs:function(t){var e=this,r=t.options,a=t.url;if(e.useCDN(a)){t.url=e.getCDNUrl(a);var n=e.getThumbprintValue(a);n&&(r.params=r.params||{},r.params[M.CDN_URLPARAM_THUMBPRINT]=n)}},modifyFetchBlockArgs:function(t){var e=this,r=t.options,a=t.url;if("GET"==t.type&&e.useCDN(a)){t.url=e.getCDNUrl(a);var n=e.getThumbprintValue(a);n&&(r["onetime-post-data"]=r["onetime-post-data"]?r["onetime-post-data"]+"&":"",r["onetime-post-data"]+=M.CDN_URLPARAM_THUMBPRINT+"="+n)}},fetchSuccess:function(t){this.updateThumbprintValues(t.feedback.toplevel[M.CDN_THUMBPRINTVALUES])},updateThumbprintValues:function(t){var e=this,r=!1;for(var a in t)t[a]>e.thumbprintValues[a]&&(e.thumbprintValues[a]=t[a],r=!0);r&&e.storeData()},storeData:function(){var t=this;popManager.storeData(t.localStorageKey,t.thumbprintValues)},useCDN:function(t){return M.CDN_CONTENT_URI&&t.startsWith(M.HOME_DOMAIN)&&popCDNThumbprints.canUseCDN(t)},getCDNUrl:function(t){return M.CDN_CONTENT_URI+t.substr(M.HOME_DOMAIN.length)},getThumbprintValue:function(e){var r=this,a=popCDNThumbprints.getThumbprints(e),n=[];return t.each(a,function(t,e){n.push(r.thumbprintValues[e])}),n.join(M.CDN_SEPARATOR_THUMBPRINT)},convertURL:function(t){var e=this;if(e.useCDN(t)){var r=e.getThumbprintValue(t);t=e.getCDNUrl(t),r&&(t=add_query_arg(M.CDN_URLPARAM_THUMBPRINT,r,t))}return t}}}(jQuery),popJSLibraryManager.register(popCDN,["documentInitialized","pageSectionFetchSuccess","blockFetchSuccess"],!0),popJSLibraryManager.register(popCDN,["modifyFetchArgs","modifyFetchBlockArgs"]);
;"use strict";!function(t){window.popCDNThumbprints={canUseCDN:function(t){var r=this;return!!popCDNConfig&&!r.evalCriteria(t,popCDNConfig.criteria.rejected)},getThumbprints:function(r){var e=this;if(!popCDNConfig)return console.log("There is no popCDNConfig object, no thumbprints returned"),[];var n=[];return t.each(popCDNConfig.thumbprints,function(t,i){e.evalCriteria(r,popCDNConfig.criteria.thumbprints[i])&&n.push(i)}),n},isHome:function(t){var r=removeParams(t);return[M.HOME_DOMAIN,M.HOME_DOMAIN+"/",M.HOMELOCALE_URL,M.HOMELOCALE_URL+"/"].indexOf(r)>-1},evalCriteria:function(r,e){var n=this,i=function(t){var e=t[0],n=t[1],i=getParam(e,r);return"object"==typeof i?searchInObject(i,n):i==n},a=[{isHome:e.isHome&&n.isHome(r),startsWith:e.startsWith.full.some(function(t){return r.startsWith(t)}),pageStartsWith:e.startsWith.partial.some(function(t){return r.startsWith(M.HOMELOCALE_URL+"/"+t)}),hasParamValues:e.hasParamValues.some(i)},{noParamValues:!e.noParamValues.some(i)}],o=0;return t.each(a,function(t,r){Object.keys(r).filter(function(t){return r[t]}).length&&o++}),o==a.length}}}(jQuery);
;"use strict";jQuery,window.popCDNCoreHooks={mentionsSource:function(e){e.url=popCDN.convertURL(e.url)},typeaheadPrefetchURL:function(e){e.url=popCDN.convertURL(e.url)},typeaheadRemoteURL:function(e){e.url=popCDN.convertURL(e.url)}},popJSLibraryManager.register(popCDNCoreHooks,["mentionsSource","typeaheadPrefetchURL","typeaheadRemoteURL"]);