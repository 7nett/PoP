function markResourceAsLoaded(e,r){popResourceLoader.markResourceAsLoaded(e,r)}!function(e){popResourceLoader={config:{},loading:{js:{resources:[]}},"error-loading":{js:{resources:[]}},"loading-urls":{},loaded:{js:{resources:[]}},"loaded-by-domain":{},preFetchPageSection:function(r){var o=this,s=r.url,a=r.options;if(M.USECODESPLITTING)if(o.configFilesLoaded(s,a))o.loadResourcesForURL(s);else{var n=o.loadURLConfigFile(s);e(document).one("loaded-url:"+escape(n),function(e){o.loadResourcesForURL(s)})}},areResourcesLoaded:function(e){var r=this;M.USECODESPLITTING&&(e.loaded=r.areResourcesLoadedForURL(e.fetchUrl))},markResourceAsLoaded:function(e,r){var o=this,s=o["loading-urls"][e];"ok"==r?o.loaded.js.resources.push(s):"error"==r&&o["error-loading"].js.resources.push(s),o.loading.js.resources.splice(o.loading.js.resources.indexOf(s),1),delete o["loading-urls"][e]},loadURLConfigFile:function(e){var r=this.getConfigFile(e);return load_script(r),r},configFilesLoaded:function(e,r){var o=this,s=o.getConfig(e);if(s.loaded)return!0;var a=o.getPropertiesForURL(e),n=a.hierarchy,t=a.path;if(["page","single"].indexOf(n)>=0&&s["loaded-paths"][n]&&s["loaded-paths"][n].indexOf(t)>=0)return!0;var i=o.getConfigFile(e);return s["loaded-files"].indexOf(i)>=0},getConfigFile:function(e){var r=this,o=r.getConfig(e),s=r.getPropertiesForURL(e),a=s.hierarchy,n=s.format;return o["configfile-urlplaceholder"].format(a,n)},getPropertiesForURL:function(e){var r=this,o=popUtils.getPath(e);return{hierarchy:r.getHierarchy(e),format:getParam(M.URLPARAM_FORMAT,e)||M.VALUES_DEFAULT,path:o}},getConfig:function(e){var r=this,o=getDomain(e),s=r.config[o];return s||o==M.HOME_DOMAIN||(s=r.config[M.HOME_DOMAIN]),s||{}},getHierarchy:function(e){var r=this.getConfig(e),o=popUtils.getPath(e);return o?o.startsWith(r.paths.author)&&o!=r.paths.author?"author":o.startsWith(r.paths.tag)&&o!=r.paths.tag?"tag":-1===r.paths.single.indexOf(o)&&r.paths.single.some(function(e){return o.startsWith(e)&&o!=e})?"single":"page":"home"},getResourcesDB:function(e){var r=this,o=r.getConfig(e);if(!o||!o.resources||!o.resources.js)return{};var s=r.getHierarchy(e),a=popUtils.getPath(e),n=o.resources.js[s];"single"==s?n=n[o.paths.single.filter(function(e){return a.startsWith(e)&&a!=e})[0]]:"page"==s&&(n=n[a]);var t={url:e,path:a,config:o,jsResourcesDB:n};return popJSLibraryManager.execute("loadResourcesDB",t),(n=t.jsResourcesDB)||{}},getURLComponents:function(e){var r=[],o=getParam(M.URLPARAM_TARGET,e)||M.URLPARAM_TARGET_MAIN,s=getParam(M.URLPARAM_FORMAT,e)||M.VALUES_DEFAULT,a=getParam(M.URLPARAM_TAB,e)||"";return s&&r.push(M.CODESPLITTING.PREFIXES.FORMAT+s),a&&r.push(M.CODESPLITTING.PREFIXES.TAB+a),o&&r.push(M.CODESPLITTING.PREFIXES.TARGET+o),{params:r,target:o,format:s,tab:a,key:r.join(M.SEPARATOR_RESOURCELOADER)}},initLoadedByDomain:function(e){var r=this;r["loaded-by-domain"][e]||(r["loaded-by-domain"][e]={js:{bundles:[],"bundle-groups":[]}})},loadResourcesForURL:function(r){var o=this,s=o.getConfig(r),a=o.getResourcesDB(r),n=o.getURLComponents(r),t=s.keys[n.key];if(t&&a[t]){var i=getDomain(r);o.initLoadedByDomain(i);var d=a[t];if(-1==o["loaded-by-domain"][i].js["bundle-groups"].indexOf(d)){var u=s["bundle-groups"][d]||[];u=e(u).not(o["loaded-by-domain"][i].js.bundles).get(),e.each(u,function(r,a){if(-1==o["loaded-by-domain"][i].js.bundles.indexOf(a)){var n=s.bundles[a];n=e(n).not(o.loaded.js.resources).get(),n=e(n).not(o.loading.js.resources).get(),e.each(n,function(e,r){o.loadResource(s,r)})}})}}else n.target!=M.URLPARAM_TARGET_MAIN&&(r=removeQueryFields(r,[M.URLPARAM_TARGET]),o.loadResourcesForURL(r))},loadResource:function(e,r){var o=this;o.loading.js.resources.push(r);var s=o["error-loading"].js.resources.indexOf(r);s>=0&&o["error-loading"].js.resources.splice(s,1);var a=e.sources[r],n=e["ordered-load-resources"].indexOf(r)>=0;load_script(a,markResourceAsLoaded,n),o["loading-urls"][a]=r},areResourcesLoadedForURL:function(r){var o=this,s=o.getConfig(r),a=o.getResourcesDB(r),n=o.getURLComponents(r),t=s.keys[n.key];if(t&&a[t]){var i=getDomain(r);o.initLoadedByDomain(i);var d=a[t];if(o["loaded-by-domain"][i].js["bundle-groups"].indexOf(d)>=0)return!0;var u=s["bundle-groups"][d]||[];if(!(u=e(u).not(o["loaded-by-domain"][i].js.bundles).get()).length)return o["loaded-by-domain"][i].js["bundle-groups"].push(d),!0;var l=!0;return e.each(u,function(r,a){var n=s.bundles[a];n=e(n).not(o.loaded.js.resources).get();var t=!0;if(e.each(n,function(e,r){if(o["error-loading"].js.resources.indexOf(r)>=0&&o.loadResource(s,r),-1==o.loaded.js.resources.indexOf(r)){t=!1;var a=s.sources[r];return o["loading-urls"][a]||o.loadResource(s,r),-1}}),!t)return l=!1,-1;o["loaded-by-domain"][i].js.bundles.push(a)}),!!l&&(o["loaded-by-domain"][i].js["bundle-groups"].push(d),!0)}return n.target==M.URLPARAM_TARGET_MAIN||(r=removeQueryFields(r,[M.URLPARAM_TARGET]),o.areResourcesLoadedForURL(r))}}}(jQuery),popJSLibraryManager.register(popResourceLoader,["preFetchPageSection","areResourcesLoaded"]);