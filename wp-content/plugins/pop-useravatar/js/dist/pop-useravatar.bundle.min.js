!function(e){popFileUpload={fileUpload:function(a){var o=a.pageSection;a.targets.each(function(){var a=this,l=e(this),p=l.data("action"),t=popManager.getBlock(l);l.fileupload({url:p,autoUpload:!0,maxNumberOfFiles:1,maxFileSize:2e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:function(a){var o=l.data("template-upload"),p=e(),n={o:a,locale:locale};popJSRuntimeManager.setBlockURL(t);var d=popManager.getHtml(o,n),i=e(d);return p=p.add(i)},downloadTemplate:function(a){var p=l.data("template-download"),n=e(),d=popManager.getTargetConfiguration(o,t,p);popManager.expandJSKeys(d);var i=e.extend({},d,{o:a,locale:locale});popJSRuntimeManager.setBlockURL(t);var r=popManager.getHtml(p,i),u=e(r);return e(document).triggerHandler("gd-fileupload:rendered",[u]),n=n.add(u)},completed:function(e,a){l.find(".pop-fileuploaded-hide").hide()},destroyed:function(e,a){l.find(".pop-fileuploaded-hide").show()}}),l.hasClass("pop-fileupload-loadfromserver")&&e.getJSON(p,function(o){o&&o.files&&o.files.length&&l.fileupload("option","done").call(a,e.Event("done"),{result:o})})})}}}(jQuery),popJSLibraryManager.register(popFileUpload,["fileUpload"]);