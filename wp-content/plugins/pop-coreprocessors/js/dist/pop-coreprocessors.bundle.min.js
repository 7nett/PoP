function mentions_source(e,t,a){popMentions.source(e,t,a)}function mentions_insert(e){return popMentions.insert(e)}function mentions_render(e){return popMentions.render(e)}function d(e){var t,a;return this.length?(t=this[0],t.ownerDocument?a=t.ownerDocument:(a=t,t=a.documentElement),null==e?a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.msExitFullscreen||a.mozCancelFullScreen?(e=!!(a.fullscreenElement||a.msFullscreenElement||a.webkitIsFullScreen||a.mozFullScreen),e?a.fullscreenElement||a.webkitFullscreenElement||a.webkitCurrentFullScreenElement||a.msFullscreenElement||a.mozFullScreenElement||e:e):null:(e?(e=t.requestFullscreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.msRequestFullscreen||t.mozRequestFullScreen)&&e.call(t):(e=a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.msExitFullscreen||a.mozCancelFullScreen)&&e.call(a),this)):this}Handlebars.registerHelper("latestCountTargets",function(e,t){var a=[],n=".pop-block."+M.JS_INITIALIZED+" > .blocksection-latestcount > .pop-latestcount",i=e["post-type"],o=e.cats;return o&&o.length&&a.push(n+"."+i+"-"+o.join("."+i+"-")),jQuery.each(e.tags,function(e,t){var i=n+".tag"+t;a.push(i)}),jQuery.each(e.authors,function(e,t){var r=n+".author"+t;o&&o.length&&(r+=".author-"+i+"-"+o.join(".author-"+i+"-")),a.push(r)}),jQuery.each(e.references,function(e,t){var r=n+".single"+t;o&&o.length&&(r+=".single-"+i+"-"+o.join(".single-"+i+"-")),a.push(r)}),new Handlebars.SafeString(a.join(","))}),function(e){popCustomBootstrap={initDocument:function(){e(document).on("focusin",function(t){e(t.target).closest(".mce-window").length&&t.stopImmediatePropagation()})},runScriptsBefore:function(t){var a=this,n=(t.pageSection,t.newDOMs);n.find(".collapse").addBack(".collapse").on("show.bs.collapse",function(){a.addBubblingFlag(e(this),".collapse","show")}).on("shown.bs.collapse",function(){a.addBubblingFlag(e(this),".collapse","shown")}).on("hide.bs.collapse",function(){a.addBubblingFlag(e(this),".collapse","hide")}).on("hidden.bs.collapse",function(){a.addBubblingFlag(e(this),".collapse","hidden")})},pageSectionNewDOMsInitialized:function(e){var t=this,a=e.pageSection,n=e.newDOMs;t.activateNestedComponents(a,n),t.showComponentInitializeJS(a,n),t.triggerTabPaneEvents(n)},isHidden:function(e){var t=e.targets;return!!t.parents(".collapse,.modal").not(".in").length||!!t.parents(".tab-pane").not(".active").length},activeTabLink:function(t){var a=t.targets;a.click(function(t){var a=e(this);a.parent("li").addClass("active").siblings("li").removeClass("active")})},activatePageTab:function(t){var a=this,n=t.pageSection,i=t.targets;i.click(function(){var t=e(this),i=e(t.data("target"));a.clickPageTab(n,i)}),i.trigger("click")},customQuickView:function(e){var t=e.pageSection,a=t.closest(".modal");t.on("fetched",function(){popBootstrap.showingModal(a)||(popBootstrap.closeModals(),a.modal("show"))}),popManager.getPageSectionGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":closed",function(){a.modal("hide")})},destroyPageOnModalClose:function(t){var a=(t.pageSection,t.targets);a.each(function(){var t=e(this);t.closest(".modal").on("hidden.bs.modal",function(){t.trigger("click")})})},customCloseModals:function(e){var t=e.pageSection;t.on("destroy",function(){popBootstrap.closeModals()})},showComponentInitializeJS:function(e,t){var a=this,n=t.find(".collapse.pop-bscomponent").addBack(".collapse.pop-bscomponent");n.length&&a.initComponentHandlers(e,n,"shown.bs.collapse");var i=t.find(".modal.pop-bscomponent").addBack(".modal.pop-bscomponent");i.length&&a.initComponentHandlers(e,i,"shown.bs.modal");var o=t.find(".tab-pane.pop-bscomponent").addBack(".tab-pane.pop-bscomponent");o.length&&a.initComponentHandlers(e,o,"shown.bs.tabpane");var r=t.find(".carousel.pop-bscomponent").addBack(".carousel.pop-bscomponent");r.length&&a.initComponentHandlers(e,r,"slid.bs.carousel",!0)},initComponentHandlers:function(t,a,n,i){var o=this;a.on(n,function(a){var n=e(i?a.relatedTarget:this),r=e(n.data("initjs-targets")),s={"post-data":n.data("post-data")};o.recursiveSetBlockData(t,r,s)}),a.on(n,function(a){var n=e(i?a.relatedTarget:this),o=e(n.data("initjs-targets")).not("."+M.JS_INITIALIZED);if(o.length){var r={"force-init":!0},s=n.data("intercept-url");s&&(r.url=s),popManager.initBlockBranches(t,o,r)}}),a.on(n,function(a){var n=e(i?a.relatedTarget:this),r=e(n.data("initjs-targets"));n.data("onetime-refetch")&&o.recursiveOneTimeRefetch(t,r),o.triggerBlocksVisible(t,r)})},recursiveSetBlockData:function(t,a,n){var i=this;a.each(function(){var a=e(this);e.each(n,function(e,t){a.data(e,t)});var o=popManager.getJsSettings(t,a),r=o["initjs-blockbranches"];r&&i.recursiveSetBlockData(t,e(r.join(", ")),n)})},recursiveOneTimeRefetch:function(t,a){var n=this;a.each(function(){var a=e(this);popSystem.makeOneTimeRefetch(t,a);var i=popManager.getJsSettings(t,a),o=i["initjs-blockbranches"];o&&n.recursiveOneTimeRefetch(t,e(o.join(", ")))})},triggerBlocksVisible:function(t,a){var n=this;a.each(function(){var a=e(this);a.triggerHandler("visible");var i=popManager.getJsSettings(t,a),o=i["initjs-blockbranches"];o&&n.triggerBlocksVisible(t,e(o.join(", ")))})},activateNestedComponents:function(t,a){var n=this;a.find("div.tab-pane div.tab-pane").addBack("div.tab-pane div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterTabPanes(e(this))}),a.find("div.tab-pane div.collapse").addBack("div.tab-pane div.collapse").on("shown.bs.collapse",function(){n.activateOuterTabPanes(e(this))}),a.find("div.carousel div.collapse").addBack("div.carousel div.collapse").on("shown.bs.collapse",function(){n.activateOuterCarousel(e(this))}),a.find("div.carousel div.tab-pane").addBack("div.carousel div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterCarousel(e(this))})},activateOuterTabPanes:function(t){var a=t.parents(".tab-pane").not(".active");a.length&&e('a[href="#'+a.attr("id")+'"]').tab("show")},activateOuterCarousel:function(e){var t=e.closest(".carousel");popBootstrapCarousel.showElement(t,e)},triggerTabPaneEvents:function(t){var a=this;t.find('a[data-toggle="tab"]').addBack('a[data-toggle="tab"]').on("show.bs.tab",function(t){a.triggerTabPaneEvent(e(this),t,"show.bs.tabpane")}).on("shown.bs.tab",function(t){a.triggerTabPaneEvent(e(this),t,"shown.bs.tabpane")}).on("hide.bs.tab",function(t){a.triggerTabPaneEvent(e(this),t,"hide.bs.tabpane")}).on("hidden.bs.tab",function(t){a.triggerTabPaneEvent(e(this),t,"hidden.bs.tabpane")})},triggerTabPaneEvent:function(t,a,n){var i=e(e(a.target).attr("href"));i.data("post-data",t.data("post-data")),i.data("onetime-refetch",t.data("onetime-refetch")),i.data("intercept-url",t.data("intercept-url")),i.data("original-url",t.data("original-url")),i.triggerHandler(n,[a])},resetBubbling:function(){e("[data-bubbling]").attr("data-bubbling",null),e("[data-bubbling-origin]").attr("data-bubbling-origin",null)},bubbling:function(e,t){if(e.is(t)){var a=e.attr("data-bubbling");if(a&&e.find('[data-bubbling-origin="'+a+'"]').length)return!0}return!1},addBubblingFlag:function(e,t,a){if(e.parents(t).length){var n=getRandomInt(1,1e10),i=e.attr("id")+"-"+a+"-"+n;e.attr("data-bubbling-origin",i),e.parents(t).attr("data-bubbling",i)}},activateSideTabpanes:function(e,t){if(t.filter(".tab-pane").length){var a=popManager.isFirstLoad(e);a||t.siblings(".tab-pane").removeClass("active"),t.filter(".tab-pane").addClass("active").on("shown.bs.tabpane",function(){var t=popPageSectionManager.getOpenMode(e);"automatic"==t&&(popPageSectionManager.open(e),popManager.scrollTop(e))}),a||popManager.scrollTop(e)}},activateQuickviewTabpanes:function(e,t){t.filter(".tab-pane").length&&t.filter(".tab-pane").addClass("active").siblings(".tab-pane").removeClass("active")},activateModals:function(e,t){var a=t.filter(".modal");a.length&&(popBootstrap.closeModals(),a.modal("show"),a.on("show.bs.modal",function(e){popManager.closeMessageFeedback(a)}),a.on("shown.bs.modal",function(e){windowResize()}))},activateTabPanes:function(t,a,n,i){var o=this;if(a.filter(".tab-pane").length){var r=popManager.isFirstLoad(t);if(!r){var s=a.siblings(".tab-pane.active");o.savePosition(t,s),s.removeClass("active")}a.filter(".tab-pane").addClass("active").on("show.bs.tabpane",function(){var a=e(this),n=a.siblings(".active");o.savePosition(t,n)}).on("shown.bs.tabpane",function(){var a=e(this);popPageSectionManager.open(t),o.newPageSectionJS(t,n,i,a)}),r||o.newPageSectionJS(t,n,i)}},clickPageTab:function(e,t){e.find(".pop-pagetab-btn").removeClass("active"),t.addClass("active")},savePosition:function(e,t){t.data("lastposition",popManager.getPosition(e)),t.data("theater",popPageSectionManager.isTheater())},newPageSectionJS:function(t,a,n,i){n.each(function(){var t=e(this);popPageSectionManager.close(t,"xs")}),popBootstrap.closeModals();var o,r=0;i&&(r=i.data("lastposition")||0,o=i.data("theater")||!1),popManager.scrollTop(t,r),a&&!o&&popPageSectionManager.theater(!1),o&&popPageSectionManager.theater(!0),windowResize()}}}(jQuery),popJSLibraryManager.register(popCustomBootstrap,["initDocument","runScriptsBefore","pageSectionNewDOMsInitialized","activeTabLink","isHidden"],!0),popJSLibraryManager.register(popCustomBootstrap,["customQuickView","destroyPageOnModalClose","customCloseModals","activatePageTab"]),function(e){popSystem={documentInitialized:function(){var e=this;e.links()},activeLinks:function(t){var a=t.pageSection,n=t.targets,i=popManager.getFetchPageSectionSettings(a);if(i.activeLinks){var o=popManager.getTopLevelFeedback(),r=o[M.URLPARAM_PARENTPAGEID];r&&n.find(".menu-item-object-id-"+r).each(function(){var t=e(this);t.addClass("active"),t.parents(".menu-item").addClass("active")})}},fullscreen:function(t){var a=t.targets;e(document).bind("fullscreenchange",function(){var t=a.find(".glyphicon");e(document).fullScreen()?t.removeClass("glyphicon-fullscreen").addClass("glyphicon-resize-small"):t.addClass("glyphicon-fullscreen").removeClass("glyphicon-resize-small")}),a.click(function(t){t.preventDefault();var a=e(this),n=a.closest(".pop-fullscreen");n.toggleFullScreen()})},newWindow:function(e){var t=e.targets;t.click(function(e){e.preventDefault(),window.open(popManager.getUnembedUrl(window.location.href),"_blank")})},clickURLParam:function(t){var a=getParam(M.URLPARAM_URL);a&&e(document).ready(function(e){popManager.click(decodeURIComponent(a))})},initDelegatorFilter:function(t){var a=this,n=t.pageSection,i=t.targets;i.submit(function(t){t.preventDefault();var i=e(this);if(i.data("blocktarget")){var o=e(i.data("blocktarget")),r=popManager.getPageSection(o);popManager.isBlockGroup(o)?a.filterBlockGroup(r,o,i):popManager.filter(r,o,i),popPageSectionManager.close(n,"xs")}})},initBlockFilter:function(t){var a=t.pageSection,n=t.block,i=t.targets;i.submit(function(t){t.preventDefault();var i=e(this);i.data("blocktarget")&&(n=e(i.data("blocktarget")),a=popManager.getPageSection(n)),popManager.filter(a,n,i)})},initBlockGroupFilter:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.each(function(t){var a=e(this);blocks.each(function(){var t=e(this);popManager.setFilterBlockParams(n,t,a)})}),o.submit(function(t){t.preventDefault();var o=e(this);a.filterBlockGroup(n,i,o)})},reloadBlockGroup:function(e){var t=e.pageSection,a=e.block,n=e.targets;n.click(function(e){e.preventDefault();var n=popManager.getBlockGroupActiveBlock(a);popManager.reload(t,n)})},reloadBlock:function(e){var t=e.pageSection,a=e.block,n=e.targets;n.click(function(e){e.preventDefault(),popManager.reload(t,a)})},loadLatestBlock:function(e){var t=e.pageSection,a=e.block,n=e.targets;n.click(function(e){e.preventDefault(),popManager.loadLatest(t,a)})},timeoutLoadLatestBlock:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.each(function(){var t=e(this),o=t.data("clicktime")||3e4;a.execTimeoutLoadLatestBlock(n,i,t,o)})},displayBlockDatasetCount:function(t){var a=t.pageSection,n=t.block;if(n.data("datasetcount-target")){var i=popManager.getJsSettings(a,n),o=i["display-datasetcount-when"]||["oncreated"],r=i["datasetcount-updatetitle"];o.indexOf("oncreated")>-1&&e(document).ready(function(e){var t=e(n.data("datasetcount-target"));popManager.displayDatasetCount(a,n,t,r)}),o.indexOf("onrendered")>-1&&n.on("rendered",function(t){var i=e(n.data("datasetcount-target"));popManager.displayDatasetCount(a,n,i,r)})}},clearDatasetCount:function(t){var a=this,n=(t.pageSection,t.block,t.targets);n.each(function(){var t=e(this),n=e(t.data("datasetcount-target")),i=!!t.data("datasetcount-updatetitle");t.click(function(e){e.preventDefault(),a.execClearDatasetCount(n,i)}),t.hover(function(){a.execClearDatasetCount(n,i)})})},clearDatasetCountOnUserLoggedOut:function(t){var a=this,n=(t.pageSection,t.block,t.targets);n.each(function(){var t=e(this),n=e(t.data("datasetcount-target")),i=!!t.data("datasetcount-updatetitle");e(document).on("user:loggedout",function(e){a.execClearDatasetCount(n,i)})})},onDestroyPageSwitchTab:function(t){var a=this,n=(t.pageSection,t.targets);n.each(function(){var t=e(this),n=popManager.getPageSectionPage(t);n.on("destroy",function(){a.switchTab(t)})})},closePageTab:function(t){var a=t.pageSection,n=t.targets;n.click(function(t){t.preventDefault();var n=e(this),i=n.data("url")||popManager.getBlock(n).data("paramsscope-url"),o=n.attr("target")||popManager.getFrameTarget(a);popManager.triggerDestroyTarget(i,o)})},resetOnSuccess:function(t){var a=t.pageSection,n=t.targets,i=popManager.getSettingsId(a);n.on("fetched",function(t,n){var o=e(this),r=popManager.getSettingsId(o),s=n.feedback.block[i][r];s.result===!0&&popManager.reset(a,o,{"skip-restore":!0})})},resetOnUserLogout:function(t){var a=t.pageSection,n=t.targets;e(document).on("user:loggedout",function(t,i){n.each(function(){var t=e("#"+e(this).attr("id"));t.length&&popManager.reset(a,t)})})},destroyPageOnSuccess:function(t){var a=t.pageSection,n=t.targets,i=popManager.getSettingsId(a);n.on("fetched",function(t,n){var o=e(this),r=popManager.getSettingsId(o),s=n.feedback.block[i][r],l=popManager.getFrameTarget(a);if(s.result===!0){var c=o.data("destroytime")||0;setTimeout(function(){popManager.triggerDestroyTarget(o.data("paramsscope-url"),l)},c)}})},destroyPageOnUserLoggedOut:function(e){var t=this,a=e.pageSection,n=e.targets;a.one("completed",function(){t.execDestroyPageOnUserLoggedOut(n)})},destroyPageOnUserNoRole:function(e){var t=this,a=e.pageSection,n=e.targets;a.one("completed",function(){t.execDestroyPageOnUserNoRole(a,n)})},refetchBlockOnUserLoggedIn:function(t){var a=this,n=t.pageSection,i=t.targets;e(document).one("user:loggedin",function(e,t){"initialfeedback"!=t&&a.execRefetchBlock(n,i)})},nonendingRefetchBlockOnUserLoggedIn:function(e){var t=this,a=e.pageSection,n=e.targets;t.execNonendingRefetchBlockOnUserEvent(a,n,"user:loggedin")},nonendingRefetchBlockOnUserLoggedInOut:function(e){var t=this,a=e.pageSection,n=e.targets;t.execNonendingRefetchBlockOnUserEvent(a,n,"user:loggedinout")},deleteBlockFeedbackValueOnUserLoggedInOut:function(t){var a=t.pageSection,n=t.block;e(document).on("user:loggedinout",function(t,o){if("initialfeedback"!=o&&"initialuserdata"!=o){var r=popManager.getJsSettings(a,n),s=r["user:loggedinout-deletefeedbackvalue"]||[];if(s.length){var l=popManager.getBlockFeedback(a,n);e.each(s,function(e,t){var a=l;for(i=0;i<t.length-1;i++)a=a[t[i]];delete a[t[t.length-1]]})}}})},scrollTopOnUserLoggedInOut:function(t){var a=t.pageSection,n=t.block,i=t.targets;e(document).on("user:loggedinout",function(t,o){"initialfeedback"!=o&&"initialuserdata"!=o&&i.each(function(){var t=e(this),i=popManager.getJsSettings(a,n,t),o=i["scrolltop-animate"]||!1;popManager.scrollToElem(t,t,o)})})},refetchBlockGroupOnUserLoggedIn:function(t){var a=this,n=t.pageSection,i=t.targets;e(document).one("user:loggedin",function(t,o){"initialfeedback"!=o&&i.each(function(){var t=e("#"+e(this).attr("id"));if(t.length){var i=popManager.getBlockGroupBlocks(t),o=popManager.getBlockGroupActiveBlock(t);i.each(function(){var t=e(this);t.attr("id")==o.attr("id")?a.refetchBlock(n,t):a.makeOneTimeRefetch(n,t)})}})})},closeMessageFeedbacksOnPageSectionOpen:function(e){var t=e.pageSection;e.targets;popPageSectionManager.getGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":opened",function(){popManager.closeMessageFeedbacks(t)})},closePageSectionOnSuccess:function(t){var a=this,n=t.pageSection,i=t.targets,o=popManager.getSettingsId(n);i.on("fetched",function(t,i){var r=e(this),s=popManager.getSettingsId(r),l=i.feedback.block[o][s];if(l.result===!0){var c=r.data("closetime")||0;a.timeoutClosePageSection(n,c)}})},destroyPage:function(t){var a=t.pageSection,n=t.targets;n.click(function(t){t.preventDefault();var n=e(this),i=e(n.data("target"));popManager.destroyPageSectionPage(a,i)})},replicateTopLevel:function(t){var a=this,n=t.pageSection,i=t.targets;i.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultipleTopLevel(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSingleTopLevel(n,t)})},replicatePageSection:function(t){var a=this,n=t.pageSection,i=t.targets;i.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultiplePageSection(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSinglePageSection(n,t)})},closePageSection:function(e){var t=e.pageSection,a=e.targets;a.click(function(e){e.preventDefault(),popPageSectionManager.close(t)})},closePageSectionOnTabShown:function(t){var a=t.pageSection,n=t.targets;n.each(function(){var t=e(this),n=popManager.getPageSectionPage(t);n.on("shown.bs.tabpane",function(){popPageSectionManager.close(a)}),popPageSectionManager.close(a)})},initFilter:function(t){var a=t.pageSection,n=t.block,i=t.targets;i.each(function(){var t=e(this);popManager.setFilterBlockParams(a,n,t)})},interceptForm:function(t){var a=(t.pageSection,t.targets);a.click(function(t){t.preventDefault();var a=e(this),n=e(a.data("target")),i=splitParams(a.data("post-data"));e.each(i,function(e,t){n.find('input[name="'+e+'"]').val(t)}),n.submit()})},forms:function(t){var a=t.pageSection,n=t.block,i=t.targets,o=popManager.getSettingsId(a),r=popManager.getSettingsId(n);i.submit(function(t){t.preventDefault();var i=e(this);i.triggerHandler("beforeSubmit"),popManager.fetchBlock(a,n,{type:"POST","post-data":i.serialize()}),popManager.blockScrollTop(a,n)}),n.on("fetched",function(e,t){var a=t.feedback.block[o][r];a.result===!0&&i.triggerHandler("clear"),popManager.maybeRedirect(a)})},clearInput:function(t){var a=(t.pageSection,t.targets);a.each(function(){var t=e(this);t.closest("form").on("clear",function(){t.val("")})})},makeAlwaysRefetchBlock:function(t){var a=this,n=t.pageSection,i=t.block;i.on("visible",function(){var t=e(this);a.refetchBlock(n,t)})},filterBlockGroup:function(t,a,n){var i=this,o=popManager.getBlockGroupActiveBlock(a),r=popManager.getBlockGroupBlocks(a);r.each(function(){var a=e(this);popManager.setFilterBlockParams(t,a,n),a.attr("id")==o.attr("id")?popManager.reload(t,a):i.makeOneTimeRefetch(t,a)})},execClearDatasetCount:function(e,t){e.html("").addClass("hidden"),t&&(document.title=popManager.documentTitle)},execTimeoutLoadLatestBlock:function(t,a,n,i){var o=this,r=popManager.getJsSettings(t,a,n),s={"skip-status":!0,"datasetcount-target":r["datasetcount-target"],"datasetcount-updatetitle":r["datasetcount-updatetitle"]},l=r["only-loggedin"]||!1;return l&&!popUserAccount.isLoggedIn()?void e(document).one("user:loggedin",function(e,r){o.execTimeoutLoadLatestBlock(t,a,n,i)}):void setTimeout(function(){e("#"+n.attr("id")).length&&(popManager.loadLatest(t,a,s),o.execTimeoutLoadLatestBlock(t,a,n,i))},i)},timeoutClosePageSection:function(e,t){setTimeout(function(){popPageSectionManager.close(e),popManager.closeMessageFeedbacks(e)},t)},execNonendingRefetchBlockOnUserEvent:function(t,a,n){var i=this;e(document).on(n,function(e,n){"initialfeedback"!=n&&"initialuserdata"!=n&&i.execRefetchBlock(t,a)})},execRefetchBlock:function(t,a){var n=this;a.each(function(){var a=e("#"+e(this).attr("id"));a.length&&n.refetchBlock(t,a)})},execDestroyPageOnUserLoggedOut:function(t){e(document).one("user:loggedout",function(a,n){t.each(function(){var t=e("#"+e(this).attr("id"));if(t.length){var a=popManager.getPageSection(t),n=popManager.getFrameTarget(a);popManager.triggerDestroyTarget(t.data("paramsscope-url"),n)}})})},execDestroyPageOnUserNoRole:function(t,a){var n=this,i=a.data("neededrole");e(document).one("user:updated",function(o,r){if(a=e("#"+a.attr("id")),a.length)if(r.roles&&r.roles.indexOf(i)==-1){var s=popManager.getFrameTarget(t);popManager.triggerDestroyTarget(a.data("paramsscope-url"),s)}else n.execDestroyPageOnUserNoRole(t,a)})},switchTab:function(e){if(e.prev("a.pop-pagetab-btn").hasClass("active")){var t=popManager.getPageSectionPage(e),a=t.nextAll(".pop-pagesection-page").first();a.length||(a=t.prevAll(".pop-pagesection-page").first()),a.length&&a.find("a.pop-pagetab-btn").trigger("click")}},replicateMultipleTopLevel:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this),o=i.data("unique-url")||!1;n.execReplicateTopLevel(t,i,!0,o)})},replicateSingleTopLevel:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicateTopLevel(t,i,!1,!1)})},execReplicateTopLevel:function(t,a,n,i){var o=popManager.getMemory(),r=a.data("intercept-url"),s=popManager.getFrameTarget(t),l=popManager.getReplicableMemory(r,s);o.feedback.toplevel=e.extend({},l.feedback.toplevel);var c=a.data("original-url");n&&(popManager.generateUniqueId(),i&&(c=popManager.addUniqueId(c)));var p=a.data("title"),d=popManager.getTopLevelFeedback();d[M.URLPARAM_TITLE]=p,d[M.URLPARAM_PARENTPAGEID]=null,d[M.URLPARAM_URL]=c,popManager.maybeUpdateDocument(t)},replicateMultiplePageSection:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},replicateSinglePageSection:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},execReplicatePageSection:function(t,a){var n=(a.data("block-settingsid"),popManager.getSettingsId(t),a.data("templateid")),i=popManager.getMemory(),o=a.data("intercept-url"),r=popManager.getFrameTarget(t),s=popManager.getReplicableMemory(o,r);e.extend(i.feedback.pagesection,s.feedback.pagesection),e.each(s.feedback.block,function(t,a){e.extend(i.feedback.block[t],a),e.extend(i.dataset[t],s.dataset[t]),e.extend(i.params[t],s.params[t])});var l=popManager.getTopLevelFeedback(),c=popManager.getPageSectionFeedback(t),p=popManager.getPageSectionConfiguration(t);c["intercept-urls"][n]||(c["intercept-urls"][n]={}),c["intercept-urls"][n][n]=l[M.URLPARAM_URL],p[M.JS_TEMPLATE]=n;var d={};a.next(".pop-interceptor-blocksettingsids").children().each(function(){var t=e(this),a=t.data("value");a=t.data("value")?[t.data("value")]:[],d[t.data("key")]=a}),p[M.JS_BLOCKSETTINGSIDS]=d,popManager.initPageSectionSettings(t,p);var u={"js-args":{relatedTarget:a},url:l[M.URLPARAM_URL]};popManager.renderPageSection(t,u)},refetchBlock:function(e,t){var a={"post-data":t.data("post-data"),"show-disabled-layer":!0};popManager.refetch(e,t,a)},makeOneTimeRefetch:function(t,a){var n=this;popManager.jsInitialized(a)&&popManager.isContentLoaded(t,a)&&a.one("visible",function(){var a=e(this);n.refetchBlock(t,a)})},linkBlankTarget:function(e){e.attr("target")||e.attr("target","_blank")},maybeaddspinner:function(t,a){var n=!t.hasClass("hidden")&&(M.ADDANCHORSPINNER&&"undefined"==typeof t.data("addspinner")||t.data("addspinner"));if(n){var i=e('<span class="pop-spinner">'+M.SPINNER+"</span>");t.find("img").length&&i.addClass("spinner-img"),e(document).one("urlfetched:"+escape(a),function(){t.removeClass("loading").children(".pop-spinner").remove()}),t.trigger("blur").addClass("loading").prepend(i)}return n},links:function(){var t=this,a=new RegExp(/\.(gif|jpg|jpeg|tiff|png)$/i),n=new RegExp(/\.(pdf|css|js|zip|tar|ppt|pptx|doc|docx|xls|xlsx)$/i),i=[];e.each(M.ALLOWED_URLS,function(e,t){i.push('a[href^="'+t+'"]')}),e(document).on("click",i.join(","),function(i){var o=e(this),r=o.attr("href");if(a.test(r)){var s="linksImage";if(popJSLibraryManager.getLibraries(s).length){i.preventDefault();var l={anchor:o};popJSLibraryManager.execute(s,l)}else t.linkBlankTarget(o)}else if(n.test(r))t.linkBlankTarget(o);else{popCustomBootstrap.resetBubbling();var c=popManager.getPageSection(o),p=o.attr("target")||M.URLPARAM_TARGET_MAIN;if(p==M.URLPARAM_TARGET_FULL)return i.preventDefault(),t.maybeaddspinner(o,r),void(window.location=r);if(p==M.URLPARAM_TARGET_PRINT)return i.preventDefault(),void t.openPrint(r);if(popManager.targetExists(p)){i.preventDefault(),r==M.HOME_URL&&(r=M.HOME_URL+"/");var d=!1,u={},g={};if(o.data("reloadurl"))u.reloadurl=!0;else{var h=o.attr("target")||popManager.getClickFrameTarget(c);g={event:i,relatedTarget:o,target:h};var f=r;o.data("append-intercepturl")&&(f+=o.data("append-intercepturl")),d=popURLInterceptors.getInterceptors(f,g).length}if(d)popURLInterceptors.intercept(f,g);else{u.target=p,u["js-args"]={relatedTarget:o};var v=t.maybeaddspinner(o,r),m=v?"":null;"undefined"!=typeof o.data("loadingmsg-target")&&(m=o.data("loadingmsg-target")),null!=m&&(u["loadingmsg-target"]=m),popManager.fetch(r,u)}}}}),e(document).on("click",'a[target="'+M.URLPARAM_TARGET_SOCIALMEDIA+'"]',function(a){a.preventDefault();var n=e(this),i=n.attr("href");t.openSocialMedia(i)}),e(document).on("click",'a[href^="#"]',function(t){var a=e(this),n=a.attr("href");if(n.length>1){var i=e(n),o="undefined"!=typeof a.data("toggle")||"undefined"!=typeof a.data("slide");i.length&&!o&&(t.preventDefault(),popManager.scrollToElem(popManager.getPageSection(i),i,!0))}}),e(document).on("click",'a[href^="http://"],a[href^="https://"]',function(a){var n=e(this),i=n.attr("href"),o=!0;e.each(M.ALLOWED_URLS,function(e,t){if(i.startsWith(t))return o=!1,-1}),o&&t.linkBlankTarget(n)})},openPrint:function(e){window.open(e,"_blank")},openSocialMedia:function(e){window.open(e,"_blank","left=20,top=20,width=500,height=400,toolbar=1,resizable=0")},scrollHandler:function(t){var a=t.pageSection,n=0,i=200;a.scroll(function(){var t=e(this).scrollTop();Math.abs(n-t)>=i&&(t>n?e(window).triggerHandler("scroll:down"):e(window).triggerHandler("scroll:up"),n=t)})}}}(jQuery),popJSLibraryManager.register(popSystem,["documentInitialized","activeLinks","newWindow","fullscreen","clickURLParam","initDelegatorFilter","initBlockGroupFilter","initBlockFilter","reloadBlockGroup","reloadBlock","loadLatestBlock","timeoutLoadLatestBlock","displayBlockDatasetCount","clearDatasetCount","clearDatasetCountOnUserLoggedOut","replicateTopLevel","replicatePageSection","closePageSection","closePageSectionOnTabShown","onDestroyPageSwitchTab","closePageTab","resetOnSuccess","resetOnUserLogout","closeMessageFeedbacksOnPageSectionOpen","closePageSectionOnSuccess","destroyPageOnUserLoggedOut","destroyPageOnUserNoRole","refetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedInOut","deleteBlockFeedbackValueOnUserLoggedInOut","scrollTopOnUserLoggedInOut","refetchBlockGroupOnUserLoggedIn","destroyPageOnSuccess","destroyPage","initFilter","interceptForm","forms","clearInput","makeAlwaysRefetchBlock","scrollHandler"]),function(e){popForms={formCreatePostBlock:function(e){var t=this,a=e.pageSection,n=e.block;popManager.getSettingsId(a),popManager.getSettingsId(n);n.one("fetched",function(e,i){t.execFormCreatePostBlock(a,n,i)})},manageStatus:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;t.execManageStatus(i);var o=popManager.getSettingsId(a),r=popManager.getSettingsId(n);n.on("fetched",function(e,a){var n=a.feedback.block[o][r];n.result===!0&&t.execManageStatus(i)})},execFormCreatePostBlock:function(e,t,a){var n=this,i=popManager.getSettingsId(e),o=popManager.getSettingsId(t),r=a.feedback.block[i][o];r.result===!0?popSystem.execDestroyPageOnUserLoggedOut(t):t.one("fetched",function(a,i){n.execFormCreatePostBlock(e,t,i)})},execManageStatus:function(t){t.each(function(){var t=e(this);t.val()==M.POSTSTATUS.PUBLISH?(t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled",!1)):(t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled",!1))})}}}(jQuery),popJSLibraryManager.register(popForms,["formCreatePostBlock","manageStatus"]),function(e){popEditor={editor:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;i.one("rerender",function(e){a.destroy(o)});var r=popManager.getPageSectionPage(i);r.one("destroy",function(){a.destroy(o)}),o.each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id");t.closest("form").on("beforeSubmit",function(){tinymce.get(a)&&tinymce.get(a).save()})}),o.filter(".pop-editor-form-clear").each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id");t.closest("form").on("clear",function(){tinymce.get(a)&&tinymce.get(a).setContent("")})}),!POP_CACHED_SETTINGS&&popManager.isFirstLoad(n)||e(document).ready(function(e){o.each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id"),n=tinyMCEPreInit.mceInit[M.TEMPLATE_EDITOR_NAME];t.hasClass("pop-editor-autofocus")&&(n=e.extend({},n,{auto_focus:a})),tinyMCE.init(n),tinymce.execCommand("mceAddEditor",!0,a);var i=e.extend({},tinyMCEPreInit.qtInit[M.TEMPLATE_EDITOR_NAME],{id:a});quicktags(i),window.wpActiveEditor||(window.wpActiveEditor=a),"undefined"!=typeof jQuery?t.closest(".wp-editor-wrap").on("click.wp-editor",function(){this.id&&(window.wpActiveEditor=this.id.slice(3,-5))}):document.getElementById("wp-"+a+"-wrap").onclick=function(){window.wpActiveEditor=this.id.slice(3,-5)}})})},destroy:function(t){t.each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id");tinymce.execCommand("mceRemoveEditor",!1,a)})}}}(jQuery),popJSLibraryManager.register(popEditor,["editor"]),function(e){popMentions={previousData:{},documentInitialized:function(){var e=this;e.prefetch()},prefetch:function(){var t=this;e.each(M.MENTIONS.TYPES,function(e,a){t.fetchData(e,a.baseline)})},fetchData:function(t,a,n){var i=this,o=popManager.getStoredData(a);o?i.processData(t,o,n):e.getJSON(a,function(e){var o=864e5;popManager.storeData(a,e,o),i.processData(t,e,n)})},processData:function(e,t,a){var n=this;n.previousData[e]=t,a&&a(t)},source:function(e,t,a){var n=this;if(M.MENTIONS.TYPES[a]){var i;if(i=e?M.MENTIONS.TYPES[a].url.replace(M.MENTIONS.QUERYWILDCARD,e):M.MENTIONS.TYPES[a].baseline){var o=n.previousData[a]||[];t(o),n.fetchData(a,i,t)}}},render:function(e){var t=this,a=t.infereDelimiter(e),n=popManager.getHtml(M.MENTIONS.TYPES[a].template,e);return'<li><a href="javascript:;"><span>'+n+"</span></a></li>"},insert:function(e){var t=this,a=t.infereDelimiter(e);return"<span>"+a+e[M.MENTIONS.TYPES[a].key]+"</span>&nbsp;"},infereDelimiter:function(t){var a="";return e.each(M.MENTIONS.TYPES,function(e,n){if("undefined"!=typeof t[n.key])return a=e,-1}),a}}}(jQuery),popJSLibraryManager.register(popMentions,["documentInitialized"]),function(e){popFeaturedImage={frame:null,documentInitialized:function(){var t=this;t.frame=wp.media({title:M.LABELS.MEDIA_FEATUREDIMAGE_TITLE,multiple:!1,library:{type:"image"},button:{text:M.LABELS.MEDIA_FEATUREDIMAGE_BTN}}),t.frame.on("open",function(){var a=e(".pop-featuredimage.open"),n=a.find('input[type="hidden"]');if(n.val()){var i=t.frame.state().get("selection");attachment=wp.media.attachment(n.val()),attachment.fetch(),i.add(attachment?[attachment]:[])}}),t.frame.on("close",function(){var a=e(".pop-featuredimage.open"),n=t.frame.state().get("selection");if(n.length){var i,o,r=a.data("img-size");n.map(function(e){e=e.toJSON();var t=e.sizes[r]||e.sizes.medium||e.sizes.thumbnail;i=e.id,o={src:t.url,width:t.width,height:t.height}});var s=popManager.getBlock(a),l=popManager.getPageSection(s);t.merge(l,s,a,i,o)}a.removeClass("open")})},featuredImageSet:function(t){var a=this,n=(t.pageSection,t.block,t.targets);n.click(function(t){
t.preventDefault();var n=e(this),i=n.closest(".pop-featuredimage");i.addClass("open"),a.frame.open()})},featuredImageRemove:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.click(function(t){t.preventDefault();var o=e(this),r=o.closest(".pop-featuredimage");a.remove(n,i,r)})},merge:function(e,t,a,n,i){var o={extendContext:{value:n,img:i}},r=a.data("merge-template");popManager.mergeTargetTemplate(e,t,r,o),popManager.runJSMethods(e,t,r,"full")},remove:function(e,t,a){var n=this;n.merge(e,t,a,"","")}}}(jQuery),popJSLibraryManager.register(popFeaturedImage,["documentInitialized","featuredImageSet","featuredImageRemove"]),function(e){popUserAccount={initialuserdata:!1,loggedin:!1,id:null,name:"",avatar:"",url:"",roles:[],userattributes:[],documentInitialized:function(){var e=this;e.checkpointInvalidateBlocks(),e.initialuserdata&&e.fetchLoggedInUserData()},pageSectionInitialized:function(e){var t=this,a=e.pageSection;a.on("fetched",function(e,a,n){t.feedbackLoginOut(!1)})},blockInitialized:function(e){var t=this,a=(e.pageSection,e.block);a.on("fetched",function(e){t.feedbackLoginOut(!1)})},loadAvatar:function(e){var t=this,a=e.targets;a.attr("src",t.avatar)},initialLogin:function(){var e=this;feedbackAvailable=e.feedbackLoginOut(!0),e.initialuserdata=!feedbackAvailable},fetchLoggedInUserData:function(e){e=e||{},e["loadingmsg-target"]=M.USERLOGGEDIN_LOADINGMSG_TARGET,e.silentDocument=!0,popManager.fetch(M.USERLOGGEDIN_DATA_PAGEURL,e)},isLoggedIn:function(){var e=this;return e.loggedin},updateUserInfo:function(t,a,n,i,o,r){var s=this,l={};s.name!=a&&(s.name=a,e(".pop-user-name").text(s.name),l.name=s.name),s.id==t&&s.avatar==n||(s.id=t,s.avatar=n,e(".pop-user-avatar").attr("src",s.avatar),l.avatar=s.avatar),s.url!=i&&(s.url=i,e(".pop-user-url").attr("href",s.url),l.url=s.url);var c=0===e(s.roles).not(o).length&&0===e(o).not(s.roles).length;c||(s.roles=o,e.each(M.ROLES,function(t,a){e("body").removeClass(a)}),e.each(s.roles,function(t,a){e("body").addClass(a)}),l.roles=s.roles);var p=0===e(s.userattributes).not(r).length&&0===e(r).not(s.userattributes).length;p||(s.userattributes=r,e.each(M.USERATTRIBUTES,function(t,a){e("body").removeClass(a)}),e.each(s.userattributes,function(t,a){e("body").addClass(a)}),l.userattributes=s.userattributes),e.isEmptyObject(l)||(l.id=t,e(document).triggerHandler("user:updated",[l]))},loginout:function(t,a,n,i,o,r,s,l){var c=this;if(c.updateUserInfo(n,i,o,r,s,l),c.loggedin!=a){c.loggedin=a;var i,p=e("body");c.loggedin?(p.data("loggedinuser-id",n).addClass("loggedin user-"+n),i="user:loggedin"):(p.removeClass("loggedin").removeClass("user-"+p.data("loggedinuser-id")).data("loggedinuser-id",""),i="user:loggedout"),"initialfeedback"!=t&&c.closeCheckpointMessages(),e(document).triggerHandler(i,[t]),e(document).triggerHandler("user:loggedinout",[t])}},feedbackLoginOut:function(e){var t=this,a=popManager.getTopLevelFeedback(),n=a[M.DATALOAD_USER];if("undefined"!=typeof n){var i,o,r,s,l;i=n[M.DATALOAD_USER_LOGGEDIN],o=n[M.DATALOAD_USER_ID],r=n[M.DATALOAD_USER_NAME],s=n[M.DATALOAD_USER_AVATAR],l=n[M.DATALOAD_USER_URL],roles=n[M.DATALOAD_USER_ROLES],userattributes=n[M.DATALOAD_USER_ATTRIBUTES];var c="feedback";return e?c="initialfeedback":t.initialuserdata&&(c="initialuserdata",t.initialuserdata=!1),t.loginout(c,i,o,r,s,l,roles,userattributes),!0}return!1},checkpointInvalidateBlocks:function(){var t=this;e(document).on("user:loggedin",function(e,a){"initialfeedback"!=a&&"initialuserdata"!=a&&t.closeCheckpointMessages()})},closeCheckpointMessages:function(){jQuery(document).ready(function(e){e(".alert.in.pop-messagefeedback.checkpoint").removeClass("fade").alert("close")})}}}(jQuery),popJSLibraryManager.register(popUserAccount,["documentInitialized","pageSectionInitialized","blockInitialized","loadAvatar"]),function(e){popBootstrap={modal:function(t){var a=t.targets;a.on("show.bs.modal",function(t){var a=e(this),n=e(t.relatedTarget);n=popManager.getOriginalLink(n);var i=n.data("header")||"";a.find(".modal-header .pop-box").html(i)})},closeModals:function(){e(".modal.in").modal("hide")},showingModal:function(e){return e.hasClass("in")},popover:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;t.execPopover(a,n,i)},contentPopover:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;t.execPopover(a,n,i.find("a[data-popover-target]"))},tooltip:function(e){var t=e.pageSection,a=e.targets;jQuery(document).ready(function(e){var n=popManager.getPageSectionPage(a);n.one("destroy",function(){a.tooltip("destroy")}),a.each(function(){var a=e(this),n=popManager.getDOMContainer(t,a),i="#"+n.attr("id"),o={placement:a.data("tooltip-placement")||"top",title:a.attr("title"),container:i};a.tooltip(o)})})},openParentCollapse:function(e){var t=this,a=e.targets;t.execOpenParentCollapse(a)},alertCloseOnTimeout:function(e){var t=this,a=(e.pageSection,e.targets),n=a.data("closetime")||3e3;a.data("close",!0),a.mouseenter(function(){a.data("close",null),a.addClass("hover")}),a.mouseleave(function(){a.data("close",!0),t.execAlertCloseOnTimeout(a,n),a.removeClass("hover")}),t.execAlertCloseOnTimeout(a,n)},execOpenParentCollapse:function(e){e.closest(".collapse").not(".in").collapse("show")},execPopover:function(e,t,a){jQuery(document).ready(function(n){var i=popManager.getPageSectionPage(t);i.one("destroy",function(){a.popover("destroy")});var o=popManager.getDOMContainer(e,t),r="#"+o.attr("id"),s={animation:!1,html:!0,trigger:"manual focus",placement:"auto",delay:{hide:100},container:r};a.each(function(){var e=n(this),t=n(e.data("popover-target")).first();if(t.length){var a=t.html(),i="#"+popManager.getBlock(e).attr("id");a='<span data-block="'+i+'">'+a+"</span>";var o=n.extend({},s,{content:a});e.popover(o).on("mouseenter",function(){var e=this;n(this).popover("show"),n(".popover").on("mouseleave",function(){n(e).popover("hide")})}).on("mouseleave",function(){var e=this;setTimeout(function(){n(".popover:hover").length||n(e).popover("hide")},o.delay.hide)})}})})},execAlertCloseOnTimeout:function(e,t){setTimeout(function(){e.data("close")&&e.alert("close")},t)},scrollTop:function(e){var t=e.closest(".modal").addBack(".modal");return!!t.length&&(t.animate({scrollTop:0},"fast"),!0)}}}(jQuery),popJSLibraryManager.register(popBootstrap,["modal","closeModals","popover","contentPopover","tooltip","openParentCollapse","alertCloseOnTimeout"]),function(e){popBootstrapCarousel={carouselStatic:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;t.prepareCarousel(a,n,i),i.carousel({interval:!1,wrap:!1})},carouselAutomatic:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;i.on("beforeReload",function(e){o.carousel("pause")}),a.prepareCarousel(n,i,o),carousel.find(".item.active").length&&(gdBootstrapCarousel.numberSlides(carousel)>=2?(e(window).width()>=768?carousel.carousel():carousel.carousel({interval:!1,wrap:!1}),carousel.find(".pop-carousel-controls").removeClass("hidden")):carousel.find(".pop-carousel-controls").addClass("hidden"))},prepareCarousel:function(e,t,a){var n=this;t.on("rendered",function(){n.targetsAddActive(a)}),n.targetsAddActive(a)},targetsAddActive:function(t){var a=this;t.each(function(){var t=e(this);a.addActive(t)})},addActive:function(e){0==e.find(".item.active").length&&e.find(".item:first-child").addClass("active")},showElement:function(e,t){var a=this,n=t.closest(".item"),i=n.parent().children().index(n);a.slideTo(e,i)},slideTo:function(e,t){e.carousel(t)},next:function(e){e.carousel("next")},prev:function(e){e.carousel("prev")},isFirstSlide:function(e){return e.find(".item:first-child").hasClass("active")},isLastSlide:function(e){return e.find(".item:last-child").hasClass("active")},isNthSlide:function(e,t){return e.find(".item:nth-child("+t+")").hasClass("active")},isNthLastSlide:function(e,t){return e.find(".item:nth-last-child("+t+")").hasClass("active")},numberSlides:function(e){return e.find(".item").length}}}(jQuery),function(e){popBootstrapCarouselControls={initBlockRuntimeMemory:function(e){var t=this,a=e.pageSection,n=e.block,i=e.runtimeMempage;i.carouselControls={},t.resetBlockRuntimeMemory(a,n)},carouselControls:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets,o=t.getCarousel(i),r=i.children(".pop-carousel-control.right");t.controlCarouselNext(a,n,o,i,r);var s=i.children(".pop-carousel-control.left");t.controlCarouselPrev(a,n,o,i,s),n.on("fetchCompleted",function(e){t.handleReload(a,n,i)}),t.setEnabledDisabled(a,n,i)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).carouselControls},resetBlockRuntimeMemory:function(t,a){var n=this,i=n.getRuntimeMemoryPage(t,a),o={state:""};e.extend(i,o)},slideNext:function(e,t,a,n){var i=this,o=popManager.getBlockParams(e,t);popBootstrapCarousel.isNthLastSlide(a,2)&&o[M.URLPARAM_STOPFETCHING]&&i.disable(n),i.enable(n.siblings(".pop-carousel-control.left")),popBootstrapCarousel.next(a)},controlCarouselNext:function(t,a,n,i,o){var r=this,s=popManager.getBlockParams(t,a);o.click(function(i){i.preventDefault();var o=e(this);if(!r.disabled(o))if(popBootstrapCarousel.isLastSlide(n)){if(s.loading.length||s[M.URLPARAM_STOPFETCHING])return;popManager.fetchBlock(t,a,{operation:M.URLPARAM_OPERATION_APPEND}),r.setControlState(t,a,"loading")}else r.slideNext(t,a,n,o)})},controlCarouselPrev:function(t,a,n,i,o){var r=this;o.click(function(t){t.preventDefault();var a=e(this);r.disabled(a)||(popBootstrapCarousel.isNthSlide(n,2)&&r.disable(a),popBootstrapCarousel.numberSlides(n)>1&&r.enable(a.siblings(".pop-carousel-control.right")),popBootstrapCarousel.prev(n))})},handleReload:function(e,t,a){var n=this,i=popManager.getBlockDataset(e,t);if(n.setEnabledDisabled(e,t,a),i&&i.length&&"loading"==n.getControlState(e,t)){var o=n.getCarousel(a),r=a.children(".pop-carousel-control.right");n.slideNext(e,t,o,r)}n.setControlState(e,t,"")},getControlState:function(e,t){var a=this,n=a.getRuntimeMemoryPage(e,t);return n.state},setControlState:function(e,t,a){var n=this,i=n.getRuntimeMemoryPage(e,t);i.state=a},getCarousel:function(t){return e(t.data("target"))},setEnabledDisabled:function(e,t,a){var n=this,i=n.getCarousel(a),o=a.children(".pop-carousel-control.left"),r=a.children(".pop-carousel-control.right");if(0==popBootstrapCarousel.numberSlides(i))n.disable(o),n.disable(r);else{popBootstrapCarousel.isFirstSlide(i)?n.disable(o):n.enable(o);var s=popManager.getBlockParams(e,t);popBootstrapCarousel.isLastSlide(i)&&s[M.URLPARAM_STOPFETCHING]?n.disable(r):n.enable(r)}},disable:function(e){e.addClass("disabled"),e.attr("disabled",!0)},enable:function(e){e.removeClass("disabled"),e.attr("disabled",!1)},disabled:function(e){return e.hasClass("disabled")}}}(jQuery),popJSLibraryManager.register(popBootstrapCarousel,["carouselStatic","carouselAutomatic"]),popJSLibraryManager.register(popBootstrapCarouselControls,["initBlockRuntimeMemory","controlCarouselPrev","controlCarouselNext","carouselControls"]),function(e){popWaypoints={documentInitialized:function(){e(window).on("resized",function(){Waypoint.refreshAll()})},waypointsHistoryStateNew:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=t.getOptions(a,i),r=new Waypoint({element:i,handler:function(t){var a=this.element;popManager.isHidden(a)||"up"==t&&popManager.historyReplaceState(e(this))},context:o.context,offset:"bottom-in-view"}),s=new Waypoint({element:i,handler:function(t){var a=this.element;popManager.isHidden(a)||"down"==t&&popManager.historyReplaceState(e(this))},context:o.context});t.destroy(a,n,r),t.destroy(a,n,s)})})},waypointsHistoryStateOriginal:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=t.getOptions(a,i),r=new Waypoint({element:i,handler:function(e){var t=this.element;popManager.isHidden(t)||"up"==e&&popManager.historyReplaceState(t)},context:o.context});t.destroy(a,n,r)})})},waypointsToggleCollapse:function(e){var t=this,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),n=e(a.data("collapse-target"));if(n.length){var i=popManager.getBlock(n),o=popManager.getBlock(i);t.execWaypointsToggleCollapse(o,i,n,a)}})})},waypointsTheater:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=t.getOptions(a,i),r=new Waypoint({element:i,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?popPageSectionManager.theater(!0):"up"==e&&popPageSectionManager.theater(!1))},context:o.context});t.destroy(a,n,r)})})},waypointsFetchMore:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){var o=[],r=popManager.isContentLoaded(a,n);i.each(function(){var i=e(this),s=t.getOptions(a,i),l=new Waypoint({element:i,handler:function(e){var t=this.element;if("down"==e){if(popManager.isHidden(t))return;t.trigger("click")}},context:s.context,enabled:r,offset:"bottom-in-view"});t.destroy(a,n,l),o.push(l)}),n.on("fetchCompleted",function(n){var i=e(this),r=popManager.getBlockParams(a,i);r[M.URLPARAM_STOPFETCHING]?e.each(o,function(e,n){n.enabled&&(n.disable(),t.reEnable(a,i,n))}):e.each(o,function(e,t){t.enabled||t.enable(),t.context.refresh()})})})},reEnable:function(e,t,a){var n=this;t.one("beforeReload",function(){t.one("fetchCompleted",function(){var i=popManager.getBlockParams(e,t);i[M.URLPARAM_STOPFETCHING]?n.reEnable(e,t,a):a.enable()})})},execWaypointsToggleCollapse:function(e,t,a,n){var i=this,o=i.getOptions(e,a),r=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?n.collapse("show"):"up"==e&&n.collapse("hide"))},context:o.context});i.destroy(e,t,r)},getOptions:function(e,t){var a={},n=e.filter(".pop-waypoints-context");return n.length?a.context=n:(n=t.closest(".pop-waypoints-context"),n.length&&(a.context=n)),a},destroy:function(e,t,a){var n=popManager.getPageSectionPage(t);n.one("destroy",function(){a.destroy()})}}}(jQuery),popJSLibraryManager.register(popWaypoints,["documentInitialized","waypointsFetchMore","waypointsToggleCollapse","waypointsTheater","waypointsHistoryStateOriginal","waypointsHistoryStateNew"]),function(e){popWindow={windowSize:function(t){var a=this,n=(t.pageSection,t.targets);n.click(function(t){t.preventDefault();var n=e(this),i=e(n.data("target"));if(i.length){var o=n.data("toggle");"window-fullsize"==o?a.fullsize(i):"window-maximize"==o?a.maximize(i):"window-minimize"==o&&a.minimize(i)}})},getSize:function(e){return e.hasClass("fullsize")?"fullsize":e.hasClass("maximized")?"maximized":e.hasClass("minimized")?"minimized":null},fullsize:function(e){e.removeClass("maximized minimized").addClass("fullsize"),e.triggerHandler("fullsize.bs.window")},maximize:function(e){e.removeClass("fullsize minimized").addClass("maximized"),e.triggerHandler("maximized.bs.window")},minimize:function(e){e.removeClass("fullsize maximized").addClass("minimized"),e.triggerHandler("minimized.bs.window")}}}(jQuery),popJSLibraryManager.register(popWindow,["windowSize"]),function(e){popMultiselect={multiselect:function(t){var a=(t.pageSection,t.block),n=t.targets,i=popManager.getPageSectionPage(a);i.one("destroy",function(){n.multiselect("destroy")});var o={buttonClass:"btn btn-default",buttonContainer:'<div class="btn-group multiselect-btn-group" />',enableHTML:!0,nonSelectedText:M.MULTISELECT_NONSELECTEDTEXT,nSelectedText:M.MULTISELECT_NSELECTEDTEXT,allSelectedText:M.MULTISELECT_ALLSELECTEDTEXT};n.each(function(){var t=e(this),a=e.extend({},o);t.attr("title")&&(a.nonSelectedText=t.attr("title")),t.hasClass("input-sm")&&(a.buttonClass+=" btn-sm"),t.hasClass("input-lg")&&(a.buttonClass+=" btn-lg"),t.multiselect(a)})}}}(jQuery),popJSLibraryManager.register(popMultiselect,["multiselect"]),function(e){popDynamicMaxHeight={dynamicMaxHeight:function(e){var t=e.targets;t.dynamicMaxHeight()}}}(jQuery),popJSLibraryManager.register(popDynamicMaxHeight,["dynamicMaxHeight"]),function(e){popDateRange={dateRange:function(t){var a=this,n=t.pageSection,i=(t.block,t.targets),o=M.DATERANGE_FORMAT||"DD/MM/YYYY",r={autoApply:!0,linkedCalendars:!1,showWeekNumbers:!1,timePicker:!1,buttonClasses:["btn"],applyClass:"btn-success",cancelClass:"btn-warning",format:o,separator:M.DATERANGE_SEPARATOR,locale:{applyLabel:M.DATERANGE_APPLY,cancelLabel:M.DATERANGE_CANCEL,fromLabel:M.DATERANGE_FROM,toLabel:M.DATERANGE_TO,customRangeLabel:M.DATERANGE_CUSTOMRANGE,daysOfWeek:M.DATERANGE_DAYSOFWEEK,monthNames:M.DATERANGE_MONTHNAMES,firstDay:1}},s={maxDate:moment().add(1,"days")},l={minDate:moment().subtract(1,"days")},c={opens:"right"},p={opens:"left"};i.each(function(){var t=e(this),i=t.hasClass("opens-left")?p:c,d={parentEl:"#"+popManager.getDOMContainer(n,t).attr("id")},u=e.extend({},r,i,d);if(t.hasClass("daterange-future")&&!t.hasClass("daterange-past")?e.extend(u,l):t.hasClass("daterange-past")&&!t.hasClass("daterange-future")&&e.extend(u,s),t.hasClass("timepicker")){var g=M.DATERANGE_TIMEFORMAT||"h:mm A";u.locale.format=o+" "+g;var h={autoApply:!1,timePicker:!0,timePicker24Hour:"h:mm A"!=g,timePickerIncrement:15};e.extend(u,h)}t.daterangepicker(u,a.callback),t.siblings(".from").val()||t.val("")})},callback:function(e,t){var a=this,n=a.element;n.siblings(".from").val(e.format("YYYY-MM-DD")),n.siblings(".to").val(t.format("YYYY-MM-DD")),n.siblings(".fromtime").length&&(n.siblings(".fromtime").val(e.format("HH:mm")),n.siblings(".totime").val(t.format("HH:mm")))}}}(jQuery),popJSLibraryManager.register(popDateRange,["dateRange"]),function(e){popTypeahead={typeaheadSearchBtn:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.click(function(){var t=e(this),o=t.closest(".pop-typeahead");a.executeTypeaheadSearch(n,i,o)})},typeaheadSearchInput:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.keypress(function(t){if(13==event.which){event.preventDefault();var o=e(this),r=o.closest(".pop-typeahead"),s=r.find('input[type="text"].tt-input');s.typeahead("close"),a.executeTypeaheadSearch(n,i,r)}})},fillTypeahead:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.each(function(){var t=e(this),o=t.data("urlparam");if(o){var r=i.data("paramsscope-url"),s=getParam(o,r);if(s){var l=t.data("database-key");e.each(s,function(e,o){var r=popManager.getItemObject(l,o);a.selectTypeahead(n,i,t,r)}),popBootstrap.execOpenParentCollapse(t)}}})},selectDatum:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.click(function(t){t.preventDefault();var o=e(this),r=e(o.data("target")),s=o.data("objectid"),l=o.data("db-key"),c=popManager.getItemObject(l,s);a.selectTypeahead(n,i,r,c)})},selectableTypeahead:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;a.typeahead(n,i,o),o.each(function(){var t=e(this);a.validateMaxSelected(n,i,t),t.bind("typeahead:selected",function(t,o,r){var s=e(this);a.selectTypeahead(n,i,s,o)})})},fetchlinkTypeahead:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;a.typeahead(n,i,o),o.each(function(){var t=e(this);t.bind("typeahead:selected",function(t,a,n){var i=e(this),o=i.closest(".pop-typeahead");popManager.click(a.url,o)})})},selectableTypeaheadTrigger:function(t){var a=this,n=(t.pageSection,t.block,t.targets);n.on("close.bs.alert",function(){var t=e(this),n=t.closest(".pop-typeahead"),i=a.getElementsToDisable(n);i.attr("disabled",!1),i.removeClass("disabled");var o=t.children('input[type="hidden"]').val();n.triggerHandler("close",[t,o])})},selectTypeahead:function(e,t,a,n){var i=this,o=a.find('input[type="text"].tt-input');i.triggerSelect(e,t,a,n),o.typeahead("val","")},executeTypeaheadSearch:function(e,t,a){var n=a.find('input[type="text"].tt-input'),i=popManager.getQueryUrl(e,t),o=n.typeahead("val");o&&(i=i.replace("%QUERY",n.typeahead("val")),popManager.click(i,a))},getElementsToDisable:function(e){return e.children("div.pop-operation").find("a, button, input")},typeahead:function(t,a,n){var i=this,o=popManager.getPageSectionPage(a);o.one("destroy",function(){i.destroy(n)}),a.one("rerender",function(e){i.destroy(n)}),n.each(function(){var n=e(this),i=n.find('input[type="text"]'),o=popManager.getJsSettings(t,a,n),r=[];e.each(o["dataset-components"],function(e,n){var i=popManager.getJsSettings(t,a,n);r.push(i.dataset)}),e.each(r,function(e,t){var a=t.layout;t.template=popManager.getScriptTemplate(a)});var s=[],l=[];e.each(r,function(t,a){var n=a.limit;r.length>1&&n>3&&(n=3);var i={datumTokenizer:function(t){var n=[];return e.each(a.tokenizerKeys,function(e,a){n=n.concat(Bloodhound.tokenizers.whitespace(t[a]))}),n},queryTokenizer:Bloodhound.tokenizers.whitespace};a.local&&(i.local=a.local),a.prefetch&&(i.prefetch={url:a.prefetch,thumbprint:a.thumbprint}),a.remote&&(i.remote={url:a.remote,wildcard:"%QUERY"});var o=new Bloodhound(i);s.push(o);var c;c=a.staticSuggestions?function(t,n){var i=[];e.each(a.staticSuggestions,function(a,n){var o={};e.each(n,function(e,a){"string"==typeof a&&(a=a.replace("%QUERY",t)),o[e]=a}),i.push(o)}),n(i)}:o.ttAdapter(),l.push({source:c,name:a.name,display:a.valueKey,limit:n,templates:{suggestion:a.template,header:a.header,pending:a.pending,notFound:a.notFound}})}),e.each(s,function(e,t){t.initialize()}),1==l.length?i.typeahead({highlight:!0},l[0]):2==l.length?i.typeahead({highlight:!0},l[0],l[1]):3==l.length?i.typeahead({highlight:!0},l[0],l[1],l[2]):4==l.length&&i.typeahead({highlight:!0},l[0],l[1],l[2],l[3])})},triggerSelect:function(t,a,n,i){var o=this;if(0==n.find('input[type="hidden"][value="'+i.id+'"]').length){var r=popManager.getJsSettings(t,a,n),s=r["trigger-layout"],l=(popManager.getSettingsId(t),popManager.getSettingsId(a),e.extend({itemObject:i},r["datum-context"])),c={extendContext:l},p=popManager.getTemplateHtml(t,a,s,c);popManager.mergeHtml(p,n.find(".pop-box")),popManager.runJSMethods(t,a,s,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(t,a,s),o.validateMaxSelected(t,a,n),n.triggerHandler("selected",[i])}},validateMaxSelected:function(e,t,a){var n=this;if(a.data("max-selected")){var i=a.find('input[type="hidden"]').length;if(i==a.data("max-selected")){var o=n.getElementsToDisable(a);o.attr("disabled","disabled"),o.addClass("disabled")}}},removeSelected:function(e,t){var a=e.find('input[type="hidden"][value="'+t+'"]'),n=a.closest(".alert");n.alert("close")},destroy:function(e){e.find('input[type="text"].tt-input').typeahead("destroy")}}}(jQuery),popJSLibraryManager.register(popTypeahead,["selectableTypeahead","fillTypeahead","selectDatum","fetchlinkTypeahead","selectableTypeaheadTrigger","typeaheadSearchBtn","typeaheadSearchInput"]),function(e){popModals={modalForm:function(t){var a=(t.pageSection,t.targets);a.on("show.bs.modal",function(t){var a=e(this),n=(e(t.relatedTarget),e(a.data("initjs-targets")));n.each(function(){var t=e(this);popManager.closeMessageFeedback(t)})})}}}(jQuery),popJSLibraryManager.register(popModals,["modalForm"]),function(e){popGA={documentInitialized:function(){var e=e||[];e.push(["_setAccount",M.GOOGLEANALYTICS]),e.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},replaceState:function(e){_gaq.push(["_trackPageview"])}}}(jQuery),popJSLibraryManager.register(popGA,["documentInitialized","replaceState"]),function(e){popPerfectScrollbar={scrollbarHorizontal:function(e){var t=(e.pageSection,e.targets);jQuery(document).ready(function(e){t.perfectScrollbar({suppressScrollY:!0})})},scrollbarVertical:function(e){var t=(e.pageSection,e.targets);jQuery(document).ready(function(e){t.perfectScrollbar({suppressScrollX:!0})})},doScroll:function(e,t,a){a?e.animate({scrollTop:t}):e.scrollTop(t),e.perfectScrollbar("update")},scrollToElem:function(e,t,a){var n=this,i=e.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(i.length){var o=0;if(t){var r=i.children(".perfect-scrollbar-offsetreference");r.length||(r=e),o=t.offset().top-r.offset().top}return n.doScroll(i,o,a),!0}return!1},getPosition:function(e){var t=e.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(t.length){var a=t.children(".perfect-scrollbar-offsetreference");if(a.length)return a.position().top*-1}return 0},scrollTop:function(e,t,a){var n=this;t=t||0;var i=e.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");return!!i.length&&(n.doScroll(i,t,a),!0)}}}(jQuery),popJSLibraryManager.register(popPerfectScrollbar,["scrollbarHorizontal","scrollbarVertical"]),function(e){popFunctions={expandJSKeys:function(e){var t=e.context;t[M.JS_FONTAWESOME]&&(t.fontawesome=t[M.JS_FONTAWESOME]),t[M.JS_DESCRIPTION]&&(t.description=t[M.JS_DESCRIPTION])},beep:function(e){beep()},showmore:function(t){var a=t.targets;a.find(".pop-showmore-more").click(function(t){t.preventDefault();var a=e(this),n=a.closest(".pop-content");n.find(".pop-showmore-more").addClass("hidden"),n.find(".pop-showmore-less").removeClass("hidden"),n.find(".pop-showmore-more-full").removeClass("hidden")}),a.find(".pop-showmore-less").click(function(t){t.preventDefault();var a=e(this),n=a.closest(".pop-content");n.find(".pop-showmore-less").addClass("hidden"),n.find(".pop-showmore-more").removeClass("hidden"),n.find(".pop-showmore-more-full").addClass("hidden")})},hideEmpty:function(e){var t=e.targets;t.closest(".pop-hide-empty").addClass("hidden")},imageResponsive:function(e){var t=e.targets;t.find("div.pop-content").addBack("div.pop-content").find("img, .wp-caption").addClass("img-responsive")},printWindow:function(e){var t=getParam(M.URLPARAM_ACTION,window.location.href);t==M.URLPARAM_ACTION_PRINT&&jQuery(document).ready(function(e){window.print()})},copyHeader:function(e){var t=e.targets,a=e.relatedTarget;if(a){a=popManager.getOriginalLink(a);var n=a.data("header");n&&t.find(".pop-header").removeClass("hidden").find(".pop-box").html(n)}},fillURLParamInput:function(t){var a=this,n=t.block,i=t.targets;i.each(function(){var t=e(this),i=a.getURLParamInputValue(n,t);t.val(i)})},fillAddonInput:function(t){var a=this,n=t.targets,i=t.relatedTarget;i&&n.each(function(){var t=e(this);a.fillInput(t,i)})},fillModalInput:function(t){var a=this,n=t.targets;n.each(function(){var t=e(this),n=t.closest(".modal");n.on("show.bs.modal",function(n){var i=e(n.relatedTarget);a.fillInput(t,i)})})},fillAddonURLInput:function(t){var a=this,n=t.targets,i=t.relatedTarget;i&&n.each(function(){var t=e(this);a.fillURLInput(t,i)})},fillModalURLInput:function(t){var a=this,n=t.targets;n.each(function(){var t=e(this),n=t.closest(".modal");n.on("show.bs.modal",function(n){var i=e(n.relatedTarget);a.fillURLInput(t,i)})})},switchTargetClass:function(t){var a=t.targets;a.click(function(t){var a=e(this);a.is('a[href="#"]')&&t.preventDefault();var n=e(a.data("target"))||e("body"),i=a.data("mode")||"add",o=a.data("class");"add"==i?n.addClass(o):"remove"==i?n.removeClass(o):"toggle"==i&&n.toggleClass(o)})},doNothing:function(e){var t=e.targets;t.click(function(e){e.preventDefault()})},fetchMore:function(e){var t=e.pageSection,a=e.block,n=e.targets;a.on("beforeFetch",function(e,t){t["skip-status"]||n.button("loading")}),a.on("fetchCompleted",function(e){var i=popManager.getBlockParams(t,a);i[M.URLPARAM_STOPFETCHING]?n.addClass("hidden"):(n.removeClass("hidden"),n.button("reset"))}),n.click(function(e){e.preventDefault(),popManager.fetchBlock(t,a,{operation:M.URLPARAM_OPERATION_APPEND})})},fetchMoreDisable:function(e){var t=e.block,a=e.targets;t.on("beforeFetch",function(e,t){t["skip-status"]||a.addClass("disabled").attr("disabled","disabled")}),t.on("fetchCompleted",function(e){a.removeClass("disabled").attr("disabled",!1)})},saveLastClicked:function(t){var a=(t.pageSection,t.block),n=t.targets;n.click(function(t){var n=e(this);a.find('[data-action="retry"]').data("lastclicked","#"+n.attr("id")).removeClass("hidden")})},retrySendRequest:function(t){var a=(t.pageSection,t.block,t.targets);a.click(function(t){t.preventDefault();var a=e(this);a.data("lastclicked")&&e(a.data("lastclicked")).trigger("click")})},highlight:function(t){var a=t.targets;a.each(function(){var t=e(this),a=popManager.getPageSection(t);popManager.scrollToElem(a,t,!0)})},embedCode:function(t){var a=this,n=t.targets;n.each(function(){var t=e(this),n=t.closest(".modal");n.on("show.bs.modal",function(n){var i=e(n.relatedTarget),o=a.getUrl(i,!0);o=popManager.getEmbedUrl(o),a.execReplaceCode(t,o)})})},modalReloadEmbedPreview:function(t){var a=this,n=t.pageSection,i=t.targets;i.each(function(){var t=e(this),i=popManager.getBlock(t),o=i.closest(".modal");o.on("show.bs.modal",function(o){var r=e(o.relatedTarget),s=a.getUrl(r,!0);s=popManager.getEmbedUrl(s),a.embedPreview(n,i,t,s)})})},reloadEmbedPreview:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.each(function(){var t=e(this),o=e(t.data("input-target"));o.change(function(){e(this);a.embedPreviewFromInput(n,i,t)}),a.embedPreviewFromInput(n,i,t)})},replaceCode:function(t){var a=this,n=t.targets;n.each(function(){var t=e(this),n=t.closest(".modal");n.on("show.bs.modal",function(n){var i=e(n.relatedTarget);a.execReplaceCode(t,a.getUrl(i))})})},socialmedia:function(t){var a=t.targets;a.one("mouseenter",function(){var t=e(this);t.children("a.socialmedia-item").each(function(){var t=e(this),a=t.data("provider");if(a){var n=M.SOCIALMEDIA[a];n&&e.ajax({type:"GET",dataType:n.dataType,url:n["counter-url"].replace("%s",t.data("url")),success:function(e){if(e.hasOwnProperty(n.property)){var a=e[n.property];0!=a&&t.children(".pop-counter").html(a)}}})}})})},mediaplayer:function(e){var t=e.targets;t.mediaelementplayer()},reset:function(t){var a=t.pageSection,n=t.targets;n.click(function(t){t.preventDefault();var n=e(this),i=popManager.getBlock(n);popManager.reset(a,i),popManager.closeMessageFeedback(i)})},browserUrl:function(e){var t=e.targets;t.closest("form").on("beforeSubmit",function(){var e=window.location.href;t.val(e)})},smallScreenHideCollapse:function(t){var a=t.targets;if(e(window).width()<768){var a=t.targets;a.collapse("hide")}},cookies:function(t){var a=t.targets;a.each(function(){var t=e(this);e.cookie(t.data("cookieid"))||t.removeClass("hidden"),t.children("button.close").click(function(t){t.preventDefault();var a=e(this).parent(".cookie");e.cookie(a.data("cookieid"),"dismissed",{expires:90,path:"/"})})})},cookieToggleClass:function(t){var a=this,n=t.pageSection,i=t.targets;i.each(function(){var t=e(this),i=t.data("cookieid");if(a.cookieToggleClassInitial(n,t),t.data("deletecookiebtn")){var o=t.data("deletecookiebtn"),r="self"==o?t:e(o);r.click(function(t){e.cookie(i,null,{expires:-1,path:"/"})})}if(t.data("setcookiebtn")){var o=t.data("setcookiebtn"),r="self"==o?t:e(o);r.click(function(t){e.cookie(i,"dismissed",{expires:180,path:"/"})})}if(t.data("togglecookiebtn")){var o=t.data("togglecookiebtn"),r="self"==o?t:e(o);r.click(function(t){e.cookie(i)?e.cookie(i,null,{expires:-1,path:"/"}):e.cookie(i,"dismissed",{expires:180,path:"/"})})}})},sortable:function(e){var t=(e.pageSection,e.block,e.targets);t.sortable({cursor:"move"})},onActionThenClick:function(t){var a=t.targets;a.each(function(){var t=e(this),a=e(t.data("triggertarget")),n=t.data("trigger-action")||"click";t.data("triggertarget-internal")&&(a=a.find(t.data("triggertarget-internal"))),a.on(n,function(e){t.trigger("click")})})},cookieToggleClassInitial:function(t,a){var n=a.data("cookieid");if(!e.cookie(n)){var i=e(a.data("cookietarget")),o=a.data("cookiecollapse");o&&jQuery(document).ready(function(e){i.collapse(o)});var r=a.data("cookieclass");r&&i.addClass(r)}},embedPreviewFromInput:function(t,a,n){var i=this,o=e(n.data("input-target")),r=o.val();if(r&&isUrlValid(r)){var s=e(n.data("iframe-target")),l=i.embedPreview(t,a,s,r);n.data("iframe-target","#"+l.targetContainer.attr("id"))}},getURLParamInputValue:function(e,t){var a,n=t.data("urlparam");if(n){var i=e.data("paramsscope-url");a=getParam(n,i)}return a||""},embedPreview:function(e,t,a,n){
var i={operation:M.URLPARAM_OPERATION_REPLACEINLINE,extendContext:{src:n},"merge-target":"#"+a.attr("id")},o=a.data("templateid"),r=popManager.mergeTargetTemplate(e,t,o,i);return popManager.runJSMethods(e,t,o,"full"),r},fillInput:function(e,t){t=popManager.getOriginalLink(t);var a,n=e.data("attr");n&&(a=t.data(n)),a=a||"",e.val(a)},fillURLInput:function(e,t){var a=this;t=popManager.getOriginalLink(t);var n=a.getUrl(t);e.val(n)},getUrl:function(t,a){t=popManager.getOriginalLink(t);var n=t.data("target-url");if(!n){var i=e(t.data("blocktarget")),o=popManager.getPageSection(i);n=popManager.getBlockFilteringUrl(o,i,a)}return n},execReplaceCode:function(e,t){var a=e.data("code-placeholder"),n=a.format(t);e.val(n)}}}(jQuery),popJSLibraryManager.register(popFunctions,["expandJSKeys","showmore","hideEmpty","imageResponsive","printWindow","copyHeader","fillURLParamInput","fillAddonInput","fillModalInput","fillAddonURLInput","fillModalURLInput","switchTargetClass","doNothing","fetchMore","fetchMoreDisable","saveLastClicked","retrySendRequest","highlight","replaceCode","modalReloadEmbedPreview","reloadEmbedPreview","embedCode","socialmedia","mediaplayer","reset","browserUrl","smallScreenHideCollapse","cookies","cookieToggleClass","sortable","onActionThenClick","beep"]),function(e){popBlockFunctions={hideIfEmptyBlock:function(e){var t=e.pageSection,a=e.block;popManager.hideIfEmpty(t,a)?a.addClass("hidden"):a.removeClass("hidden")}}}(jQuery),popJSLibraryManager.register(popBlockFunctions,["hideIfEmptyBlock"]),function(e){popControls={controlPrint:function(t){var a=this,n=t.pageSection,i=(t.block,t.targets);i.click(function(t){t.preventDefault();var i=e(this),o=a.getBlockFilteringUrl(n,i,!0);o=popManager.getPrintUrl(o),popSystem.openPrint(o)})},controlSocialMedia:function(t){var a=this,n=t.pageSection,i=(t.block,t.targets);i.click(function(t){t.preventDefault();var i=e(this),o=a.getBlockFilteringUrl(n,i,!0),r=i.data("provider"),s=M.SOCIALMEDIA[r],l=s["share-url"].replace(new RegExp("%url%","g"),encodeURIComponent(o)).replace(new RegExp("%title%","g"),encodeURIComponent(popManager.documentTitle));popSystem.openSocialMedia(l)})},getBlockFilteringUrl:function(t,a,n){var i=e(a.data("blocktarget"));return popManager.getBlockFilteringUrl(t,i,n)}}}(jQuery),popJSLibraryManager.register(popControls,["controlPrint","controlSocialMedia"]),jQuery.fn.fullScreen=d,jQuery.fn.toggleFullScreen=function(){return d.call(this,!d.call(this))};var e,f,g;e=document,e.webkitCancelFullScreen?(f="webkitfullscreenchange",g="webkitfullscreenerror"):e.msExitFullscreen?(f="MSFullscreenChange",g="MSFullscreenError"):e.mozCancelFullScreen?(f="mozfullscreenchange",g="mozfullscreenerror"):(f="fullscreenchange",g="fullscreenerror"),jQuery(document).bind(f,function(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))}),jQuery(document).bind(g,function(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))}),!function(e){"use strict";function t(e,t){for(var a=0;a<e.length;++a)t(e[a],a)}function a(t,a){this.$select=e(t),this.$select.attr("data-placeholder")&&(a.nonSelectedText=this.$select.data("placeholder")),this.options=this.mergeOptions(e.extend({},a,this.$select.data())),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=e.proxy(this.options.onChange,this),this.options.onDropdownShow=e.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=e.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=e.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=e.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&e("option",this.$select).length<=0&&this.disable(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:["options","value","selectedOptions"],init:function(t,a,n,i,o){var r=e(t),s=ko.toJS(a());if(r.multiselect(s),n.has("options")){var l=n.get("options");ko.isObservable(l)&&ko.computed({read:function(){l(),setTimeout(function(){var e=r.data("multiselect");e&&e.updateOriginalOptions(),r.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:t})}if(n.has("value")){var c=n.get("value");ko.isObservable(c)&&ko.computed({read:function(){c(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(n.has("selectedOptions")){var p=n.get("selectedOptions");ko.isObservable(p)&&ko.computed({read:function(){p(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0})}ko.utils.domNodeDisposal.addDisposeCallback(t,function(){r.multiselect("destroy")})},update:function(t,a,n,i,o){var r=e(t),s=ko.toJS(a());r.multiselect("setOptions",s),r.multiselect("rebuild")}}),a.prototype={defaults:{buttonText:function(t,a){if(0===t.length)return this.nonSelectedText;if(this.allSelectedText&&t.length===e("option",e(a)).length&&1!==e("option",e(a)).length&&this.multiple)return this.selectAllNumber?this.allSelectedText+" ("+t.length+")":this.allSelectedText;if(t.length>this.numberDisplayed)return t.length+" "+this.nSelectedText;var n="",i=this.delimiterText;return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();n+=t+i}),n.substr(0,n.length-2)},buttonTitle:function(t,a){if(0===t.length)return this.nonSelectedText;var n="",i=this.delimiterText;return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();n+=t+i}),n.substr(0,n.length-2)},optionLabel:function(t){return e(t).attr("label")||e(t).text()},onChange:function(e,t){},onDropdownShow:function(e){},onDropdownHide:function(e){},onDropdownShown:function(e){},onDropdownHidden:function(e){},onSelectAll:function(){},enableHTML:!1,buttonClass:"btn btn-default",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,selectedClass:"active",maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableClickableOptGroups:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,delimiterText:", ",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:a,buildContainer:function(){this.$container=e(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=e(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth,overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var t=this.$select.attr("tabindex");t&&this.$button.attr("tabindex",t),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=e(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(e.proxy(function(t,a){var n=e(a),i=n.prop("tagName").toLowerCase();n.prop("value")!==this.options.selectAllValue&&("optgroup"===i?this.createOptgroup(a):"option"===i&&("divider"===n.data("role")?this.createDivider():this.createOptionValue(a)))},this)),e("li input",this.$ul).on("change",e.proxy(function(t){var a=e(t.target),n=a.prop("checked")||!1,i=a.val()===this.options.selectAllValue;this.options.selectedClass&&(n?a.closest("li").addClass(this.options.selectedClass):a.closest("li").removeClass(this.options.selectedClass));var o=a.val(),r=this.getOptionByValue(o),s=e("option",this.$select).not(r),l=e("input",this.$container).not(a);if(i&&(n?this.selectAll():this.deselectAll()),i||(n?(r.prop("selected",!0),this.options.multiple?r.prop("selected",!0):(this.options.selectedClass&&e(l).closest("li").removeClass(this.options.selectedClass),e(l).prop("checked",!1),s.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&s.closest("a").css("outline","")):r.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(r,n),this.options.preventInputChangeEvent)return!1},this)),e("li a",this.$ul).on("mousedown",function(e){if(e.shiftKey)return!1}),e("li a",this.$ul).on("touchstart click",e.proxy(function(t){t.stopPropagation();var a=e(t.target);if(t.shiftKey&&this.options.multiple){a.is("label")&&(t.preventDefault(),a=a.find("input"),a.prop("checked",!a.prop("checked")));var n=a.prop("checked")||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==a){var i=a.closest("li").index(),o=this.lastToggledInput.closest("li").index();if(i>o){var r=o;o=i,i=r}++o;var s=this.$ul.find("li").slice(i,o).find("input");s.prop("checked",n),this.options.selectedClass&&s.closest("li").toggleClass(this.options.selectedClass,n);for(var l=0,c=s.length;l<c;l++){var p=e(s[l]),d=this.getOptionByValue(p.val());d.prop("selected",n)}}a.trigger("change")}a.is("input")&&!a.closest("li").is(".multiselect-item")&&(this.lastToggledInput=a),a.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",e.proxy(function(t){if(!e('input[type="text"]',this.$container).is(":focus"))if(9===t.keyCode&&this.$container.hasClass("open"))this.$button.click();else{var a=e(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!a.length)return;var n=a.index(a.filter(":focus"));38===t.keyCode&&n>0?n--:40===t.keyCode&&n<a.length-1?n++:~n||(n=0);var i=a.eq(n);if(i.focus(),32===t.keyCode||13===t.keyCode){var o=i.find("input");o.prop("checked",!o.prop("checked")),o.change()}t.stopPropagation(),t.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&e("li.multiselect-group",this.$ul).on("click",e.proxy(function(t){t.stopPropagation();var a=e(t.target).parent(),n=a.nextUntil("li.multiselect-group"),i=n.filter(":visible:not(.disabled)"),o=!0,r=i.find("input");r.each(function(){o=o&&e(this).prop("checked")}),r.prop("checked",!o).trigger("change")},this))},createOptionValue:function(t){var a=e(t);a.is(":selected")&&a.prop("selected",!0);var n=this.options.optionLabel(t),i=a.val(),o=this.options.multiple?"checkbox":"radio",r=e(this.options.templates.li),s=e("label",r);s.addClass(o),this.options.enableHTML?s.html(" "+n):s.text(" "+n);var l=e("<input/>").attr("type",o);this.options.checkboxName&&l.attr("name",this.options.checkboxName),s.prepend(l);var c=a.prop("selected")||!1;l.val(i),i===this.options.selectAllValue&&(r.addClass("multiselect-item multiselect-all"),l.parent().parent().addClass("multiselect-all")),s.attr("title",a.attr("title")),this.$ul.append(r),a.is(":disabled")&&l.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled"),l.prop("checked",c),c&&this.options.selectedClass&&l.closest("li").addClass(this.options.selectedClass)},createDivider:function(t){var a=e(this.options.templates.divider);this.$ul.append(a)},createOptgroup:function(t){var a=e(t).prop("label"),n=e(this.options.templates.liGroup);this.options.enableHTML?e("label",n).html(a):e("label",n).text(a),this.options.enableClickableOptGroups&&n.addClass("multiselect-group-clickable"),this.$ul.append(n),e(t).is(":disabled")&&n.addClass("disabled"),e("option",t).each(e.proxy(function(e,t){this.createOptionValue(t)},this))},buildSelectAll:function(){"number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString());var t=this.hasSelectAll();if(!t&&this.options.includeSelectAllOption&&this.options.multiple&&e("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(e(this.options.templates.divider));var a=e(this.options.templates.li);e("label",a).addClass("checkbox"),this.options.enableHTML?e("label",a).html(" "+this.options.selectAllText):e("label",a).text(" "+this.options.selectAllText),this.options.selectAllName?e("label",a).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):e("label",a).prepend('<input type="checkbox" />');var n=e("input",a);n.val(this.options.selectAllValue),a.addClass("multiselect-item multiselect-all"),n.parent().parent().addClass("multiselect-all"),this.$ul.prepend(a),n.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var t=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=t){if(this.$filter=e(this.options.templates.filter),e("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn){var a=e(this.options.templates.filterClearBtn);a.on("click",e.proxy(function(t){clearTimeout(this.searchTimeout),this.$filter.find(".multiselect-search").val(""),e("li",this.$ul).show().removeClass("filter-hidden"),this.updateSelectAll()},this)),this.$filter.find(".input-group").append(a)}this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",e.proxy(function(t){13===t.which&&t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(e.proxy(function(){if(this.query!==t.target.value){this.query=t.target.value;var a,n;e.each(e("li",this.$ul),e.proxy(function(t,i){var o=e("input",i).length>0?e("input",i).val():"",r=e("label",i).text(),s="";if("text"===this.options.filterBehavior?s=r:"value"===this.options.filterBehavior?s=o:"both"===this.options.filterBehavior&&(s=r+"\n"+o),o!==this.options.selectAllValue&&r){var l=!1;this.options.enableCaseInsensitiveFiltering&&s.toLowerCase().indexOf(this.query.toLowerCase())>-1?l=!0:s.indexOf(this.query)>-1&&(l=!0),e(i).toggle(l).toggleClass("filter-hidden",!l),e(i).hasClass("multiselect-group")?(a=i,n=l):(l&&e(a).show().removeClass("filter-hidden"),!l&&n&&e(i).show().removeClass("filter-hidden"))}},this))}this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){e("option",this.$select).each(e.proxy(function(t,a){var n=e("li input",this.$ul).filter(function(){return e(this).val()===e(a).val()});e(a).is(":selected")?(n.prop("checked",!0),this.options.selectedClass&&n.closest("li").addClass(this.options.selectedClass)):(n.prop("checked",!1),this.options.selectedClass&&n.closest("li").removeClass(this.options.selectedClass)),e(a).is(":disabled")?n.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):n.prop("disabled",!1).closest("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(t,a){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(null!==i&&void 0!==i){var o=this.getOptionByValue(i),r=this.getInputByValue(i);void 0!==o&&void 0!==r&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&r.closest("li").addClass(this.options.selectedClass),r.prop("checked",!0),o.prop("selected",!0),a&&this.options.onChange(o,!0))}}this.updateButtonText(),this.updateSelectAll()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(t,a){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(null!==i&&void 0!==i){var o=this.getOptionByValue(i),r=this.getInputByValue(i);void 0!==o&&void 0!==r&&(this.options.selectedClass&&r.closest("li").removeClass(this.options.selectedClass),r.prop("checked",!1),o.prop("selected",!1),a&&this.options.onChange(o,!1))}}this.updateButtonText(),this.updateSelectAll()},selectAll:function(t,a){var t="undefined"==typeof t||t,n=e("li input[type='checkbox']:enabled",this.$ul),i=n.filter(":visible"),o=n.length,r=i.length;if(t?(i.prop("checked",!0),e("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass)):(n.prop("checked",!0),e("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass)),o===r||t===!1)e("option:enabled",this.$select).prop("selected",!0);else{var s=i.map(function(){return e(this).val()}).get();e("option:enabled",this.$select).filter(function(t){return e.inArray(e(this).val(),s)!==-1}).prop("selected",!0)}a&&this.options.onSelectAll()},deselectAll:function(t){var t="undefined"==typeof t||t;if(t){var a=e("li input[type='checkbox']:not(:disabled)",this.$ul).filter(":visible");a.prop("checked",!1);var n=a.map(function(){return e(this).val()}).get();e("option:enabled",this.$select).filter(function(t){return e.inArray(e(this).val(),n)!==-1}).prop("selected",!1),this.options.selectedClass&&e("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else e("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),e("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&e("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&e("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(a){var n=0,i=this.$select.empty();e.each(a,function(a,o){var r;e.isArray(o.children)?(n++,r=e("<optgroup/>").attr({label:o.label||"Group "+n,disabled:!!o.disabled}),t(o.children,function(t){r.append(e("<option/>").attr({value:t.value,label:t.label||t.value,title:t.title,selected:!!t.selected,disabled:!!t.disabled}))})):r=e("<option/>").attr({value:o.value,label:o.label||o.value,title:o.title,selected:!!o.selected,disabled:!!o.disabled}),i.append(r)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(e){this.options=this.mergeOptions(e)},mergeOptions:function(t){return e.extend(!0,{},this.defaults,this.options,t)},hasSelectAll:function(){return e("li.multiselect-all",this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var t=e("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),a=t.length,n=t.filter(":checked").length,i=e("li.multiselect-all",this.$ul),o=i.find("input");n>0&&n===a?(o.prop("checked",!0),i.addClass(this.options.selectedClass),this.options.onSelectAll()):(o.prop("checked",!1),i.removeClass(this.options.selectedClass))}},updateButtonText:function(){var t=this.getSelected();this.options.enableHTML?e(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(t,this.$select)):e(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(t,this.$select)),e(".multiselect",this.$container).attr("title",this.options.buttonTitle(t,this.$select))},getSelected:function(){return e("option",this.$select).filter(":selected")},getOptionByValue:function(t){for(var a=e("option",this.$select),n=t.toString(),i=0;i<a.length;i+=1){var o=a[i];if(o.value===n)return e(o)}},getInputByValue:function(t){for(var a=e("li input",this.$ul),n=t.toString(),i=0;i<a.length;i+=1){var o=a[i];if(o.value===n)return e(o)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(e,t,a){var n=Array.prototype.slice.call(arguments,3);return setTimeout(function(){e.apply(a||window,n)},t)},setAllSelectedText:function(e){this.options.allSelectedText=e,this.updateButtonText()}},e.fn.multiselect=function(t,n,i){return this.each(function(){var o=e(this).data("multiselect"),r="object"==typeof t&&t;o||(o=new a(this,r),e(this).data("multiselect",o)),"string"==typeof t&&(o[t](n,i),"destroy"===t&&e(this).data("multiselect",!1))})},e.fn.multiselect.Constructor=a,e(function(){e("select[data-role=multiselect]").multiselect()})}(window.jQuery),!function(e,t,a,n){"use strict";e.fn.dynamicMaxHeight=function(t){function a(e,t){var a;a=e.hasClass(r)?t.data("replace-text"):t.attr("title"),t.text(a)}function n(e,t){e.find("."+o).css("max-height",t)}function i(e,t){t.css("display","inline-block")}var o="dynamic-height-wrap",r="dynamic-height-active",s="js-dynamic-show-hide";return this.each(function(t,l){var c=e(l),p=c.data("maxheight"),d=c.find("."+o).outerHeight(),u=c.find("."+s);c.attr("data-itemheight",d),d>p&&(n(c,p),c.toggleClass(r),i(c,u)),u.click(function(){c.hasClass(r)?n(c,d):n(c,p),a(c,u),c.toggleClass(r)})})}}(window.jQuery||window.$,document,window),"undefined"!=typeof module&&module.exports&&(module.exports=dynamicMaxHeight);