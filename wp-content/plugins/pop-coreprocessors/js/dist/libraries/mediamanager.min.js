"use strict";!function(e){window.popMediaManager={domain:null,initialized:{},needsRefresh:{},documentInitializedIndependent:function(){var t=this;e(document).on("uploader:start:settings",function(e,i){t.setUploadSettings(i)}),e(document.body).on("click.add-media-button",".insert-media",function(i){var n=e(i.currentTarget),a=e("#"+n.data("editor")),d=popManager.getBlock(a);t.domain=popManager.getBlockTopLevelDomain(d)}),e(document).on("user:loggedout",function(e){t.needsRefresh={featuredImage:!0,"editor-gallery":!0,"editor-insert":!0}}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var i=wp.media.frame.state();["gallery","insert"].indexOf(i.id)>-1&&(t.initialized["editor-"+i.id]&&t.needsRefresh["editor-"+i.id]&&t.refresh(i),t.initialized["editor-"+i.id]=!0,t.needsRefresh["editor-"+i.id]=!1)}),popFeaturedImage.getFrame().on("open",function(){t.initialized.featuredImage&&t.needsRefresh.featuredImage&&t.refresh(wp.media.frame.state()),t.initialized.featuredImage=!0,t.needsRefresh.featuredImage=!1})})},featuredImageSet:function(e){var t=this,i=e.domain;e.targets.click(function(e){t.domain=i})},getDomain:function(){return this.domain},refresh:function(e){e.get("library")._requery(!0)},setUploadSettings:function(e){e.multipart_params.post_id&&delete e.multipart_params.post_id}}}(jQuery),popJSLibraryManager.register(popMediaManager,["documentInitializedIndependent"]),popJSLibraryManager.register(popMediaManager,["featuredImageSet"],!0);