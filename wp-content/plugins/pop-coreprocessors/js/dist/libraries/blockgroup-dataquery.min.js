!function(o){window.popBlockGroupDataQuery={initBlockGroupFilter:function(e){var t=this,r=e.pageSection,a=e.block,c=e.targets;c.each(function(e){var t=o(this);blocks.each(function(){var e=o(this);popManager.setFilterBlockParams(r,e,t)})}),c.submit(function(e){e.preventDefault();var c=o(this);t.filterBlockGroup(r,a,c)})},reloadBlockGroup:function(o){var e=o.pageSection,t=o.block;o.targets.click(function(o){o.preventDefault();var r=popManager.getBlockGroupActiveBlock(t);popManager.reload(e,r)})},refetchBlockGroupOnUserLoggedIn:function(e){var t=e.domain,r=e.pageSection,a=e.targets;o(document).one("user:loggedin:"+t,function(e,t){"initialfeedback"!=t&&a.each(function(){var e=o("#"+o(this).attr("id"));if(e.length){var t=popManager.getBlockGroupBlocks(e),a=popManager.getBlockGroupActiveBlock(e);t.each(function(){var e=o(this);e.attr("id")==a.attr("id")?popBlockDataQuery.refetchBlock(r,e):popBlockDataQuery.makeOneTimeRefetch(r,e)})}})})},filterBlockGroup:function(e,t,r){var a=popManager.getBlockGroupActiveBlock(t);popManager.getBlockGroupBlocks(t).each(function(){var t=o(this);popManager.setFilterBlockParams(e,t,r),t.attr("id")==a.attr("id")?popManager.reload(e,t):popBlockDataQuery.makeOneTimeRefetch(e,t)})}}}(jQuery),popJSLibraryManager.register(popBlockGroupDataQuery,["initBlockGroupFilter","reloadBlockGroup","refetchBlockGroupOnUserLoggedIn"]);