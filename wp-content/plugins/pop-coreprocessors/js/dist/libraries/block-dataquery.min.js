"use strict";!function(e){window.popBlockDataQuery={initDelegatorFilter:function(t){var o=t.pageSection;t.targets.submit(function(t){t.preventDefault();var n=e(this);if(n.data("blocktarget")){var a=e(n.data("blocktarget")),i=popManager.getPageSection(a);popManager.isBlockGroup(a)?popBlockGroupDataQuery.filterBlockGroup(i,a,n):popManager.filter(i,a,n),popPageSectionManager.close(o,"xs")}})},initBlockFilter:function(t){var o=t.pageSection,n=t.block;t.targets.submit(function(t){t.preventDefault();var a=e(this);a.data("blocktarget")&&(n=e(a.data("blocktarget")),o=popManager.getPageSection(n)),popManager.filter(o,n,a)})},reloadBlock:function(e){var t=e.pageSection,o=e.block;e.targets.click(function(e){e.preventDefault(),popManager.reload(t,o)})},loadLatestBlock:function(e){var t=e.domain,o=e.pageSection,n=e.block;e.targets.click(function(e){e.preventDefault(),popManager.loadLatest(t,o,n)})},timeoutLoadLatestBlock:function(t){var o=this,n=t.domain,a=t.pageSection,i=t.block;t.targets.each(function(){var t=e(this),c=t.data("clicktime")||3e4;o.execTimeoutLoadLatestBlock(n,a,i,t,c)})},refetchBlockOnUserLoggedIn:function(t){var o=this,n=t.domain,a=t.pageSection,i=t.targets;e(document).one("user:loggedin:"+n,function(e,t){"initialfeedback"!=t&&o.execRefetchBlock(a,i)})},nonendingRefetchBlockOnUserLoggedIn:function(e){var t=this,o=e.domain,n=e.pageSection,a=e.targets;t.execNonendingRefetchBlockOnUserEvent(n,a,"user:loggedin:"+o)},nonendingRefetchBlockOnUserLoggedInOut:function(e){var t=this,o=e.domain,n=e.pageSection,a=e.targets;t.execNonendingRefetchBlockOnUserEvent(n,a,"user:loggedinout:"+o)},deleteBlockFeedbackValueOnUserLoggedInOut:function(t){var o=t.domain,n=t.pageSection,a=t.block;e(document).on("user:loggedinout:"+o,function(t,c){if("initialfeedback"!=c&&"initialuserdata"!=c){var r=popManager.getJsSettings(o,n,a)["user:loggedinout-deletefeedbackvalue"]||[];if(r.length){var l=popManager.getBlockFeedback(o,n,a);e.each(r,function(e,t){var o=l;for(i=0;i<t.length-1;i++)o=o[t[i]];delete o[t[t.length-1]]})}}})},initFilter:function(t){var o=t.pageSection,n=t.block;t.targets.each(function(){var t=e(this);popManager.setFilterBlockParams(o,n,t)})},makeAlwaysRefetchBlock:function(t){var o=this,n=t.pageSection;t.block.on("visible",function(){var t=e(this);o.refetchBlock(n,t)})},execTimeoutLoadLatestBlock:function(t,o,n,a,i){var c=this,r=popManager.getJsSettings(t,o,n,a),l={"skip-status":!0,"datasetcount-target":r["datasetcount-target"],"datasetcount-updatetitle":r["datasetcount-updatetitle"]};!(r["only-loggedin"]||!1)||popUserAccount.isLoggedIn(t)?setTimeout(function(){e("#"+a.attr("id")).length&&(popManager.loadLatest(t,o,n,l),c.execTimeoutLoadLatestBlock(t,o,n,a,i))},i):e(document).one("user:loggedin:"+t,function(e,r){c.execTimeoutLoadLatestBlock(t,o,n,a,i)})},execNonendingRefetchBlockOnUserEvent:function(t,o,n){var a=this;e(document).on(n,function(e,n){"initialfeedback"!=n&&"initialuserdata"!=n&&a.execRefetchBlock(t,o)})},execRefetchBlock:function(t,o){var n=this;o.each(function(){var o=e("#"+e(this).attr("id"));o.length&&n.refetchBlock(t,o)})},refetchBlock:function(e,t){var o={"post-data":t.data("post-data"),"show-disabled-layer":!0};popManager.refetch(e,t,o)},makeOneTimeRefetch:function(t,o){popManager.jsInitialized(o)&&popManager.isContentLoaded(t,o)&&o.one("visible",function(){var o=e(this);popBlockDataQuery.refetchBlock(t,o)})}}}(jQuery),popJSLibraryManager.register(popBlockDataQuery,["initDelegatorFilter","initBlockFilter","reloadBlock","loadLatestBlock","timeoutLoadLatestBlock","refetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedInOut","initFilter","makeAlwaysRefetchBlock"]);