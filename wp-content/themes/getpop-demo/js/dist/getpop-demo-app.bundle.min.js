function getMultiLayoutKey(e,t){var n=M.MULTILAYOUT_KEYFIELDS[e]||[];if(!n.length)return"default";var a=[];return jQuery.each(n,function(e,n){a.push(t[n])}),a.join("-")}function unescapeHtml(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText||t.text||t.textContent}function add_query_arg(e,t,n){return n+=(n.split("?")[1]?"&":"?")+e+"="+t}function removeParams(e){return e.indexOf("?")>-1?e.substr(0,e.indexOf("?")):e}function getParams(e){if(e.indexOf("?")>-1){var t=e.substr(e.indexOf("?")+1);return t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#"))),t}return""}function getParam(e,t){return splitUrlParams(t?getParams(t):window.location.search.substring(1))[e]}function splitUrlParams(e){return void 0!==urlParams[e]?urlParams[e]:(urlParams[e]=jQuery.extend({},splitParams(e)),urlParams[e])}function splitParams(e){for(var t,n={},a=function(e){return decodeURIComponent(e).replace(/\+/g," ")},r=decodeURI(e),i=/([^&=]+)=?([^&]*)/g;t=i.exec(r);)if("-1"==t[1].indexOf("["))n[a(t[1])]=a(t[2]);else{var o=t[1].indexOf("["),s=t[1].slice(o+1,t[1].indexOf("]",o)),c=a(t[1].slice(0,o));"object"!=typeof n[c]&&(n[a(c)]={}),s?n[a(c)][a(s)]=a(t[2]):Array.prototype.push.call(n[a(c)],a(t[2]))}return n}function searchInObject(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]==t)return!0;return!1}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function doScroll(e,t){t=t||!1;var n=e.offset().top-20;t?jQuery("html, body").animate({scrollTop:n}):window.scrollTo(0,n)}function removeMarker(e){return e.indexOf("#")>-1?e.substr(0,e.indexOf("#")):e}function counterNext(){return++counter}function windowResize(){var e=document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}function isUrlValid(e){return/^(https?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}function beep(){new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}function showTopNav(){popPageSectionManager.open(popPageSectionManager.getTopNav())}function hideTopNav(){popPageSectionManager.close(popPageSectionManager.getTopNav())}Handlebars.registerHelper("showmore",function(e,t){var n=t.hash.len||0;if(n>0&&e.length>n+100){var a=n,r='<a href="#" class="pop-showmore-more">'+M.STRING_MORE+"</a>",i='<a href="#" class="pop-showmore-less hidden">'+M.STRING_LESS+"</a>",o=!1,s=!0;if(e.length>a&&e.substr(n).indexOf("</p>")>-1&&(o=!0,s=!1,a=n+(e=e.substr(0,n)+'<span class="pop-showmore-more-full hidden">'+e.substr(n,e.substr(n).indexOf("</p>"))+"</span> "+r+e.substr(n+e.substr(n).indexOf("</p>"))).substr(n).indexOf("</p>")+"</p>".length),o||e.length>a){var c=e.substr(a),u=c.trim().length;if(o||u){var g='<span class="pop-showmore-more-teaser">'+e.substr(0,a)+"</span>"+(u?'<span class="pop-showmore-more-full hidden">'+c+"</span> ":" ")+(s?r:"")+i;return new Handlebars.SafeString(g)}}}return e}),Handlebars.registerHelper("ondate",function(e,t){return new Handlebars.SafeString(M.ONDATE.format(e))}),Handlebars.registerHelper("addParam",function(e,t,n,a){return jQuery.isArray(n)||(n=[n]),jQuery.each(n,function(n,a){e=add_query_arg(t,a,e)}),e}),Handlebars.registerHelper("destroyUrl",function(e,t){return new Handlebars.SafeString(popManager.getDestroyUrl(e))}),Handlebars.registerHelper("statusLabel",function(e,t){var n='<span class="label '+M.STATUS.class[e]+" label-"+e+'">'+M.STATUS.text[e]+"</span>";return new Handlebars.SafeString(n)}),Handlebars.registerHelper("labelize",function(e,t,n){var a="";if(e)for(var r=0;r<e.length;r++)a+='<span class="label '+t+" "+(M.LABELIZE_CLASSES[e[r]]?M.LABELIZE_CLASSES[e[r]]:"")+'">'+e[r]+"</span> ";return new Handlebars.SafeString(a)}),Handlebars.registerHelper("mod",function(e,t,n){if(arguments.length<3)throw new Error("Handlebars Helper equal needs 2 parameters");return offset=n.hash.offset||0,(e+offset)%t==0?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("compare",function(e,t,n){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var a=n.hash.operator||"==",r={eq:function(e,t){return e==t||e.toString()==t.toString()},"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},typeof:function(e,t){return typeof e==t},in:function(e,t){return t.indexOf(e)>=0},notin:function(e,t){return-1==t.indexOf(e)}};if(!r[a])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+a);return r[a](e,t)?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("get",function(e,t,n){return void 0===e||void 0===e[t]?"":e[t]}),Handlebars.registerHelper("ifget",function(e,t,n){if(void 0===e)return"";var a=!1;if(n.hash.method){var r=popJSLibraryManager.execute(n.hash.method,{input:e[t]});jQuery.each(r,function(e,t){if(t)return a=!0,-1})}else a=e[t];return a?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("withget",function(e,t,n){if(void 0===e||void 0===e[t])return"";var a=e[t];return"object"===jQuery.type(a)&&popManager.expandJSKeys(a),n.fn(a)}),Handlebars.registerHelper("interceptAttr",function(e){var t=(e.hash.context||this)[M.JS_INTERCEPT]||{};return new Handlebars.SafeString((t[M.JS_TYPE]?' data-intercept="'+t[M.JS_TYPE]+'"':"")+(t.settings?' data-intercept-settings="'+t[M.JS_SETTINGS]+'"':"")+(t[M.JS_TARGET]?' target="'+t[M.JS_TARGET]+'"':"")+(t[M.JS_SKIPSTATEUPDATE]?' data-intercept-skipstateupdate="true"':"")+' style="display: none;"')}),Handlebars.registerHelper("generateId",function(e){var t=e.hash.context||this,n=e.hash.pssId||t.pss.pssId,a=e.hash.targetId||t.bs.bsId,r=e.hash.template||t[M.JS_TEMPLATE],i=e.hash.fixed||t[M.JS_FIXEDID],o=e.hash.idUnique||t[M.JS_ISIDUNIQUE],s=e.hash.group,c=e.fn(this),u=t.ignorePSRuntimeId,g=e.hash.addURL?t.tls.feedback[M.URLPARAM_URL]:"";g&&popJSRuntimeManager.setBlockURL(g);var d=popJSRuntimeManager.addTemplateId(n,a,r,c,s,i,o,u),l=[];return l.push('id="'+d+'"'),l.push('data-templateid="'+r+'"'),g&&l.push('data-toplevel-url="'+g+'"'),new Handlebars.SafeString(l.join(" "))}),Handlebars.registerHelper("lastGeneratedId",function(e){var t=e.hash.context||this,n=e.hash.pssId||t.pss.pssId,a=e.hash.targetId||t.bs.bsId,r=e.hash.template||t[M.JS_TEMPLATE],i=e.hash.group;return popJSRuntimeManager.getLastGeneratedId(n,a,r,i)}),Handlebars.registerHelper("applyLightTemplate",function(e,t){var n=t.hash.context||this,a=popManager.getHtml(e,n);return new Handlebars.SafeString(a)}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),Handlebars.registerHelper("enterModule",function(e,t){var n=t.hash.context||this,a=t.hash.template||n[M.JS_TEMPLATE],r=e.tls,i=e.pss,o=e.bs,s=e.itemObject,c=e.itemObjectDBKey,u=e.ignorePSRuntimeId,g=void 0!==t.hash.itemDBKey?t.hash.itemDBKey:e.itemDBKey,d={itemObject:s,itemObjectDBKey:c,itemDBKey:g,items:void 0!==t.hash.items?t.hash.items:e.items,tls:r,pss:i,bs:o,ignorePSRuntimeId:u},l=i.pssId,p=(i.psId,o.bsId);o.bId;jQuery.extend(n,popManager.getRuntimeConfiguration(l,p,a)),popManager.expandJSKeys(n);var f=t.hash.itemObjectId;"array"===jQuery.type(f)&&(f.length?f=f[0]:(f=null,s=null,d.itemObject=s)),t.hash.itemDBKey&&f?(g=t.hash.itemDBKey,s=popManager.getItemObject(g,f),d.itemObject=s,d.itemObjectDBKey=g,d.itemDBKey=g,d.items=[f]):t.hash.itemDBKey&&t.hash.items?(d.itemDBKey=t.hash.itemDBKey,d.items=t.hash.items):t.hash.subcomponent&&f?(g=o["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],s=popManager.getItemObject(g,f),d.itemObject=s,d.itemObjectDBKey=g,d.itemDBKey=g,d.items=[f]):t.hash.subcomponent&&t.hash.items?(g=o["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],d.itemDBKey=g,d.items=t.hash.items):t.hash.items?d.items=t.hash.items:t.hash.itemDBKey&&(d.itemDBKey=t.hash.itemDBKey,d.itemObject=null,d.itemObjectDBKey=null,d.items=null),d.items&&"array"!==jQuery.type(d.items)&&(d.items=[d.items]),t.hash["feedback-msg"]&&(d["feedback-msg"]=t.hash["feedback-msg"]);var S=[],A=[],h=[];n[M.JS_MODULEOPTIONS]&&(S=n[M.JS_MODULEOPTIONS][M.JS_OVERRIDEFROMITEMOBJECT]||[],A=n[M.JS_MODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),n[M.JS_RUNTIMEMODULEOPTIONS]&&(h=n[M.JS_RUNTIMEMODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),S.length&&popManager.overrideFromItemObject(s,d,S);var m=A.concat(h);m.length&&popManager.replaceFromItemObject(l,p,a,s,d,m);var T=t.hash.parentContext||{};if(T){d["parent-context"]=T;for(var v=T;v["parent-context"];)v=v["parent-context"];d["root-context"]=v}jQuery.extend(n,d);var b=popManager.getHtml(a,n);return t.hash.unsafe?b:new Handlebars.SafeString(b)}),Handlebars.registerHelper("withLayout",function(e,t,n,a,r){var i=n[getMultiLayoutKey(e,popManager.getItemObject(e,t))];if(i||(i=n.default),!i)return"";var o=a[M.JS_MODULES][i];return jQuery.extend(o,{itemDBKey:e,itemObjectId:t}),popManager.expandJSKeys(o),r.fn(o)}),Handlebars.registerHelper("layoutLabel",function(e,t,n){var a=getMultiLayoutKey(e,t);return M.MULTILAYOUT_LABELS[a]||""}),Handlebars.registerHelper("withBlock",function(e,t,n){if(void 0!==e&&void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][t])return e=e[M.JS_MODULES][t],popManager.expandJSKeys(e),n.fn(e)}),Handlebars.registerHelper("withModule",function(e,t,n){if(void 0!==e&&void 0!==e[M.JS_SETTINGSIDS]&&void 0!==e[M.JS_SETTINGSIDS][t]){var a=e[M.JS_SETTINGSIDS][t];if(void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][a])return e=e[M.JS_MODULES][a],popManager.expandJSKeys(e),jQuery.extend(e,n.hash),n.fn(e)}}),Handlebars.registerHelper("withSublevel",function(e,t){var n=t.hash.context||this;return"object"===jQuery.type(n)&&popManager.expandJSKeys(n),t.fn(n[e])}),Handlebars.registerHelper("withItemObject",function(e,t,n){var a=popManager.getItemObject(e,t);return n.fn(a)}),Handlebars.registerHelper("join",function(e,t){var n=t.hash.delimiter||",",a=a=t.hash.start||0,r=e?e.length:0,o=t.hash.end||r,s="";if(o>r&&(o=r),"function"==typeof t){for(i=a;i<o;i++)i>a&&(s+=n),"string"==typeof e[i]?s+=e[i]:s+=t(e[i]);return s}return[].concat(e).slice(a,o).join(n)});var removeQueryFields=function(e,t){if(!t.length)return e;var n=t.join("|"),a=e.split(new RegExp("[&?]("+n+")=[^&]*")),r=a.length-1;return a[0]+(r?a[r].slice(1):"")},urlParams={},counter=0;String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0==this.indexOf(e)}),Array.prototype.some||(Array.prototype.some=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],a=0;a<t;a++)if(a in this&&e.call(n,this[a],a,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var n=new Array,a=arguments[1],r=0;r<t;r++)if(r in this){var i=this[r];e.call(a,i,r,this)&&n.push(i)}return n}),Date.now||(Date.now=function(){return(new Date).getTime()}),function(e){popJSLibraryManager={libraries:[],methods:{},register:function(t,n,a,r){var i=this;i.libraries.push(t),e.each(n,function(e,n){i.methods[n]&&!r||(i.methods[n]=[]),a?i.methods[n].unshift(t):i.methods[n].push(t)})},getLibraries:function(e){return this.methods[e]||[]},execute:function(t,n){var a={},r=this.methods[t];return r&&e.each(r,function(e,r){a["l"+e]=r[t](n)}),a}}}(jQuery),function(e){popJSRuntimeManager={"full-session-ids":{},"last-session-ids":{},blockURL:null,pageSectionURL:"general",setBlockURL:function(e){this.blockURL=e},initBlockVarPaths:function(e,t,n,a,r,i){i=i||M.JSMETHOD_GROUP_MAIN,e[t]||(e[t]={}),e[t][n]||(e[t][n]={}),e[t][n][a]||(e[t][n][a]={}),e[t][n][a][r]||(e[t][n][a][r]={}),e[t][n][a][r][i]||(e[t][n][a][r][i]=[])},initVars:function(e,t,n,a,r){var i=this;i.initBlockVarPaths(i["full-session-ids"],e,t,n,a,r),i.initBlockVarPaths(i["last-session-ids"],e,t,n,a,r)},addGroup:function(e,t){return t&&(e+=M.ID_SEPARATOR+t),e},addPageSectionId:function(e,t,n,a){return this.addTemplateId(e,e,t,n,a,!0,!0)},addTemplateId:function(e,t,n,a,r,i,o,s){var c=this;return o||(a+=popManager.getUniqueId()),i||(a+=M.ID_SEPARATOR+counterNext()),a=c.addGroup(a,r),s||c.addTargetId(c.pageSectionURL,e,e,n,r,a),e!=t&&c.addTargetId(c.blockURL,e,t,n,r,a),a},addTargetId:function(e,t,n,a,r,i){var o=this;return r=r||M.JSMETHOD_GROUP_MAIN,o.initVars(e,t,n,a,r),o["full-session-ids"][e][t][n][a][r].push(i),o["last-session-ids"][e][t][n][a][r].push(i),i},getLastGeneratedId:function(e,t,n,a){var r=this;a=a||M.JSMETHOD_GROUP_MAIN;var i=e==t?r.pageSectionURL:r.blockURL,o=r["full-session-ids"][i][e][t][n][a];return o[o.length-1]},getPageSectionSessionIds:function(e,t){var n=this,a=n.pageSectionURL;return n.getTargetSessionIds(a,e,e,t)},getBlockSessionIds:function(e,t,n){var a=this,r=a.getBlockURL(e,t);return a.getTargetSessionIds(r,e,t,n)},getTargetSessionIds:function(e,t,n,a){var r=this,i=popManager.getSettingsId(t),o=popManager.getSettingsId(n);return a=a||"last",r[a+"-session-ids"][e]&&r[a+"-session-ids"][e][i]?r[a+"-session-ids"][e][i][o]:null},deletePageSectionLastSessionIds:function(t){var n=this,a=popManager.getSettingsId(t),r=n.pageSectionURL;delete n["last-session-ids"][r][a][a],e.isEmptyObject(n["last-session-ids"][r][a])&&(delete n["last-session-ids"][r][a],e.isEmptyObject(n["last-session-ids"][r])&&delete n["last-session-ids"][r])},deleteBlockLastSessionIds:function(t,n){var a=this,r=popManager.getSettingsId(t),i=popManager.getSettingsId(n),o=a.getBlockURL(t,n);a["last-session-ids"][o]&&a["last-session-ids"][o][r]&&a["last-session-ids"][o][r][i]&&(delete a["last-session-ids"][o][r][i],e.isEmptyObject(a["last-session-ids"][o][r])&&(delete a["last-session-ids"][o][r],e.isEmptyObject(a["last-session-ids"][o])&&delete a["last-session-ids"][o]))},getBlockURL:function(e,t){return t.data("toplevel-url")}}}(jQuery),function(e){popPageSectionManager={offcanvasToggle:function(t){var n=this;t.pageSection;t.targets.click(function(t){t.preventDefault();var a=e(this),r=a.data("mode"),i=e(a.data("target")),o=a.data("toggle");"offcanvas-open"==o?n.open(i,r):"offcanvas-close"==o?n.close(i,r):"offcanvas-toggle"==o&&n.toggle(i,r)})},isHidden:function(e){var t=this,n=e.targets.closest(".offcanvas");return t.execIsHidden(n)},execIsHidden:function(e){var t=this;if(e.length){var n=t.getOffcanvasActiveClass(e);return!t.getGroup(e).hasClass(n)}return!1},getOffcanvasActiveClass:function(e,t){var n="active-"+e.data("offcanvas");return"xs"==t&&(n+="-xs"),n},open:function(e,t){var n=this,a=n.getGroup(e),r=n.getOffcanvasActiveClass(e,t);a.addClass(r),n.triggerStatus(e,t,"opened")},close:function(e,t){var n=this,a=n.getGroup(e),r=n.getOffcanvasActiveClass(e,t);a.removeClass(r),n.triggerStatus(e,t,"closed")},toggle:function(e,t){var n=this,a=n.getGroup(e),r=n.getOffcanvasActiveClass(e,t);a.hasClass(r)?n.close(e,t):n.open(e,t)},triggerStatus:function(e,t,n){this.getGroup(e).triggerHandler("on.bs.pagesection-group:pagesection-"+e.attr("id")+":"+n,[e,t])},getTopLevelSettingsId:function(){return M.TEMPLATE_TOPLEVEL_SETTINGS_ID},getPageSectionStatus:function(t){return e("#"+t.attr("id")+"-status")},getGroup:function(t){return t?t.closest(".pop-pagesection-group"):e("#"+M.TEMPLATE_PAGESECTIONGROUP_ID)},theater:function(e){var t=this,n=t.getGroup();t.transitionEndResize(),e?(n.addClass("theater"),n.triggerHandler("on.bs.pagesection:theater")):(n.removeClass("theater"),n.triggerHandler("off.bs.pagesection:theater"))},isTheater:function(){return this.getGroup().hasClass("theater")},transitionEndResize:function(){this.getGroup().one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){windowResize()})},enableShowHideTopNav:function(){e(window).on("scroll:down",hideTopNav),e(window).on("scroll:up",showTopNav)},disableShowHideTopNav:function(){e(window).off("scroll:down",hideTopNav),e(window).off("scroll:up",showTopNav)},getTopNav:function(){return this.getGroup().find(".offcanvas-topnav")},getOpenMode:function(e){return e.data("pagesection-openmode")||"automatic"}}}(jQuery),popJSLibraryManager.register(popPageSectionManager,["isHidden","offcanvasToggle"],!0),function(e){popBrowserHistory={loaded:!1,documentInitialized:function(t){var n=this;e(window).on("popstate",function(e){if(n.loaded){var t=n.removePushURLAtts(window.location.href),a={skipPushState:!0};popURLInterceptors.getInterceptors(t).length?popURLInterceptors.intercept(t,a):popManager.fetch(t,a)}else n.loaded=!0})},addPushURLAtts:function(t){var n=popManager.getTopLevelFeedback();return e.each(n[M.DATALOAD_PUSHURLATTS],function(e,n){t=add_query_arg(e,n,t)}),t},removePushURLAtts:function(t){var n=popManager.getTopLevelFeedback(),a=[];return e.each(n[M.DATALOAD_PUSHURLATTS],function(e,t){a.push(e)}),removeQueryFields(t,a)},pushState:function(e){var t=this;(e=t.addPushURLAtts(e)).startsWith(M.HOME_URL)||(e=add_query_arg(M.URLPARAM_URL,encodeURIComponent(e),M.EXTERNAL_URL)),history.pushState({url:e},"",e),t.loaded=!0},replaceState:function(e){var t=this;window.location.url!=e&&(e=t.addPushURLAtts(e),history.replaceState({url:e},"",e),t.loaded=!0)}}}(jQuery),popJSLibraryManager.register(popBrowserHistory,["documentInitialized"],!0),function(e){popURLInterceptors={fullurl:{},partialurl:{},pageSectionNewDOMsInitialized:function(t){var n=this,a=t.pageSection,r=t.newDOMs;r.find('[data-intercept="fullurl"]').addBack('[data-intercept="fullurl"]').each(function(){var t=e(this),r=t.attr("id"),i=n.getUrl(t),o=(n.getSettings(t),n.getTarget(a,t));n.fullurl[o]||(n.fullurl[o]={}),n.fullurl[o][i]||(n.fullurl[o][i]=[]),n.fullurl[o][i].push(r)}),r.find('[data-intercept="partialurl"]').addBack('[data-intercept="partialurl"]').each(function(){var t=e(this),r=t.attr("id"),i=n.getUrl(t),o=(n.getSettings(t),n.getTarget(a,t));n.partialurl[o]||(n.partialurl[o]={}),n.partialurl[o][r]=i})},destroyTarget:function(t){var n=this,a=t.pageSection,r=t.destroyTarget;r.find('[data-intercept="fullurl"]').each(function(){var t=e(this),r=t.attr("id"),i=n.getUrl(t),o=(n.getSettings(t),n.getTarget(a,t)),s=n.fullurl[o][i];s&&((s=s.filter(function(e,t){return r!=e})).length?n.fullurl[o][i]=s:delete n.fullurl[o][i])}),r.find('[data-intercept="partialurl"]').each(function(){var t=e(this),r=t.attr("id"),i=n.getTarget(a,t);delete n.partialurl[i][r]})},getSettings:function(e){var t=e.data("intercept-settings")||"";return t=t.split(M.SEPARATOR)},getTarget:function(e,t){return t.attr("target")||popManager.getFrameTarget(e)},getUrl:function(e){return e.data("intercept-url")},getFullUrlInterceptors:function(t,n){var a=this,r=[],i=(n=n||{}).target||M.URLPARAM_TARGET_MAIN,o=a.fullurl;if(o[i])if(o[i][t])r.push(e("#"+o[i][t].join(", #")));else{var s=removeParams(t);if(t!=s&&o[i][s]){var c=e("#"+o[i][s].join(", #")).filter(".pop-interceptor");c.length&&r.push(c)}}return r},getPartialUrlInterceptor:function(t,n){var a=this,r=null,i=(n=n||{}).target||M.URLPARAM_TARGET_MAIN,o=a.partialurl;if(i){var s=o[i];s&&e.each(s,function(n,a){if(t.startsWith(a))return r=e("#"+n),!1})}return r},getURLInterceptors:function(e,t){var n=this,a=n.getFullUrlInterceptors(e,t),r=n.getPartialUrlInterceptor(e,t);return r&&a.push(r),a},getInterceptors:function(e,t){var n=this,a=n.getURLInterceptors(e,t);if(a.length)return a;var r=removeMarker(e);return r!=e&&(a=n.getURLInterceptors(r,t)),a},intercept:function(t,n){var a=this;n=n||{};var r=a.getInterceptors(t,n);if(r.length){n.event&&n.event.stopImmediatePropagation(),e.each(r,function(e,a){if(!(a.data("intercept-skipstateupdate")||n.skipstateupdate))return n.skipPushState||popBrowserHistory.pushState(t),popManager.updateTitle(a.data("title")),-1});var i=n["interceptor-atts"]||{};return e.each(r,function(r,o){e.each(i,function(e,t){o.data(e,t)});var s=n.relatedTarget;o.data("interceptedTarget",s);a.getSettings(o.parent());o.data("original-url",t),o.data("post-data",getParams(t)),o.trigger("click")}),!0}return!1}}}(jQuery),popJSLibraryManager.register(popURLInterceptors,["destroyTarget","pageSectionNewDOMsInitialized"],!0),function(e){popManager={mergingTemplatePromise:!1,memory:{settings:{},runtimesettings:{},dataset:{},feedback:{block:{},pagesection:{},toplevel:{}},params:{}},initialBlockMemory:{},urlPointers:{},replicableMemory:{},runtimeMemory:{general:{},url:{}},database:{},userdatabase:{},firstLoad:{},documentTitle:null,getMemory:function(){return this.memory},getInitialBlockMemory:function(e){var t=this;if(e==M.INITIAL_URL)return t.initialBlockMemory[e];var n=t.urlPointers[e];return n?t.initialBlockMemory[n.url]:t.initialBlockMemory[e]||{}},addInitialBlockMemory:function(t){var n=this,a=t.feedback.toplevel[M.URLPARAM_URL];n.initialBlockMemory[a]||(n.initialBlockMemory[a]={dataset:{},feedback:{block:{}},params:{},runtimesettings:{configuration:{}}});var r=n.initialBlockMemory[a];e.each(t.settings.configuration,function(n,a){r.params[n]||(r.params[n]={},r.runtimesettings.configuration[n]={},r.dataset[n]={},r.feedback.block[n]={}),e.extend(r.params[n],t.params[n]),e.extend(r.runtimesettings.configuration[n],t.runtimesettings.configuration[n]),e.extend(r.dataset[n],t.dataset[n]),e.extend(r.feedback.block[n],t.feedback.block[n])})},getReplicableMemory:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN;var a=n.urlPointers[e];return n.replicableMemory[a.url][a.target]},saveUrlPointers:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var r=t.feedback.toplevel[M.URLPARAM_URL];e.each(t.feedback.pagesection,function(t,i){i["intercept-urls"]&&e.each(i["intercept-urls"],function(t,i){e.each(i,function(e,t){a.urlPointers[t]={url:r,target:n}})})}),e.each(t.feedback.block,function(t,i){e.each(i,function(t,i){i["intercept-urls"]&&e.each(i["intercept-urls"],function(t,i){e.each(i,function(e,t){a.urlPointers[t]={url:r,target:n}})})})})},addReplicableMemory:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var r=!1;if(e.each(t.settings.configuration,function(e,t){if(t[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE].length)return r=!0,-1}),r){var i=t.feedback.toplevel[M.URLPARAM_URL];a.replicableMemory[i]||(a.replicableMemory[i]={}),a.replicableMemory[i][n]={dataset:e.extend(!0,{},t.dataset),feedback:e.extend(!0,{},t.feedback),params:e.extend(!0,{},t.params)}}},getRuntimeMemory:function(e,t,n){var a=this;if(n=n||{},a.getPageSectionPage(t).data("paramsscope")==M.SETTINGS_PARAMSSCOPE_URL){var r=n.url||a.getTopLevelFeedback()[M.URLPARAM_URL];return a.runtimeMemory.url[r]||(a.runtimeMemory.url[r]={}),t.data("paramsscope-url",r),a.runtimeMemory.url[r]}return a.runtimeMemory.general},newRuntimeMemoryPage:function(e,t,n){var a=this;if(!(n=n||{}).url){var r=a.getTopLevelFeedback();n.url=r[M.URLPARAM_URL]}var i=a.getRuntimeMemory(e,t,n),o=a.getSettingsId(e),s=a.getSettingsId(t);return i[o]||(i[o]={}),i[o][s]={params:{},id:null},i[o][s]},deleteRuntimeMemoryPage:function(t,n,a){var r=this,i=r.getRuntimeMemory(t,n,a),o=r.getSettingsId(t),s=r.getSettingsId(n);i[o]&&(delete i[o][s],e.isEmptyObject(i[o])&&delete i[o])},getRuntimeMemoryPage:function(t,n,a){var r,i,o=this;(a=a||{}).url?i=a.url:"object"==e.type(n)&&(i=n.data("paramsscope-url")),r=i?o.runtimeMemory.url[i]:o.runtimeMemory.general;var s=o.getSettingsId(t),c=o.getSettingsId(n);if(!r[s]||!r[s][c]){var u="Mempage not available";throw i&&(u+=" for url "+i),new Error(u)}return r[s][c]},isFirstLoad:function(e){return this.firstLoad[popManager.getSettingsId(e)]},init:function(){var t=this;if(e("#"+popPageSectionManager.getTopLevelSettingsId()).length){t.initDocument(),t.initTopLevelJson(),t.initLocalStorage(),popUserAccount.initialLogin();var n=t.getMemory(),a=[];e.each(n.settings.configuration,function(n,r){var i=r[M.JS_FRONTENDID],o=e("#"+i);o.attr("data-settings-id",n),o.addClass("pop-pagesection"),t.initPageSectionSettings(o,r),t.addPageSectionIds(o,r[M.JS_TEMPLATE]),t.initPageSection(o),a.push(o)});var r={"serverside-rendering":M.USESERVERSIDERENDERING};e.each(a,function(e,n){t.renderPageSection(n,r)}),e(document.body).removeClass("pop-loadingframe"),e.each(a,function(e,n){t.pageSectionInitialized(n)}),e(document.body).removeClass("pop-loadingjs");var i=t.getTopLevelFeedback(),o=i[M.URLPARAM_URL];i[M.URLPARAM_SILENTDOCUMENT]||(popBrowserHistory.replaceState(o),t.updateDocument()),t.documentInitialized(),t.backgroundLoad(M.BACKGROUND_LOAD),t.backgroundLoad(i[M.URLPARAM_BACKGROUNDLOADURLS])}},expandJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&(e[M.JS_MODULES]&&(e.modules=e[M.JS_MODULES]),e.bs&&e.bs["db-keys"]&&e.bs["db-keys"][M.JS_SUBCOMPONENTS]&&(e.bs["db-keys"].subcomponents=e.bs["db-keys"][M.JS_SUBCOMPONENTS]),e[M.JS_TEMPLATE]&&(e.template=e[M.JS_TEMPLATE]),e[M.JS_TEMPLATEIDS]&&(e["template-ids"]=e[M.JS_TEMPLATEIDS]),e[M.JS_SETTINGSID]&&(e["settings-id"]=e[M.JS_SETTINGSID]),e[M.JS_SETTINGSIDS]&&(e["settings-ids"]=e[M.JS_SETTINGSIDS],e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS]&&(e["settings-ids"].blockunits=e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS])),e[M.JS_INTERCEPT]&&(e.intercept=e[M.JS_INTERCEPT]),e[M.JS_BLOCKSETTINGSIDS]&&(e["block-settings-ids"]=e[M.JS_BLOCKSETTINGSIDS],e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]&&(e["block-settings-ids"].blockunits=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]&&(e["block-settings-ids"]["blockunits-replicable"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME]&&(e["block-settings-ids"]["blockunits-frame"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME])),e[M.JS_REPLICATEBLOCKSETTINGSIDS]&&(e["replicate-blocksettingsids"]=e[M.JS_REPLICATEBLOCKSETTINGSIDS],e[M.JS_INTERCEPTSKIPSTATEUPDATE]&&(e["intercept-skipstateupdate"]=e[M.JS_INTERCEPTSKIPSTATEUPDATE]),e[M.JS_UNIQUEURLS]&&(e["unique-urls"]=e[M.JS_UNIQUEURLS]),e[M.JS_REPLICATETYPES]&&(e["replicate-types"]=e[M.JS_REPLICATETYPES])),e[M.JS_PARAMS]&&(e.params=e[M.JS_PARAMS]),e[M.JS_ITEMOBJECTPARAMS]&&(e["itemobject-params"]=e[M.JS_ITEMOBJECTPARAMS]),e[M.JS_PREVIOUSTEMPLATESIDS]&&(e["previoustemplates-ids"]=e[M.JS_PREVIOUSTEMPLATESIDS]),e[M.JS_BLOCKFEEDBACKPARAMS]&&(e["blockfeedback-params"]=e[M.JS_BLOCKFEEDBACKPARAMS]),e[M.JS_APPENDABLE]&&(e.appendable=e[M.JS_APPENDABLE]),e[M.JS_CLASS]&&(e.class=e[M.JS_CLASS]),e[M.JS_CLASSES]&&(e.classes=e[M.JS_CLASSES],e[M.JS_CLASSES][M.JS_APPENDABLE]&&(e.classes.appendable=e[M.JS_CLASSES][M.JS_APPENDABLE])),e[M.JS_STYLE]&&(e.style=e[M.JS_STYLE]),e[M.JS_STYLES]&&(e.styles=e[M.JS_STYLES]),e[M.JS_TITLES]&&(e.titles=e[M.JS_TITLES]),popJSLibraryManager.execute("expandJSKeys",{context:e}))},addPageSectionIds:function(e,t){var n=this.getSettingsId(e),a=e.attr("id");popJSRuntimeManager.addPageSectionId(n,t,a);var r={pageSection:e,template:t};popJSLibraryManager.execute("addPageSectionIds",r)},initDocument:function(){var t=this;e(document).on("user:loggedout",function(e,n){t.clearUserDatabase()}),popJSLibraryManager.execute("initDocument"),e(document).triggerHandler("initialize.pop.document")},documentInitialized:function(){popJSLibraryManager.execute("documentInitialized"),e(document).triggerHandler("initialized.pop.document")},pageSectionFetchSuccess:function(e,t){popJSLibraryManager.execute("pageSectionFetchSuccess",{pageSection:e,response:t}),e.triggerHandler("fetched.pop.pageSection")},blockFetchSuccess:function(e,t,n){popJSLibraryManager.execute("blockFetchSuccess",{pageSection:e,block:t,response:n}),t.triggerHandler("fetched.pop.block")},backgroundLoad:function(t){var n=this,a={"loadingmsg-target":null,silentDocument:!0};e.each(t,function(t,r){e.each(r,function(r,i){n.fetch(t,e.extend({target:i},a))})})},initPageSection:function(t){var n=this;n.firstLoad[n.getSettingsId(t)]=!0,popJSLibraryManager.execute("initPageSection",{pageSection:t}),t.triggerHandler("initialize"),e(document).triggerHandler("initialize.pop.pagesection",[t])},pageSectionInitialized:function(e){var t=this;t.initPageSectionRuntimeMemory(e),popJSLibraryManager.execute("pageSectionInitialized",{pageSection:e}),e.triggerHandler("initialized"),e.triggerHandler("completed"),t.firstLoad[popManager.getSettingsId(e)]=!1},pageSectionNewDOMsInitialized:function(t,n,a){var r=this,i=n.filter(".pop-pagesection-page");if(i.length){a["fetch-params"]&&e.each(a["fetch-params"],function(e,t){i.data(e,t)});var o=popPageSectionManager.getOpenMode(t),s=r.isFirstLoad(t);("automatic"==o||s&&"initial"==o)&&popPageSectionManager.open(t)}var c={pageSection:t,newDOMs:n};r.extendArgs(c,a),popJSLibraryManager.execute("pageSectionNewDOMsBeforeInitialize",c),r.initPageSectionBranches(t,n,a),popJSLibraryManager.execute("pageSectionNewDOMsInitialized",c)},initPageSectionBranches:function(t,n,a){var r=this;r.runPageSectionJSMethods(t,a);var i=popManager.getPageSectionJsSettings(t)["initjs-blockbranches"];if(i){var o=e(i.join(",")).not("."+M.JS_INITIALIZED);r.initBlockBranches(t,o,a)}popJSRuntimeManager.deletePageSectionLastSessionIds(t)},triggerDestroyTarget:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN,n.removeOpenTab(e,t),popURLInterceptors.intercept(n.getDestroyUrl(e),{target:t})},destroyTarget:function(t,n){var a=this,r={pageSection:t,destroyTarget:n};popJSLibraryManager.execute("destroyTarget",r),n.triggerHandler("destroy"),n.find(".pop-block."+M.JS_INITIALIZED).addBack(".pop-block."+M.JS_INITIALIZED).each(function(){var n=e(this);a.deleteRuntimeMemoryPage(t,n,{url:n.data("paramsscope-url")})}),n.remove()},destroyPageSectionPage:function(e,t){var n=this,a=t||e;t.siblings(".pop-pagesection-page").length||(popPageSectionManager.close(e),popPageSectionManager.close(e,"xs")),n.destroyTarget(e,a)},pageSectionRendered:function(e,t,n){var a=this;a.pageSectionNewDOMsInitialized(e,t,n);var r={pageSection:e,newDOMs:t};a.extendArgs(r,n),popJSLibraryManager.execute("pageSectionRendered",r),e.triggerHandler("pageSectionRendered")},runScriptsBefore:function(e,t){var n={pageSection:e,newDOMs:t};popJSLibraryManager.execute("runScriptsBefore",n)},jsInitialized:function(e){return e.hasClass(M.JS_INITIALIZED)},jsLazy:function(e){return e.hasClass(M.CLASS_LAZYJS)},setJsInitialized:function(e){e.addClass(M.JS_INITIALIZED).removeClass(M.CLASS_LAZYJS)},initBlockBranches:function(t,n,a){var r=this;n.length&&n.each(function(){var n=e(this),i=!r.jsInitialized(n);if(a["force-init"]||(i=i&&!r.jsLazy(n)),i){r.setJsInitialized(n),r.initBlock(t,n,a);var o=popManager.getJsSettings(t,n),s=o["initjs-blockbranches"];s&&r.initBlockBranches(t,e(s.join(", ")).not("."+M.JS_INITIALIZED),a);var c=o["initjs-blockchildren"];if(c){var u=n;e.each(c,function(t,n){e.each(n,function(e,t){u=u.children(t).not("."+M.JS_INITIALIZED)})}),r.initBlockBranches(t,u,a)}}})},initBlock:function(t,n,a){var r=this;a=a||{},r.initBlockRuntimeMemory(t,n,e.extend({},a)),r.initializeBlock(t,n,a),r.runScriptsBefore(t,n),r.runBlockJSMethods(t,n,a),n.on("rendered",function(n,i){var o=e(this);popJSRuntimeManager.setBlockURL(o.data("toplevel-url")),r.runScriptsBefore(t,i),r.runBlockJSMethods(t,o,null,a)}),r.blockInitialized(t,n,a),r.loadBlockContent(t,n)},initializeBlock:function(e,t,n){var a={pageSection:e,block:t};this.extendArgs(a,n),popJSLibraryManager.execute("initBlock",a),t.triggerHandler("initialize")},extendArgs:function(t,n){(n=n||{})["js-args"]&&e.extend(t,n["js-args"])},blockInitialized:function(e,t,n){var a={pageSection:e,block:t};this.extendArgs(a,n),popJSLibraryManager.execute("blockInitialized",a),t.triggerHandler("js:initialized")},loadBlockContent:function(t,n){var a=this;if(!a.isContentLoaded(t,n)){a.setContentLoaded(t,n);var r={action:M.CBACTION_LOADCONTENT,"post-data":n.data("post-data")};a.getJsSettings(t,n)["loadcontent-showdisabledlayer"]&&(r["show-disabled-layer"]=!0),e(document).ready(function(e){a.fetchBlock(t,n,r)})}},runPageSectionJSMethods:function(t,n){var a=this,r=popJSRuntimeManager.getPageSectionSessionIds(t);if(r){var i=[],o=popManager.getPageSectionJsMethods(t);e.each(o,function(o,s){-1==i.indexOf(o)&&(i.push(o),r[o]&&s&&e.each(s,function(i,s){var c=r[o][i];if(c){var u="#"+c.join(", #"),g=e(u);g.length&&e.each(s,function(e,r){var i={pageSection:t,targets:g};a.extendArgs(i,n),popJSLibraryManager.execute(r,i)})}}))})}},runBlockJSMethods:function(e,t,n){this.runJSMethods(e,t,null,null,n),popJSRuntimeManager.deleteBlockLastSessionIds(e,t)},runJSMethods:function(e,t,n,a,r){var i=this,o=popJSRuntimeManager.getBlockSessionIds(e,t,a);if(o){var s=i.getTemplateJSMethods(e,t,n);i.runJSMethodsInner(e,t,s,o,[],r)}},runJSMethodsInner:function(t,n,a,r,i,o){var s=this;o=o||{};var c=a[M.JS_TEMPLATE],u=a[M.JS_METHODS];-1==i.indexOf(c)&&(i.push(c),r[c]&&u&&e.each(u,function(a,i){var u=r[c][a];if(u){var g="#"+u.join(", #"),d=e(g);d.length&&e.each(i,function(e,a){var r={pageSection:t,block:n,targets:d};s.extendArgs(r,o),popJSLibraryManager.execute(a,r)})}})),a[M.JS_NEXT]&&e.each(a[M.JS_NEXT],function(e,a){s.runJSMethodsInner(t,n,a,r,i,o)})},getTemplateJSMethods:function(e,t,n){var a=this,r=popManager.getBlockJsMethods(e,t);return n?a.getTemplateJSMethodsInner(e,t,n,r):r},getTemplateJSMethodsInner:function(t,n,a,r){var i=this;if(r[M.JS_TEMPLATE]==a)return r;var o;return r[M.JS_NEXT]&&e.each(r[M.JS_NEXT],function(e,r){if(o=i.getTemplateJSMethodsInner(t,n,a,r))return!1}),o},maybeRedirect:function(e){var t=this;if(e.redirect&&e.redirect.url){if(!e.redirect.fetch)return window.location=e.redirect.url,!0;t.click(e.redirect.url)}return!1},historyReplaceState:function(e,t){var n=this,a=e.data("historystate-url"),r=e.data("historystate-title");e.data("historystate-thumb");popBrowserHistory.replaceState(a),r&&(n.documentTitle=unescapeHtml(r),document.title=n.documentTitle)},hideIfEmpty:function(e,t){return popManager.getBlockFeedback(e,t)[M.URLPARAM_HIDEBLOCK]},isHidden:function(t){if(t.hasClass("hidden"))return!0;var n=t.attr("id");if(n&&!e("#"+n).length)return!0;var a=t.parents(".tab-pane"),r=a.filter(".active");if(a.length>r.length)return!0;var i=popJSLibraryManager.execute("isHidden",{targets:t}),o=!1;return e.each(i,function(e,t){if(t)return o=!0,-1}),o},isActive:function(t){var n=popJSLibraryManager.execute("isActive",{targets:t}),a=!0;return e.each(n,function(e,t){if(!t)return a=!1,-1}),a},isContentLoaded:function(e,t){return this.getBlockParams(e,t)[M.DATALOAD_CONTENTLOADED]||!1},setContentLoaded:function(e,t){this.getBlockParams(e,t)[M.DATALOAD_CONTENTLOADED]=!0},updateDocument:function(){var e=this;e.updateTitle(e.getTopLevelFeedback()[M.URLPARAM_TITLE])},updateTitle:function(e){var t=this;e&&(t.documentTitle=unescapeHtml(e),document.title=t.documentTitle)},executeSetFilterBlockParams:function(t,n,a){var r=this.getBlockParams(t,n);r.filter=a.find("."+M.FILTER_INPUT).filter(function(){return e.trim(this.value)}).serialize(),r.filter&&(r.filter+="&"+a.find("."+M.FILTER_NAME_INPUT).serialize())},setFilterBlockParams:function(e,t,n){var a=this;a.jsInitialized(t)?a.executeSetFilterBlockParams(e,t,n):t.one("js:initialized",function(){a.executeSetFilterBlockParams(e,t,n)})},filter:function(e,t,n){var a=this;a.setFilterBlockParams(e,t,n),a.reload(e,t),a.blockScrollTop(e,t)},blockScrollTop:function(e,t){var n=this,a=t.closest(".modal");0==a.length?n.scrollToElem(e,t.children(".blocksection-status").first(),!0):a.animate({scrollTop:0},"fast")},setReloadBlockParams:function(e,t){var n=this.getBlockParams(e,t);n[M.DATALOAD_PARAMS]&&n[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]&&(n[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]=""),n[M.URLPARAM_STOPFETCHING]&&(n[M.URLPARAM_STOPFETCHING]=!1)},refetch:function(e,t,n){(n=n||{}).action=M.CBACTION_REFETCH,t.triggerHandler("beforeRefetch"),popManager.reload(e,t,n)},reset:function(e,t,n){var a=this;(n=n||{})["skip-restore"]||a.restoreInitialBlockMemory(e,t),a.processBlock(e,t,{operation:M.URLPARAM_OPERATION_REPLACE,action:M.CBACTION_RESET,reset:!0})},reload:function(e,t,n){var a=this;(n=n||{}).operation=M.URLPARAM_OPERATION_REPLACE,n.reload=!0,n["hide-latestcount"]=!0,a.setReloadBlockParams(e,t),t.triggerHandler("beforeReload"),a.fetchBlock(e,t,n)},loadLatest:function(t,n,a){var r=this;a=a||{};var i=r.getBlockParams(t,n);a.operation=M.URLPARAM_OPERATION_PREPEND,a["skip-stopfetching-check"]=!0,a["hide-latestcount"]=!0;var o={};o[M.URLPARAM_ACTION]=M.URLPARAM_ACTION_LATEST,o[M.URLPARAM_TIMESTAMP]=i[M.URLPARAM_TIMESTAMP],a["onetime-post-data"]=e.param(o),n.triggerHandler("beforeLoadLatest"),r.fetchBlock(t,n,a)},handleLoadingStatus:function(t,n,a){var r;if(void 0!==(a=a||{})["loadingmsg-target"]){if(!a["loadingmsg-target"])return;r=e(a["loadingmsg-target"])}else{var i=popPageSectionManager.getPageSectionStatus(t);r=i.find(".pop-loading"),i.find(".pop-error").addClass("hidden")}var o=r.data("num")||0;"add"==n?o+=1:"remove"==n&&(o-=1),r.data("num",o),o?r.removeClass("hidden"):r.addClass("hidden"),o>=2?r.find(".pop-box").text("x"+o):r.find(".pop-box").text("")},fetch:function(e,t){var n=this;t=t||{};var a=n.getFetchTargetPageSection(t.target);n.getPageSectionParams(a)?n.fetchPageSection(a,e,t):t["noparams-reload-url"]&&(window.location=e)},initLocalStorage:function(){if(M.USELOCALSTORAGE&&Modernizr.localstorage){var e=localStorage["PoP:version"];e&&e==M.VERSION||(Object.keys(localStorage).forEach(function(e){e.startsWith(M.HOME_URL)&&localStorage.removeItem(e)}),localStorage["PoP:version"]=M.VERSION)}},openTabs:function(){var t=this;if(M.KEEP_OPEN_TABS){var n={silentDocument:!0,"js-args":{inactivePane:!0,addOpenTab:!1}},a=t.getTabsCurrentURL(),r=t.getScreenOpenTabs();e.each(r,function(r,i){if(n.target=r,r==M.URLPARAM_TARGET_MAIN){var o=i.indexOf(a);-1!==o&&i.splice(o,1)}e.each(i,function(e,a){t.fetch(a,n)})})}},getTabsCurrentURL:function(){var e=window.location.href;return e==M.HOME_URL&&(e=M.HOME_URL+"/"),e==M.HOME_URL+"/"&&M.HOMELOCALE_URL&&(e=M.HOMELOCALE_URL+"/"),e},getOpenTabsKey:function(){var t=this,n=M.LOCALE,a=t.getTopLevelFeedback()[M.DATALOAD_PARAMS];return e.each(a,function(e,t){n+="|"+e+"="+t}),n},getScreenOpenTabs:function(){var e=this;return e.getOpenTabs()[e.getOpenTabsKey()]||{}},keepScreenOpenTab:function(e,t){var n=this,a=n.getOpenTabs(),r=n.getOpenTabsKey();a[r]={},a[r][t]=[e],n.storeData("PoP:openTabs",a)},getOpenTabs:function(){var e=this;return M.KEEP_OPEN_TABS?e.getStoredData("PoP:openTabs")||{}:{}},addOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),r=n.getOpenTabsKey();return a[r]=a[r]||{},a[r][t]=a[r][t]||[],!(a[r][t].indexOf(e)>-1)&&(a[r][t].push(e),n.storeData("PoP:openTabs",a),!0)},removeOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),r=n.getOpenTabsKey();a[r]=a[r]||{},a[r][t]=a[r][t]||[];var i=a[r][t].indexOf(e);return-1!==i&&(a[r][t].splice(i,1),a[r][t].length||(delete a[r][t],a[r].length||delete a[r]),n.storeData("PoP:openTabs",a),!0)},replaceOpenTab:function(e,t,n){var a=this;M.KEEP_OPEN_TABS&&a.removeOpenTab(e,n)&&a.addOpenTab(t,n)},getStoredData:function(t,n){if(M.USELOCALSTORAGE&&Modernizr.localstorage){var a=localStorage[t];if(a)return a=e.parseJSON(a),n?a.version==M.VERSION&&(void 0===a.expires||a.expires>Date.now())?a.value:(delete localStorage[t],null):a.value}return null},storeData:function(e,t,n){if(M.USELOCALSTORAGE&&Modernizr.localstorage){var a={version:M.VERSION,value:t};n&&(a.expires=Date.now()+n);try{localStorage[e]=JSON.stringify(a)}catch(e){}}},fetchPageSection:function(t,n,a){var r=this,i=r.getPageSectionParams(t);if(i&&!(i.loading.indexOf(n)>-1)){a=a||{};var o=r.getTarget(t),s={options:a,url:n};popJSLibraryManager.execute("modifyFetchArgs",s);var c=s.url;c.indexOf("#")>-1&&(c=c.substr(0,c.indexOf("#"))),c=add_query_arg(M.URLPARAM_TARGET,o,c),c=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_SETTINGSDATA,c),c=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,c);var u=r.getTopLevelFeedback(),g=e.extend({},u[M.DATALOAD_PARAMS],i[M.DATALOAD_PARAMS]);a.params&&e.extend(g,a.params);var d,l=e.param(g);d=c+"|"+l;var p=r.getStoredData(d);if(p)return r.processPageSectionResponse(t,p,a),void r.triggerURLFetched(n);var f=popPageSectionManager.getPageSectionStatus(t).find(".pop-error");a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").removeClass("hidden");var S=r.getCrossDomainOptions(c);e.ajax(e.extend(S,{dataType:"json",url:c,data:l,beforeSend:function(e,s){e.url=n,i.url[e.url]=n,i.target[e.url]=o,i["fetch-url"][e.url]=s.url,i.loading.push(n),r.handleLoadingStatus(t,"add",a)},complete:function(n){var o=i.url[n.url];if(delete i.url[n.url],delete i.target[n.url],delete i["fetch-url"][n.url],i.loading.splice(i.loading.indexOf(o),1),r.handleLoadingStatus(t,"remove",a),a["urlfetched-callbacks"]){var s="urlfetched:"+escape(o);e.each(a["urlfetched-callbacks"],function(t,n){e(document).one(s,n)})}r.triggerURLFetched(o),a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").addClass("hidden")},success:function(e,n,o){r.pageSectionFetchSuccess(t,e),r.backgroundLoad(e.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS]),f.addClass("hidden");var s=i.url[o.url],c=e.feedback.toplevel[M.URLPARAM_URL],u=i.target[o.url];s!=c&&r.replaceOpenTab(s,c,u),a["fetch-params"]={url:s,target:u,"fetch-url":i["fetch-url"][o.url]},e.feedback.toplevel[M.URLPARAM_STORELOCAL]&&r.storeData(d,e),r.processPageSectionResponse(t,e,a)},error:function(e,n,a){var o=i.url[e.url];r.showError(t,r.getError(o,e,n,a)),t.triggerHandler("fetchFailed")}}))}},getCrossDomainOptions:function(t){var n={};return t.startsWith(M.HOME_URL)||e.each(M.ALLOWED_URLS,function(e,a){if(t.startsWith(a))return n.xhrFields={withCredentials:!0},n.crossDomain=!0,-1}),n},showError:function(e,t){var n=this,a=popPageSectionManager.getPageSectionStatus(e).find(".pop-error");a.children("div.pop-box").html(t),a.removeClass("hidden"),n.scrollTop(a)},triggerURLFetched:function(t){e(document).triggerHandler("urlfetched:"+escape(t)),e(document).triggerHandler("urlfetched",[t])},processPageSectionResponse:function(t,n,a){var r=this,i=r.getTarget(t);r.saveUrlPointers(n,i),r.addReplicableMemory(n,i),r.addInitialBlockMemory(n),r.integrateDatabases(n);var o=e.Deferred(),s=r.mergingTemplatePromise;r.mergingTemplatePromise=o.promise(),s?s.done(function(){r.processPageSection(t,n,a)}):r.processPageSection(t,n,a),o.resolve()},maybeUpdateDocument:function(e,t){var n=this;if(!(t=t||{}).silentDocument&&n.getFetchPageSectionSettings(e).updateDocument){if(!t.skipPushState){var a=n.getTopLevelFeedback();popBrowserHistory.pushState(a[M.URLPARAM_URL])}n.updateDocument()}},processPageSection:function(t,n,a){var r=this,i=r.getTarget(t);r.integrateTopLevelFeedback(n);var o=r.getTopLevelFeedback(),s=o[M.URLPARAM_ERROR];s&&r.showError(t,s);var c=o[M.URLPARAM_URL];a.reloadurl&&r.triggerDestroyTarget(c,i),o[M.URLPARAM_SILENTDOCUMENT]&&(a.silentDocument=!0),r.maybeUpdateDocument(t,a),a.maybeRedirect&&r.maybeRedirect(o)||(r.integratePageSection(n),e.each(n.settings.configuration,function(t,n){var i=n[M.JS_FRONTENDID],o=e("#"+i);r.renderPageSection(o,a),o.triggerHandler("fetched",[a,c]),o.triggerHandler("completed")}))},scrollToElem:function(e,t,n){popJSLibraryManager.execute("scrollToElem",{elem:e,position:t,animate:n})},scrollTop:function(e,t,n){popJSLibraryManager.execute("scrollTop",{elem:e,top:t,animate:n})},getPosition:function(t){var n=popJSLibraryManager.execute("getPosition",{elem:t}),a=0;return e.each(n,function(e,t){if(t)return a=t,-1}),a},getSettingsId:function(t){return"object"==e.type(t)?t.attr("data-settings-id"):t},getError:function(e,t,n,a){return 0===t.status?M.ERROR_OFFLINE.format(e):404==t.status?M.ERROR_404:M.ERROR_MSG.format(e)},closeMessageFeedback:function(t){e(document).ready(function(e){t.find(".pop-messagefeedback").removeClass("fade").alert("close")})},closeMessageFeedbacks:function(t){e(document).ready(function(e){t.find(".pop-messagefeedback").removeClass("fade").alert("close")})},processBlock:function(e,t,n){var a=this,r=a.getSettingsId(e),i=a.getSettingsId(t),o=a.getMemory();n.extendContext={items:o.dataset[r][i],ignorePSRuntimeId:!0},popJSRuntimeManager.setBlockURL(t.data("toplevel-url")),a.renderTarget(e,t,n)},fetchBlock:function(e,t,n){var a=this;!(n=n||{})["skip-stopfetching-check"]&&a.getBlockParams(e,t)[M.URLPARAM_STOPFETCHING]||a.executeFetchBlock(e,t,n)},getBlockPostData:function(t,n,a){var r=this,i=(a=a||{}).paramsGroup||"all",o=r.getBlockParams(t,n),s={};"all"==i&&e.extend(s,o[M.DATALOAD_PARAMS]);var c=o[M.DATALOAD_VISIBLEPARAMS];c&&e.extend(s,c),e.each(s,function(e,t){t||delete s[e]});var u=e.param(s);return o.filter&&(u&&(u+="&"),u+=o.filter),u},handleBlockError:function(t,n,a){var r=this,i=[".errormsg.status-"+n.status,".errormsg.general"];e.each(i,function(e,n){var a=t.find(n);if(a.length)return a.removeClass("hidden").siblings(".errormsg").addClass("hidden"),!1}),a["skip-status"]||(t.removeClass("hidden"),r.scrollTop(t))},executeFetchBlock:function(t,n,a){var r=this;a=a||{};var i=r.getQueryUrl(t,n);if(i){var o=a.type||"GET",s={options:a,url:i,type:o};popJSLibraryManager.execute("modifyFetchBlockArgs",s),i=s.url;var c=r.getBlockParams(t,n);a["post-data"]&&(c["post-data"]=a["post-data"]);var u=r.getTopLevelFeedback(),g=r.getPageSectionFeedback(t),d=r.getBlockFeedback(t,n),l=e.extend({},u[M.DATALOAD_PARAMS],g[M.DATALOAD_PARAMS],d[M.DATALOAD_PARAMS]),p=e.param(l);c["post-data"]&&(p&&(p+="&"),p+=c["post-data"]),a["onetime-post-data"]&&(p&&(p+="&"),p+=a["onetime-post-data"]);var f=r.getBlockPostData(t,n);p&&f&&(p+="&"),p+=f;var S=r.getTarget(t);i=add_query_arg(M.URLPARAM_TARGET,S,i),i=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_DATA,i);var A=(i=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,i))+p;if(!(c.loading.indexOf(A)>-1)){var h=n.find(".pop-loading"),m=n.find(".pop-error");a["skip-status"]||(h.removeClass("hidden"),m.addClass("hidden"),r.closeMessageFeedback(n)),r.triggerEvent(t,n,"beforeFetch",[a]),a["show-disabled-layer"]&&n.children(".pop-disabledlayer").removeClass("hidden");var T=r.getCrossDomainOptions(i);e.ajax(e.extend(T,{dataType:"json",url:i,data:p,type:o,beforeSend:function(e,t){e.url=t.url,c.url[e.url]=A,c.loading.push(A),c.operation[A]=a.operation,c.action[A]=a.action,c["paramsscope-url"][A]=n.data("paramsscope-url"),a.reload&&c.reload.push(A)},success:function(i,o,s){r.blockFetchSuccess(t,n,i),r.backgroundLoad(i.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS]),a["hide-latestcount"]&&n.children(".blocksection-latestcount").find(".pop-latestcount").addClass("hidden").find(".pop-count").text("0");var u=r.mergingTemplatePromise,g=e.Deferred(),d=g.promise();r.mergingTemplatePromise=d,u?u.done(function(){r.executeFetchBlockSuccess(t,n,c,i,s)}):r.executeFetchBlockSuccess(t,n,c,i,s),g.resolve()},error:function(e,i,o){r.handleBlockError(m,e,a),r.triggerEvent(t,n,"fetchFailed")},complete:function(i){var o={},s=c.url[i.url];delete c.url[i.url],c.loading.splice(c.loading.indexOf(s),1),delete c.operation[s],delete c.action[s],delete c["paramsscope-url"][s];var u=c.reload.indexOf(s);u>-1&&(o.reload=!0,c.reload.splice(u,1));var g=r.mergingTemplatePromise,d=e.Deferred(),l=d.promise();r.mergingTemplatePromise=l,g?g.done(function(){r.fetchBlockComplete(t,n,c,o,a)}):r.fetchBlockComplete(t,n,c,o,a),d.resolve()}}))}}},fetchBlockComplete:function(t,n,a,r,i){var o=this;n.children(".pop-disabledlayer").addClass("hidden"),i["datasetcount-target"]&&o.displayDatasetCount(t,n,e(i["datasetcount-target"]),i["datasetcount-updatetitle"]),a.loading.length||n.find(".pop-loading").addClass("hidden"),o.getBlockParams(t,n)[M.URLPARAM_STOPFETCHING]?n.addClass("pop-stopfetching"):n.removeClass("pop-stopfetching"),o.triggerEvent(t,n,"fetchCompleted",[r])},displayDatasetCount:function(e,t,n,a){var r=this,i=r.getBlockDataset(e,t);if(i.length){var o=n.data("datasetcount-mode")||"add",s=i.length;"add"==o&&(s+=n.text()?parseInt(n.text()):0),s&&(n.removeClass("hidden").text(s),a&&(document.title="("+s+") "+r.documentTitle))}},executeFetchBlockSuccess:function(t,n,a,r,i){var o=this,s=a.url[i.url],c=a.action[s],u={url:a["paramsscope-url"][s]},g={operation:a.operation[s],action:a.action[s]},d=o.getMemory();if([M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(c)>-1){var l=o.getInitialBlockMemory(u.url);e.each(r.params,function(t,n){e.each(n,function(e,n){d.runtimesettings.configuration[t][e]=l.runtimesettings.configuration[t][e]})})}o.integrateTopLevelFeedback(r),o.integrateDatabases(r),e.each(r.params,function(t,n){var a=e("#"+d.settings.configuration[t].id);d.feedback.block[t]||(d.feedback.block[t]={}),e.extend(d.feedback.block[t],r.feedback.block[t]),d.dataset[t]||(d.dataset[t]={}),e.extend(d.dataset[t],r.dataset[t]),d.params[t]||(d.params[t]={}),e.extend(d.params[t]),e.each(n,function(n,i){try{var s=e("#"+o.getBlockId(t,n,u));if(e.extend(o.getBlockParams(a,s,u),i),[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH].indexOf(c)>-1&&o.getJsSettings(a,s)["processblock-ifhasdata"]&&!r.dataset[t][n].length)return;o.processBlock(a,s,g)}catch(e){console.log(e.message)}})}),n.triggerHandler("fetched",[r,c])},triggerEvent:function(e,t,n,a){t.triggerHandler(n,a)},integrateTopLevelFeedback:function(t){var n=this.getMemory().feedback.toplevel;e.each(t.feedback.toplevel,function(t,a){"array"==e.type(a)&&0==a.length||("object"==e.type(a)?(n[t]||(n[t]={}),e.extend(n[t],a)):n[t]=a)})},clearUserDatabase:function(){this.userdatabase={}},integrateDatabase:function(t,n){e.each(n,function(n,a){t[n]=t[n]||{},"array"!=e.type(a)&&e.each(a,function(a,r){t[n][a]||(t[n][a]={}),e.extend(t[n][a],r)})})},integrateDatabases:function(e){var t=this;t.integrateDatabase(t.database,e.database),t.integrateDatabase(t.userdatabase,e.userdatabase)},getMergeTargetContainer:function(t){return t.data("merge-container")?e(t.data("merge-container")):t},getMergeTarget:function(t,n,a){var r=this,i=".pop-merge."+n,o=(a=a||{})["merge-target"]?e(a["merge-target"]):t.find(i).addBack(i);return r.getMergeTargetContainer(o)},generateUniqueId:function(){var e=this,t=Date.now();return e.getTopLevelFeedback()[M.UNIQUEID]=t,t},getUniqueId:function(){return this.getTopLevelFeedback()[M.UNIQUEID]},addUniqueId:function(e){return e+"#"+this.getUniqueId()},mergeTargetTemplate:function(e,t,n,a){var r=this;a=a||{};var i=[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(a.action)>-1;i&&r.generateUniqueId();var o=r.getTemplateHtml(e,t,n,a),s=r.getMergeTarget(t,n,a),c=a.operation||M.URLPARAM_OPERATION_REPLACE;c==M.URLPARAM_OPERATION_REPLACE&&(t.triggerHandler("replace",[a.action]),i&&t.triggerHandler("rerender",[a.action]),s.empty());var u=r.mergeHtml(o,s,c);return t.triggerHandler("merged",[u.newDOMs]),u},mergeHtml:function(t,n,a){var r=this,i=e(t);return a==M.URLPARAM_OPERATION_PREPEND?n.prepend(i):a==M.URLPARAM_OPERATION_REPLACEINLINE?(n.replaceWith(i),n=i):n.append(i),r.triggerHTMLMerged(),{targetContainer:n,newDOMs:i}},triggerHTMLMerged:function(){e(document).triggerHandler("template:merged")},renderPageSection:function(t,n){var a=this;n=n||{},e.extend(n,a.getFetchPageSectionSettings(t));var r;n["serverside-rendering"]?(a.triggerHTMLMerged(),r=a.getPageSectionDOMs(t)):r=a.renderTarget(t,t,n),r.length&&a.pageSectionRendered(t,r,n)},getPageSectionDOMs:function(t){var n=this,a=n.getTemplatesCbs(t,t),r=e(),i=e();return e.each(a,function(e,a){var o=n.getMergeTarget(t,a);r.add(o),i=i.add(o.children())}),n.triggerRendered(t,i,r),i},renderTarget:function(t,n,a){var r=this;a=a||{},n.triggerHandler("beforeMerge",[a]);var i=r.getTemplatesCbs(t,n,a.action),o=e(),s=e();return e.each(i,function(e,i){var c=r.mergeTargetTemplate(t,n,i,a);o=o.add(c.targetContainer),s=s.add(c.newDOMs)}),r.triggerRendered(n,s,o),s},triggerRendered:function(t,n,a){t.triggerHandler("rendered",[n,a]),e(document).triggerHandler("rendered",[t,n,a])},getPageSectionConfiguration:function(e){var t=this,n=t.getSettingsId(e);return t.getMemory().settings.configuration[n]},getTargetConfiguration:function(t,n,a){var r=this,i=r.getTemplatePath(t,n,a),o=r.getPageSectionConfiguration(t);return i&&e.each(i,function(e,t){o=o[t]}),o},overrideFromItemObject:function(t,n,a){t&&e.each(a,function(e,a){n[a.key]=t[a.field]})},replaceFromItemObject:function(t,n,a,r,i,o){var s=this,c=s.getTopLevelFeedback(),u=s.getTargetConfiguration(t,n,a);e.each(o,function(t,n){var a=n["replace-where-field"],o=n["replace-where-path"],s=n["replace-from-field"]||a,g=n.replacements,d=u[s];e.each(g,function(e,t){var n=t["replace-str"];if(r){var a=t["replace-with-field"];if(a&&n!=r[a]){var i=r[a];t["encode-uri-component"]?i=encodeURIComponent(i):t["encode-uri"]&&(i=encodeURI(i)),d=d.replace(new RegExp(n,"g"),i)}}var o=t["replace-from-feedback"];o&&n!=c[o]&&(d=d.replace(new RegExp(n,"g"),c[o]))});var l=i;o&&e.each(o,function(e,t){l[t]={},l=l[t]}),l[a]=d})},getTemplateHtml:function(t,n,a,r,i,o){var s=this,c=s.getTargetConfiguration(t,n,a);if(r=r||{},targetContext=c,s.getTemplatePath(t,n,a).length){var u=s.getBlock(n);s.initContextSettings(t,u,targetContext),s.extendContext(targetContext,i,o)}var g=r.extendContext;return g&&(targetContext=e.extend({},targetContext,g)),s.getHtml(a,targetContext)},extendContext:function(t,n,a,r){var i=this;if(r=r||{},e.extend(t,r),n&&(e.extend(t,{itemDBKey:n}),a)){var o=i.getItemObject(n,a);e.extend(t,{itemObject:o})}},initTopLevelJson:function(){var t=this,n=e("#"+popPageSectionManager.getTopLevelSettingsId()),a=e.parseJSON(n.html());t.database=a.database,t.userdatabase=a.userdatabase;var r=t.getMemory();r.settings=a.settings,r.runtimesettings=a.runtimesettings,r.dataset=a.dataset,r.feedback=a.feedback,r.params=a.params,e.each(r.dataset,function(t,n){"array"==e.type(n)&&(r.dataset[t]={})}),e.each(r.params,function(t,n){"array"==e.type(n)&&(r.params[t]={})}),e.each(r.feedback.pagesection,function(t,n){"array"==e.type(n)&&(r.feedback.pagesection[t]={})}),e.each(r.feedback.block,function(t,n){"array"==e.type(n)&&(r.feedback.block[t]={})}),t.saveUrlPointers(a),t.addReplicableMemory(a),t.addInitialBlockMemory(a)},getBlockDefaultParams:function(){return{url:[],loading:[],reload:[],operation:{},action:{},"paramsscope-url":{},"post-data":"",filter:""}},getPageSectionDefaultParams:function(){return{url:{},target:{},"fetch-url":{},loading:[]}},initPageSectionRuntimeMemory:function(e,t){var n=this,a=n.newRuntimeMemoryPage(e,e,t);n.getSettingsId(e);a.params=n.getPageSectionDefaultParams();var r={pageSection:e,runtimeMempage:a};popJSLibraryManager.execute("initPageSectionRuntimeMemory",r)},initBlockRuntimeMemory:function(t,n,a){var r=this,i=r.newRuntimeMemoryPage(t,n,a),o=r.getSettingsId(t),s=r.getSettingsId(n);i.params=e.extend(r.getBlockDefaultParams(),r.getMemory().params[o][s]),i["query-url"]=r.getRuntimeSettings(t,n,"query-url"),i.id=n.attr("id");var c={pageSection:t,block:n,runtimeMempage:i};popJSLibraryManager.execute("initBlockRuntimeMemory",c)},getViewport:function(e,t){var n=t.closest(".pop-viewport");return n.length?n:e},getDOMContainer:function(t,n){var a=this;return M.DOMCONTAINER_ID?e("#"+M.DOMCONTAINER_ID):a.getViewport(t,n)},getBlock:function(t){return t.hasClass("pop-block")?t:t.closest(".pop-block").length?t.closest(".pop-block"):t.closest("[data-block]").length?e(t.closest("[data-block]").data("block")):null},isBlockGroup:function(e){return e.hasClass("pop-blockgroup")},getBlockGroupActiveBlock:function(e){return e.find(".tab-pane.active .pop-block, .collapse.in .pop-block")},getBlockGroupBlocks:function(e){return e.find(".pop-block")},getTemplateSource:function(e){return this.getMemory().settings["template-sources"][e]||e},initPageSectionSettings:function(t,n){var a=this,r=a.getTopLevelSettings();e.extend(n,{tls:r});var i=a.getPageSectionSettings(t),o=a.getSettingsId(t),s=n[M.JS_FRONTENDID];e.extend(n,{pss:i}),a.expandJSKeys(n),n[M.JS_MODULES]&&e.each(n[M.JS_MODULES],function(t,n){var c=n[M.JS_FRONTENDID],u=a.getBlockSettings(o,t,s,c);e.extend(n,{tls:r,pss:i,bs:u}),a.expandJSKeys(n)})},initContextSettings:function(t,n,a){var r=this,i=r.getTopLevelSettings();e.extend(a,{tls:i});var o=r.getPageSectionSettings(t);e.extend(a,{pss:o});var s=r.getSettingsId(t),c=t.attr("id"),u=r.getSettingsId(n),g=n.attr("id"),d=r.getBlockSettings(s,u,c,g);e.extend(a,{pss:o,bs:d}),r.expandJSKeys(a),a.itemDBKey||(a.itemDBKey=d["db-keys"]["db-key"])},integratePageSection:function(t){var n=this,a=n.getMemory();e.extend(a.settings["template-sources"],t.settings["template-sources"]),e.each(t.settings.configuration,function(r,i){e.extend(a.params[r],t.params[r]),e.extend(a.dataset[r],t.dataset[r]),e.extend(a.feedback.pagesection[r],t.feedback.pagesection[r]),e.extend(a.feedback.block[r],t.feedback.block[r]),e.extend(a.runtimesettings["query-url"][r],t.runtimesettings["query-url"][r]),e.extend(a.runtimesettings.configuration[r],t.runtimesettings.configuration[r]),e.extend(a.runtimesettings["js-settings"][r],t.runtimesettings["js-settings"][r]),e.extend(a.settings["js-settings"][r],t.settings["js-settings"][r]),e.extend(a.settings.jsmethods.pagesection[r],t.settings.jsmethods.pagesection[r]),e.extend(a.settings.jsmethods.block[r],t.settings.jsmethods.block[r]),e.extend(a.settings["templates-cbs"][r],t.settings["templates-cbs"][r]),e.extend(a.settings["templates-paths"][r],t.settings["templates-paths"][r]),e.extend(a.settings["db-keys"][r],t.settings["db-keys"][r]),a.settings.configuration[r]||(a.settings.configuration[r]={});var o=a.settings.configuration[r];e.each(i,function(t,n){"array"==e.type(n)?o[t]={}:"object"==e.type(n)?(o[t]||(o[t]={}),e.extend(o[t],n)):o[t]=n});var s=i[M.JS_FRONTENDID],c=e("#"+s);n.initPageSectionSettings(c,o)})},getTopLevelSettings:function(){return{feedback:this.getTopLevelFeedback()}},getPageSectionSettings:function(e){var t=this,n=t.getSettingsId(e),a=e.attr("id");return{feedback:t.getPageSectionFeedback(e),pssId:n,psId:a}},getBlockSettings:function(e,t,n,a){var r=this,i={"db-keys":r.getDatabaseKeys(e,t),dataset:r.getBlockDataset(e,t),feedback:r.getBlockFeedback(e,t),bsId:t,bId:a};return r.expandBlockSettingsJSKeys(i),i},expandBlockSettingsJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&e["db-keys"]&&e["db-keys"][M.JS_SUBCOMPONENTS]&&(e["db-keys"].subcomponents=e["db-keys"][M.JS_SUBCOMPONENTS])},getBlockDataset:function(e,t){var n=this,a=n.getSettingsId(e),r=n.getSettingsId(t);return n.getMemory().dataset[a][r]},getBlockFeedback:function(e,t){var n=this,a=n.getSettingsId(e),r=n.getSettingsId(t);return n.getMemory().feedback.block[a][r]},getPageSectionFeedback:function(e){var t=this,n=t.getSettingsId(e);return t.getMemory().feedback.pagesection[n]},getTopLevelFeedback:function(){return this.getMemory().feedback.toplevel},getSettings:function(e,t,n){var a=this,r=a.getSettingsId(e),i=a.getSettingsId(t);return a.getMemory().settings[n][r][i]},getRuntimeSettings:function(e,t,n){var a=this,r=a.getSettingsId(e),i=a.getSettingsId(t);return a.getMemory().runtimesettings[n][r][i]},getQueryUrl:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-url"]},getRuntimeConfiguration:function(e,t,n){var a=this;n=n||t;var r=a.getTemplateOrObjectSettingsId(n);return a.getRuntimeSettings(e,t,"configuration")[r]||{}},getDatabaseKeys:function(e,t){return this.getSettings(e,t,"db-keys")},getBlockFilteringUrl:function(e,t,n){var a=this,r=a.getQueryUrl(e,t);!r&&n&&(r=a.getTopLevelFeedback()[M.URLPARAM_URL]);var i=a.getBlockPostData(e,t,{paramsGroup:"visible"});return i&&(r.indexOf("?")>-1?r+="&":r+="?",r+=i),r},click:function(t,n,a){n=n||"",a=a||e(document.body),e('<a href="'+t+'" target="'+n+'" class="hidden"></a>').appendTo(a).trigger("click")},getUnembedUrl:function(t){var n=popJSLibraryManager.execute("getUnembedUrl",{url:t});return e.each(n,function(e,n){if(n)return t=n,-1}),t},getEmbedUrl:function(t){var n=popJSLibraryManager.execute("getEmbedUrl",{url:t});return e.each(n,function(e,n){if(n)return t=n,-1}),t},getAPIUrl:function(t){return e.each(M.API_URLPARAMS,function(e,n){t=add_query_arg(e,n,t)}),t},getPrintUrl:function(t){var n=popJSLibraryManager.execute("getPrintUrl",{url:t});return e.each(n,function(e,n){if(n)return t=n,-1}),t},getDestroyUrl:function(t){var n=M.HOME_URL;return e.each(M.ALLOWED_URLS,function(e,a){if(t.startsWith(a))return n=a,-1}),t.replace(n,n+"/destroy")},getTemplateOrObjectSettingsId:function(t){return"object"==e.type(t)?t.data("templateid"):t},getPageSectionJsSettings:function(e){var t=this;t.getSettingsId(e);return t.getSettings(e,e,"js-settings")||{}},getJsSettings:function(t,n,a){var r=this;a=a||n;r.getSettingsId(t),r.getSettingsId(n);var i=r.getTemplateOrObjectSettingsId(a),o=r.getSettings(t,n,"js-settings"),s=r.getRuntimeSettings(t,n,"js-settings"),c={};return o[i]&&e.extend(c,o[i]),s[i]&&e.extend(!0,c,s[i]),c},getPageSectionJsMethods:function(e){var t=this,n=t.getSettingsId(e);return t.getMemory().settings.jsmethods.pagesection[n]||{}},getBlockJsMethods:function(e,t){var n=this,a=n.getSettingsId(e),r=n.getSettingsId(t);return n.getMemory().settings.jsmethods.block[a][r]||{}},restoreInitialBlockMemory:function(t,n,a){var r=this,i=r.getSettingsId(t),o=r.getSettingsId(n),s=n.data("paramsscope-url"),c=r.getInitialBlockMemory(s);r.getRuntimeMemoryPage(t,n,a).params=e.extend(r.getBlockDefaultParams(),c.params[i][o]),r.getMemory().runtimesettings.configuration[i][o]=e.extend({},c.runtimesettings.configuration[i][o]),r.getMemory().feedback.block[i][o]=e.extend({},c.feedback.block[i][o]);var u=c.dataset[i][o];u.length?e.extend(r.getMemory().dataset[i][o],u):r.getMemory().dataset[i][o]=[]},getBlockParams:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n).params},getPageSectionParams:function(e,t){return this.getRuntimeMemoryPage(e,e,t).params},getTarget:function(t){var n=t.attr("id"),a=M.URLPARAM_TARGET_MAIN;return e.each(M.FETCHTARGET_SETTINGS,function(e,t){if(t==n)return a=e,-1}),a},targetExists:function(e){return M.FETCHTARGET_SETTINGS[e]},getFetchTargetPageSection:function(t){return t&&"_self"!=t&&M.FETCHTARGET_SETTINGS[t]||(t=M.URLPARAM_TARGET_MAIN),e("#"+M.FETCHTARGET_SETTINGS[t])},getFetchPageSectionSettings:function(e){var t=e.attr("id");return M.FETCHPAGESECTION_SETTINGS[t]||{}},getTemplatesCbs:function(t,n,a){var r=this;a=a||"main";var i=r.getSettings(t,n,"templates-cbs"),o=i.cbs,s=i.actions;if(e.isArray(s)&&!s.length)return o;var c=[];return e.each(o,function(e,t){(!s[t]||s[t].indexOf(a)>-1)&&c.push(t)}),c},getTemplatePath:function(e,t,n){return this.getSettings(e,t,"templates-paths")[n]},getScriptTemplate:function(e){var t=this.getTemplateSource(e);return Handlebars.templates[t]},getPageSectionGroup:function(e){return e.closest(".pop-pagesection-group").addBack(".pop-pagesection-group")},getPageSection:function(e){return e.closest(".pop-pagesection").addBack(".pop-pagesection")},getPageSectionPage:function(e){var t=this,n=e.closest(".pop-pagesection-page").addBack(".pop-pagesection-page");return n.length?n:t.getPageSection(e)},getBlockId:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n).id},getHtml:function(e,t){var n=this.getScriptTemplate(e);if(void 0===n)return console.error("No template for "+e),"";try{return n(t)}catch(t){console.log("Error in "+e+": "+t.message)}return""},getItemObject:function(t,n){var a=this,r={},i={};return a.userdatabase[t]&&a.userdatabase[t][n]&&(r=a.userdatabase[t][n]),a.database[t]&&a.database[t][n]&&(i=a.database[t][n]),e.extend({},r,i)},getFrameTarget:function(e){return e.data("frametarget")||M.URLPARAM_TARGET_MAIN},getClickFrameTarget:function(e){var t=this;return e.data("clickframetarget")||t.getFrameTarget(e)},getOriginalLink:function(e){var t=this,n=e.data("interceptedTarget");return n?t.getOriginalLink(n):e}}}(jQuery);
;!function(a){popCustomBootstrap={initDocument:function(){a(document).on("focusin",function(e){a(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()})},runScriptsBefore:function(e){var t=this;e.pageSection;e.newDOMs.find(".collapse").addBack(".collapse").on("show.bs.collapse",function(){t.addBubblingFlag(a(this),".collapse","show")}).on("shown.bs.collapse",function(){t.addBubblingFlag(a(this),".collapse","shown")}).on("hide.bs.collapse",function(){t.addBubblingFlag(a(this),".collapse","hide")}).on("hidden.bs.collapse",function(){t.addBubblingFlag(a(this),".collapse","hidden")})},pageSectionNewDOMsInitialized:function(a){var e=this,t=a.pageSection,n=a.newDOMs;e.activateNestedComponents(t,n),e.showComponentInitializeJS(t,n),e.triggerTabPaneEvents(n)},onBootstrapEventWindowResize:function(a){var e=a.targets;e.find(".collapse").addBack(".collapse").on("shown.bs.collapse hidden.bs.collapse",windowResize),e.find(".tab-pane").addBack(".tab-pane").on("shown.bs.tabpane",windowResize),e.find(".carousel").addBack(".carousel").on("slid.bs.carousel",windowResize)},isHidden:function(a){var e=a.targets;return!!e.parents(".collapse,.modal").not(".in").length||!!e.parents(".tab-pane").not(".active").length},isActive:function(a){var e=a.targets;return!(e.hasClass("tab-pane")&&!e.hasClass("active"))},activeTabLink:function(e){e.targets.click(function(e){a(this).parent("li").addClass("active").siblings("li").removeClass("active")})},activatePageTab:function(e){var t=this,n=e.pageSection,o=e.targets;o.click(function(){var e=a(this),o=a(e.data("target"));t.clickPageTab(n,o)}),o.each(function(){var e=a(this);e.closest(".pop-pagesection-page").find(".pop-pagetab-btn").not(".pop-inactive").length&&e.trigger("click")})},customQuickView:function(a){var e=a.pageSection,t=e.closest(".modal");e.on("fetched",function(){popBootstrap.showingModal(t)||(popBootstrap.closeModals(),t.modal("show"))}),popManager.getPageSectionGroup(e).on("on.bs.pagesection-group:pagesection-"+e.attr("id")+":closed",function(){t.modal("hide")})},destroyPageOnModalClose:function(e){e.pageSection;e.targets.each(function(){var e=a(this);e.closest(".modal").on("hidden.bs.modal",function(){e.trigger("click")})})},customCloseModals:function(a){a.pageSection.on("destroy",function(){popBootstrap.closeModals()})},showComponentInitializeJS:function(a,e){var t=this,n=e.find(".collapse.pop-bscomponent").addBack(".collapse.pop-bscomponent");n.length&&t.initComponentHandlers(a,n,"shown.bs.collapse");var o=e.find(".modal.pop-bscomponent").addBack(".modal.pop-bscomponent");o.length&&t.initComponentHandlers(a,o,"shown.bs.modal");var i=e.find(".tab-pane.pop-bscomponent").addBack(".tab-pane.pop-bscomponent");i.length&&t.initComponentHandlers(a,i,"shown.bs.tabpane");var s=e.find(".carousel.pop-bscomponent").addBack(".carousel.pop-bscomponent");s.length&&t.initComponentHandlers(a,s,"slid.bs.carousel",!0)},initComponentHandlers:function(e,t,n,o){var i=this;t.on(n,function(t){var n=a(o?t.relatedTarget:this),s=a(n.data("initjs-targets")),r={"post-data":n.data("post-data")};i.recursiveSetBlockData(e,s,r)}),t.on(n,function(t){var n=a(o?t.relatedTarget:this),i=a(n.data("initjs-targets")).not("."+M.JS_INITIALIZED);if(i.length){var s={"force-init":!0},r=n.data("intercept-url")||n.data("original-url");r&&(s.url=r),popManager.initBlockBranches(e,i,s)}}),t.on(n,function(t){var n=a(o?t.relatedTarget:this),s=a(n.data("initjs-targets"));n.data("onetime-refetch")&&i.recursiveOneTimeRefetch(e,s),i.triggerBlocksVisible(e,s)})},recursiveSetBlockData:function(e,t,n){var o=this;t.each(function(){var t=a(this);a.each(n,function(a,e){t.data(a,e)});var i=popManager.getJsSettings(e,t)["initjs-blockbranches"];i&&o.recursiveSetBlockData(e,a(i.join(", ")),n)})},recursiveOneTimeRefetch:function(e,t){var n=this;t.each(function(){var t=a(this);popSystem.makeOneTimeRefetch(e,t);var o=popManager.getJsSettings(e,t)["initjs-blockbranches"];o&&n.recursiveOneTimeRefetch(e,a(o.join(", ")))})},triggerBlocksVisible:function(e,t){var n=this;t.each(function(){var t=a(this);t.triggerHandler("visible");var o=popManager.getJsSettings(e,t)["initjs-blockbranches"];o&&n.triggerBlocksVisible(e,a(o.join(", ")))})},activateNestedComponents:function(e,t){var n=this;t.find("div.tab-pane div.tab-pane").addBack("div.tab-pane div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterTabPanes(a(this))}),t.find("div.tab-pane div.collapse").addBack("div.tab-pane div.collapse").on("shown.bs.collapse",function(){n.activateOuterTabPanes(a(this))}),t.find("div.carousel div.collapse").addBack("div.carousel div.collapse").on("shown.bs.collapse",function(){n.activateOuterCarousel(a(this))}),t.find("div.carousel div.tab-pane").addBack("div.carousel div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterCarousel(a(this))})},activateOuterTabPanes:function(e){var t=e.parents(".tab-pane").not(".active");t.length&&a('a[href="#'+t.attr("id")+'"]').tab("show")},activateOuterCarousel:function(a){var e=a.closest(".carousel");popBootstrapCarousel.showElement(e,a)},triggerTabPaneEvents:function(e){var t=this;e.find('a[data-toggle="tab"]').addBack('a[data-toggle="tab"]').on("show.bs.tab",function(e){t.triggerTabPaneEvent(a(this),e,"show.bs.tabpane")}).on("shown.bs.tab",function(e){t.triggerTabPaneEvent(a(this),e,"shown.bs.tabpane")}).on("hide.bs.tab",function(e){t.triggerTabPaneEvent(a(this),e,"hide.bs.tabpane")}).on("hidden.bs.tab",function(e){t.triggerTabPaneEvent(a(this),e,"hidden.bs.tabpane")})},triggerTabPaneEvent:function(e,t,n){var o=a(a(t.target).attr("href"));o.data("post-data",e.data("post-data")),o.data("onetime-refetch",e.data("onetime-refetch")),o.data("intercept-url",e.data("intercept-url")),o.data("original-url",e.data("original-url")),o.triggerHandler(n,[t])},resetBubbling:function(){a("[data-bubbling]").attr("data-bubbling",null),a("[data-bubbling-origin]").attr("data-bubbling-origin",null)},bubbling:function(a,e){if(a.is(e)){var t=a.attr("data-bubbling");if(t&&a.find('[data-bubbling-origin="'+t+'"]').length)return!0}return!1},addBubblingFlag:function(a,e,t){if(a.parents(e).length){var n=getRandomInt(1,1e10),o=a.attr("id")+"-"+t+"-"+n;a.attr("data-bubbling-origin",o),a.parents(e).attr("data-bubbling",o)}},activatePageTabs:function(a,e,t){t&&e.filter(".pop-pagesection-page").find(".pop-pagetab-btn").addClass("pop-inactive")},activateSideTabpanes:function(a,e,t){var n=e.filter(".tab-pane");if(n.length){var o=popManager.isFirstLoad(a);t||(o||e.siblings(".tab-pane").removeClass("active"),n.addClass("active")),n.on("shown.bs.tabpane",function(){"automatic"==popPageSectionManager.getOpenMode(a)&&(popPageSectionManager.open(a),popManager.scrollTop(a))}),t||o||popManager.scrollTop(a)}},activateQuickviewTabpanes:function(a,e,t){var n=e.filter(".tab-pane");n.length&&n.addClass("active").siblings(".tab-pane").removeClass("active")},activateModals:function(a,e){var t=e.filter(".modal");t.length&&(popBootstrap.closeModals(),t.modal("show"),t.on("show.bs.modal",function(a){popManager.closeMessageFeedback(t)}),t.on("shown.bs.modal",function(a){windowResize()}))},activateTabPanes:function(e,t,n,o,i){var s=this,r=t.filter(".tab-pane");if(r.length){var c=popManager.isFirstLoad(e);if(!n){if(!c){var l=t.siblings(".tab-pane.active");s.savePosition(e,l),l.removeClass("active")}r.addClass("active")}r.on("show.bs.tabpane",function(){var t=a(this).siblings(".active");t.length&&s.savePosition(e,t)}).on("shown.bs.tabpane",function(){var t=a(this);popPageSectionManager.open(e),s.newPageSectionJS(e,o,i,t)}),n||c||s.newPageSectionJS(e,o,i)}},clickPageTab:function(a,e){a.find(".pop-pagetab-btn").removeClass("active"),e.addClass("active")},savePosition:function(a,e){e.data("lastposition",popManager.getPosition(a)),e.data("theater",popPageSectionManager.isTheater())},newPageSectionJS:function(e,t,n,o){n.each(function(){var e=a(this);popPageSectionManager.close(e,"xs")}),popBootstrap.closeModals();var i;o?(void 0!==o.data("lastposition")&&(popManager.scrollTop(e,o.data("lastposition")),o.data("lastposition",null)),i=o.data("theater")||!1,o.data("theater",null)):popManager.scrollTop(e,0),t&&!i&&popPageSectionManager.theater(!1),i&&popPageSectionManager.theater(!0),windowResize()}}}(jQuery),popJSLibraryManager.register(popCustomBootstrap,["initDocument","runScriptsBefore","pageSectionNewDOMsInitialized","activeTabLink","isHidden","isActive"],!0),popJSLibraryManager.register(popCustomBootstrap,["customQuickView","destroyPageOnModalClose","customCloseModals","activatePageTab","onBootstrapEventWindowResize"]),function(a){popBootstrap={modal:function(e){e.targets.on("show.bs.modal",function(e){var t=a(this),n=a(e.relatedTarget),o=(n=popManager.getOriginalLink(n)).data("header")||"";t.find(".modal-header .pop-box").html(o)})},closeModals:function(){a(".modal.in").modal("hide")},showingModal:function(a){return a.hasClass("in")},popover:function(a){var e=this,t=a.pageSection,n=a.block,o=a.targets;e.execPopover(t,n,o)},contentPopover:function(a){var e=this,t=a.pageSection,n=a.block,o=a.targets;e.execPopover(t,n,o.find("a[data-popover-target]"))},tooltip:function(a){var e=a.pageSection,t=a.targets;jQuery(document).ready(function(a){popManager.getPageSectionPage(t).one("destroy",function(){t.tooltip("destroy")}),t.each(function(){var t=a(this),n="#"+popManager.getDOMContainer(e,t).attr("id"),o={placement:t.data("tooltip-placement")||"top",title:t.attr("title"),container:n};t.tooltip(o)})})},openParentCollapse:function(a){var e=this,t=a.targets;e.execOpenParentCollapse(t)},alertCloseOnTimeout:function(a){var e=this,t=(a.pageSection,a.targets),n=t.data("closetime")||3e3;t.data("close",!0),t.mouseenter(function(){t.data("close",null),t.addClass("hover")}),t.mouseleave(function(){t.data("close",!0),e.execAlertCloseOnTimeout(t,n),t.removeClass("hover")}),e.execAlertCloseOnTimeout(t,n)},execOpenParentCollapse:function(a){a.closest(".collapse").not(".in").collapse("show")},execPopover:function(a,e,t){jQuery(document).ready(function(n){popManager.getPageSectionPage(e).one("destroy",function(){t.popover("destroy")});var o={animation:!1,html:!0,trigger:"manual focus",placement:"auto",delay:{hide:100},container:"#"+popManager.getDOMContainer(a,e).attr("id")};t.each(function(){var a=n(this),e=n(a.data("popover-target")).first();if(e.length){var t=e.html();t='<span data-block="'+("#"+popManager.getBlock(a).attr("id"))+'">'+t+"</span>";var i=n.extend({},o,{content:t});a.popover(i).on("mouseenter",function(){var a=this;n(this).popover("show"),n(".popover").on("mouseleave",function(){n(a).popover("hide")})}).on("mouseleave",function(){var a=this;setTimeout(function(){n(".popover:hover").length||n(a).popover("hide")},i.delay.hide)})}})})},execAlertCloseOnTimeout:function(a,e){setTimeout(function(){a.data("close")&&a.alert("close")},e)},scrollTop:function(a){var e=a.elem,t=(a.top,a.animate,e.closest(".modal").addBack(".modal"));return!!t.length&&(t.animate({scrollTop:0},"fast"),!0)}}}(jQuery),popJSLibraryManager.register(popBootstrap,["modal","closeModals","popover","contentPopover","tooltip","openParentCollapse","alertCloseOnTimeout","scrollTop"]);
;function mentions_source(e,t,a){popMentions.source(e,t,a)}function mentions_insert(e){return popMentions.insert(e)}function mentions_render(e){return popMentions.render(e)}function d(e){var t,a;return this.length?(t=this[0],t.ownerDocument?a=t.ownerDocument:(a=t,t=a.documentElement),null==e?a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.msExitFullscreen||a.mozCancelFullScreen?(e=!!(a.fullscreenElement||a.msFullscreenElement||a.webkitIsFullScreen||a.mozFullScreen),e?a.fullscreenElement||a.webkitFullscreenElement||a.webkitCurrentFullScreenElement||a.msFullscreenElement||a.mozFullScreenElement||e:e):null:(e?(e=t.requestFullscreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.msRequestFullscreen||t.mozRequestFullScreen)&&e.call(t):(e=a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.msExitFullscreen||a.mozCancelFullScreen)&&e.call(a),this)):this}Handlebars.registerHelper("latestCountTargets",function(e,t){var a=[],n=".pop-block."+M.JS_INITIALIZED+" > .blocksection-latestcount > .pop-latestcount",i=e["post-type"],o=e.cats;return o&&o.length&&a.push(n+"."+i+"-"+o.join("."+i+"-")),jQuery.each(e.tags,function(e,t){var i=n+".tag"+t;a.push(i)}),jQuery.each(e.authors,function(e,t){var r=n+".author"+t;o&&o.length&&(r+=".author-"+i+"-"+o.join(".author-"+i+"-")),a.push(r)}),jQuery.each(e.references,function(e,t){var r=n+".single"+t;o&&o.length&&(r+=".single-"+i+"-"+o.join(".single-"+i+"-")),a.push(r)}),new Handlebars.SafeString(a.join(","))}),function(e){popSystem={documentInitialized:function(){var e=this;e.links(),e.onlineOffline()},activeLinks:function(t){var a=t.pageSection,n=t.targets;if(popManager.getFetchPageSectionSettings(a).activeLinks){var i=popManager.getTopLevelFeedback()[M.URLPARAM_PARENTPAGEID];i&&n.find(".menu-item-object-id-"+i).each(function(){var t=e(this);t.addClass("active"),t.parents(".menu-item").addClass("active")})}},fullscreen:function(t){var a=t.targets;e(document).bind("fullscreenchange",function(){var t=a.find(".glyphicon");e(document).fullScreen()?t.removeClass("glyphicon-fullscreen").addClass("glyphicon-resize-small"):t.addClass("glyphicon-fullscreen").removeClass("glyphicon-resize-small")}),a.click(function(t){t.preventDefault(),e(this).closest(".pop-fullscreen").toggleFullScreen()})},newWindow:function(e){e.targets.click(function(e){e.preventDefault(),window.open(popManager.getUnembedUrl(window.location.href),"_blank")})},clickURLParam:function(t){var a=getParam(M.URLPARAM_URL);a&&e(document).ready(function(e){popManager.click(decodeURIComponent(a))})},initDelegatorFilter:function(t){var a=this,n=t.pageSection;t.targets.submit(function(t){t.preventDefault();var i=e(this);if(i.data("blocktarget")){var o=e(i.data("blocktarget")),r=popManager.getPageSection(o);popManager.isBlockGroup(o)?a.filterBlockGroup(r,o,i):popManager.filter(r,o,i),popPageSectionManager.close(n,"xs")}})},initBlockFilter:function(t){var a=t.pageSection,n=t.block;t.targets.submit(function(t){t.preventDefault();var i=e(this);i.data("blocktarget")&&(n=e(i.data("blocktarget")),a=popManager.getPageSection(n)),popManager.filter(a,n,i)})},initBlockGroupFilter:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;o.each(function(t){var a=e(this);blocks.each(function(){var t=e(this);popManager.setFilterBlockParams(n,t,a)})}),o.submit(function(t){t.preventDefault();var o=e(this);a.filterBlockGroup(n,i,o)})},reloadBlockGroup:function(e){var t=e.pageSection,a=e.block;e.targets.click(function(e){e.preventDefault();var n=popManager.getBlockGroupActiveBlock(a);popManager.reload(t,n)})},reloadBlock:function(e){var t=e.pageSection,a=e.block;e.targets.click(function(e){e.preventDefault(),popManager.reload(t,a)})},loadLatestBlock:function(e){var t=e.pageSection,a=e.block;e.targets.click(function(e){e.preventDefault(),popManager.loadLatest(t,a)})},timeoutLoadLatestBlock:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.each(function(){var t=e(this),o=t.data("clicktime")||3e4;a.execTimeoutLoadLatestBlock(n,i,t,o)})},displayBlockDatasetCount:function(t){var a=t.pageSection,n=t.block;if(n.data("datasetcount-target")){var i=popManager.getJsSettings(a,n),o=i["display-datasetcount-when"]||["oncreated"],r=i["datasetcount-updatetitle"];o.indexOf("oncreated")>-1&&e(document).ready(function(e){var t=e(n.data("datasetcount-target"));popManager.displayDatasetCount(a,n,t,r)}),o.indexOf("onrendered")>-1&&n.on("rendered",function(t){var i=e(n.data("datasetcount-target"));popManager.displayDatasetCount(a,n,i,r)})}},clearDatasetCount:function(t){var a=this;t.pageSection,t.block;t.targets.each(function(){var t=e(this),n=e(t.data("datasetcount-target")),i=!!t.data("datasetcount-updatetitle");t.click(function(e){e.preventDefault(),a.execClearDatasetCount(n,i)}),t.hover(function(){a.execClearDatasetCount(n,i)})})},clearDatasetCountOnUserLoggedOut:function(t){var a=this;t.pageSection,t.block;t.targets.each(function(){var t=e(this),n=e(t.data("datasetcount-target")),i=!!t.data("datasetcount-updatetitle");e(document).on("user:loggedout",function(e){a.execClearDatasetCount(n,i)})})},onDestroyPageSwitchTab:function(t){var a=this;t.pageSection;t.targets.each(function(){var t=e(this);popManager.getPageSectionPage(t).on("destroy",function(){a.switchTab(t)})})},addOpenTab:function(t){var a=this,n=t.pageSection,i=t.targets;!1!==t.addOpenTab&&i.each(function(){var t=e(this),i=a.getDestroyPageTabParams(n,t);popManager.addOpenTab(i.url,i.target)})},closePageTab:function(t){var a=this,n=t.pageSection;t.targets.click(function(t){t.preventDefault();var i=e(this),o=a.getDestroyPageTabParams(n,i);popManager.triggerDestroyTarget(o.url,o.target)})},resetOnSuccess:function(t){var a=t.pageSection,n=t.targets,i=popManager.getSettingsId(a);n.on("fetched",function(t,n){var o=e(this),r=popManager.getSettingsId(o);!0===n.feedback.block[i][r].result&&popManager.reset(a,o,{"skip-restore":!0})})},resetOnUserLogout:function(t){var a=t.pageSection,n=t.targets;e(document).on("user:loggedout",function(t,i){n.each(function(){var t=e("#"+e(this).attr("id"));t.length&&popManager.reset(a,t)})})},destroyPageOnSuccess:function(t){var a=t.pageSection,n=t.targets,i=popManager.getSettingsId(a);n.on("fetched",function(t,n){var o=e(this),r=popManager.getSettingsId(o),s=n.feedback.block[i][r],l=popManager.getFrameTarget(a);if(!0===s.result){var c=o.data("destroytime")||0;setTimeout(function(){popManager.triggerDestroyTarget(o.data("paramsscope-url"),l)},c)}})},destroyPageOnUserLoggedOut:function(e){var t=this,a=e.pageSection,n=e.targets;a.one("completed",function(){t.execDestroyPageOnUserLoggedOut(n)})},destroyPageOnUserNoRole:function(e){var t=this,a=e.pageSection,n=e.targets;a.one("completed",function(){t.execDestroyPageOnUserNoRole(a,n)})},refetchBlockOnUserLoggedIn:function(t){var a=this,n=t.pageSection,i=t.targets;e(document).one("user:loggedin",function(e,t){"initialfeedback"!=t&&a.execRefetchBlock(n,i)})},nonendingRefetchBlockOnUserLoggedIn:function(e){var t=this,a=e.pageSection,n=e.targets;t.execNonendingRefetchBlockOnUserEvent(a,n,"user:loggedin")},nonendingRefetchBlockOnUserLoggedInOut:function(e){var t=this,a=e.pageSection,n=e.targets;t.execNonendingRefetchBlockOnUserEvent(a,n,"user:loggedinout")},deleteBlockFeedbackValueOnUserLoggedInOut:function(t){var a=t.pageSection,n=t.block;e(document).on("user:loggedinout",function(t,o){if("initialfeedback"!=o&&"initialuserdata"!=o){var r=popManager.getJsSettings(a,n)["user:loggedinout-deletefeedbackvalue"]||[];if(r.length){var s=popManager.getBlockFeedback(a,n);e.each(r,function(e,t){var a=s;for(i=0;i<t.length-1;i++)a=a[t[i]];delete a[t[t.length-1]]})}}})},scrollTopOnUserLoggedInOut:function(t){var a=t.pageSection,n=t.block,i=t.targets;e(document).on("user:loggedinout",function(t,o){"initialfeedback"!=o&&"initialuserdata"!=o&&i.each(function(){var t=e(this);if(e("#"+t.attr("id")).length){var i=popManager.getJsSettings(a,n,t)["scrolltop-animate"]||!1;popManager.scrollToElem(t,t,i)}})})},refetchBlockGroupOnUserLoggedIn:function(t){var a=this,n=t.pageSection,i=t.targets;e(document).one("user:loggedin",function(t,o){"initialfeedback"!=o&&i.each(function(){var t=e("#"+e(this).attr("id"));if(t.length){var i=popManager.getBlockGroupBlocks(t),o=popManager.getBlockGroupActiveBlock(t);i.each(function(){var t=e(this);t.attr("id")==o.attr("id")?a.refetchBlock(n,t):a.makeOneTimeRefetch(n,t)})}})})},closeMessageFeedbacksOnPageSectionOpen:function(e){var t=e.pageSection;e.targets;popPageSectionManager.getGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":opened",function(){popManager.closeMessageFeedbacks(t)})},closePageSectionOnSuccess:function(t){var a=this,n=t.pageSection,i=t.targets,o=popManager.getSettingsId(n);i.on("fetched",function(t,i){var r=e(this),s=popManager.getSettingsId(r);if(!0===i.feedback.block[o][s].result){var l=r.data("closetime")||0;a.timeoutClosePageSection(n,l)}})},destroyPage:function(t){var a=t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),i=e(n.data("target"));popManager.destroyPageSectionPage(a,i)})},replicateTopLevel:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultipleTopLevel(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSingleTopLevel(n,t)})},replicatePageSection:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultiplePageSection(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSinglePageSection(n,t)})},closePageSection:function(e){var t=e.pageSection;e.targets.click(function(e){e.preventDefault(),popPageSectionManager.close(t)})},closePageSectionOnTabShown:function(t){var a=t.pageSection;t.targets.each(function(){var t=e(this);popManager.getPageSectionPage(t).on("shown.bs.tabpane",function(){popPageSectionManager.close(a)}),popPageSectionManager.close(a)})},initFilter:function(t){var a=t.pageSection,n=t.block;t.targets.each(function(){var t=e(this);popManager.setFilterBlockParams(a,n,t)})},interceptForm:function(t){t.pageSection;t.targets.click(function(t){t.preventDefault();var a=e(this),n=e(a.data("target")),i=splitParams(a.data("post-data"));e.each(i,function(e,t){n.find('input[name="'+e+'"]').val(t)}),n.submit()})},forms:function(t){var a=t.pageSection,n=t.block,i=t.targets,o=popManager.getSettingsId(a),r=popManager.getSettingsId(n);i.submit(function(t){t.preventDefault();var i=e(this);i.triggerHandler("beforeSubmit"),popManager.fetchBlock(a,n,{type:"POST","post-data":i.serialize()}),popManager.blockScrollTop(a,n)}),n.on("fetched",function(e,t){var s=t.feedback.block[o][r];!0===s.result&&i.triggerHandler("clear"),s["show-msgs"]&&s.msgs&&s.msgs.length&&popManager.scrollToElem(a,n.children(".blocksection-messagefeedback").first(),!0),popManager.maybeRedirect(s)})},clearInput:function(t){t.pageSection;t.targets.each(function(){var t=e(this);t.closest("form").on("clear",function(){t.val("")})})},makeAlwaysRefetchBlock:function(t){var a=this,n=t.pageSection;t.block.on("visible",function(){var t=e(this);a.refetchBlock(n,t)})},getDestroyPageTabParams:function(e,t){return{url:t.data("url")||popManager.getBlock(t).data("paramsscope-url"),target:t.attr("target")||popManager.getFrameTarget(e)}},filterBlockGroup:function(t,a,n){var i=this,o=popManager.getBlockGroupActiveBlock(a);popManager.getBlockGroupBlocks(a).each(function(){var a=e(this);popManager.setFilterBlockParams(t,a,n),a.attr("id")==o.attr("id")?popManager.reload(t,a):i.makeOneTimeRefetch(t,a)})},execClearDatasetCount:function(e,t){e.html("").addClass("hidden"),t&&(document.title=popManager.documentTitle)},execTimeoutLoadLatestBlock:function(t,a,n,i){var o=this,r=popManager.getJsSettings(t,a,n),s={"skip-status":!0,"datasetcount-target":r["datasetcount-target"],"datasetcount-updatetitle":r["datasetcount-updatetitle"]};!(r["only-loggedin"]||!1)||popUserAccount.isLoggedIn()?setTimeout(function(){e("#"+n.attr("id")).length&&(popManager.loadLatest(t,a,s),o.execTimeoutLoadLatestBlock(t,a,n,i))},i):e(document).one("user:loggedin",function(e,r){o.execTimeoutLoadLatestBlock(t,a,n,i)})},timeoutClosePageSection:function(e,t){setTimeout(function(){popPageSectionManager.close(e),popManager.closeMessageFeedbacks(e)},t)},execNonendingRefetchBlockOnUserEvent:function(t,a,n){var i=this;e(document).on(n,function(e,n){"initialfeedback"!=n&&"initialuserdata"!=n&&i.execRefetchBlock(t,a)})},execRefetchBlock:function(t,a){var n=this;a.each(function(){var a=e("#"+e(this).attr("id"));a.length&&n.refetchBlock(t,a)})},execDestroyPageOnUserLoggedOut:function(t){e(document).one("user:loggedout",function(a,n){t.each(function(){var t=e("#"+e(this).attr("id"));if(t.length){var a=popManager.getPageSection(t),n=popManager.getFrameTarget(a);popManager.triggerDestroyTarget(t.data("paramsscope-url"),n)}})})},execDestroyPageOnUserNoRole:function(t,a){var n=this,i=a.data("neededrole");e(document).one("user:updated",function(o,r){if((a=e("#"+a.attr("id"))).length)if(r.roles&&-1==r.roles.indexOf(i)){var s=popManager.getFrameTarget(t);popManager.triggerDestroyTarget(a.data("paramsscope-url"),s)}else n.execDestroyPageOnUserNoRole(t,a)})},switchTab:function(e){if(e.prev("a.pop-pagetab-btn").hasClass("active")){var t=popManager.getPageSectionPage(e),a=t.nextAll(".pop-pagesection-page").first();a.length||(a=t.prevAll(".pop-pagesection-page").first()),a.length&&a.find("a.pop-pagetab-btn").trigger("click")}},replicateMultipleTopLevel:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this),o=i.data("unique-url")||!1;n.execReplicateTopLevel(t,i,!0,o)})},replicateSingleTopLevel:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicateTopLevel(t,i,!1,!1)})},execReplicateTopLevel:function(t,a,n,i){popManager.getMemory();var o=a.data("intercept-url"),r=popManager.getFrameTarget(t),s=popManager.getReplicableMemory(o,r),l=popManager.getTopLevelFeedback();e.each(s.feedback.toplevel,function(t,a){"array"==e.type(a)&&0==a.length||("object"==e.type(a)?(l[t]||(l[t]={}),e.extend(l[t],a)):l[t]=a)});var c=a.data("original-url");n&&(i&&c.indexOf("#")>-1?l[M.UNIQUEID]=c.substr(c.indexOf("#")+1):(popManager.generateUniqueId(),i&&(c=popManager.addUniqueId(c))));var p=a.data("title");l[M.URLPARAM_TITLE]=p,l[M.URLPARAM_PARENTPAGEID]=null,l[M.URLPARAM_URL]=c,popManager.maybeUpdateDocument(t)},replicateMultiplePageSection:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},replicateSinglePageSection:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},execReplicatePageSection:function(t,a){a.data("block-settingsid"),popManager.getSettingsId(t);var n=a.data("templateid"),i=popManager.getMemory(),o=a.data("intercept-url"),r=popManager.getFrameTarget(t),s=popManager.getReplicableMemory(o,r);e.extend(i.feedback.pagesection,s.feedback.pagesection),e.each(s.feedback.block,function(t,a){e.extend(i.feedback.block[t],a),e.extend(i.dataset[t],s.dataset[t]),e.extend(i.params[t],s.params[t])});var l=popManager.getTopLevelFeedback(),c=popManager.getPageSectionFeedback(t),p=popManager.getPageSectionConfiguration(t);c["intercept-urls"][n]||(c["intercept-urls"][n]={}),c["intercept-urls"][n][n]=l[M.URLPARAM_URL],p[M.JS_TEMPLATE]=n;var d={};a.next(".pop-interceptor-blocksettingsids").children().each(function(){var t=e(this),a=t.data("value");a=t.data("value")?[t.data("value")]:[],d[t.data("key")]=a}),p[M.JS_BLOCKSETTINGSIDS]=d,popManager.initPageSectionSettings(t,p);var u={"js-args":{relatedTarget:a},url:l[M.URLPARAM_URL]};popManager.renderPageSection(t,u)},refetchBlock:function(e,t){var a={"post-data":t.data("post-data"),"show-disabled-layer":!0};popManager.refetch(e,t,a)},makeOneTimeRefetch:function(t,a){var n=this;popManager.jsInitialized(a)&&popManager.isContentLoaded(t,a)&&a.one("visible",function(){var a=e(this);n.refetchBlock(t,a)})},linkBlankTarget:function(e){e.attr("target")||e.attr("target","_blank")},maybeaddspinner:function(t,a){var n=!t.hasClass("hidden")&&(M.ADDANCHORSPINNER&&void 0===t.data("addspinner")||t.data("addspinner"));if(n){var i=e('<span class="pop-spinner">'+M.SPINNER+"</span>");t.find("img").length&&i.addClass("spinner-img"),e(document).one("urlfetched:"+escape(a),function(){t.removeClass("loading").children(".pop-spinner").remove()}),t.trigger("blur").addClass("loading").prepend(i)}return n},onlineOffline:function(){var e=this;window.addEventListener("online",e.checkOnlineOffline),window.addEventListener("offline",e.checkOnlineOffline),e.checkOnlineOffline()},checkOnlineOffline:function(){navigator.onLine?e(document.body).addClass("online").removeClass("offline"):e(document.body).addClass("offline").removeClass("online")},links:function(){var t=this,a=new RegExp(/\.(gif|jpg|jpeg|tiff|png)$/i),n=new RegExp(/\.(pdf|css|js|zip|tar|ppt|pptx|doc|docx|xls|xlsx)$/i),i=[];e.each(M.ALLOWED_URLS,function(e,t){i.push('a[href^="'+t+'"]')}),e(document).on("click",i.join(","),function(i){var o=e(this),r=o.attr("href");if(a.test(r)){if(popJSLibraryManager.getLibraries("linksImage").length){i.preventDefault();var s={anchor:o};popJSLibraryManager.execute("linksImage",s)}else t.linkBlankTarget(o)}else if(n.test(r))t.linkBlankTarget(o);else{popCustomBootstrap.resetBubbling();var l=popManager.getPageSection(o),c=o.attr("target")||M.URLPARAM_TARGET_MAIN;if(c==M.URLPARAM_TARGET_FULL)return i.preventDefault(),t.maybeaddspinner(o,r),void(window.location=r);if(c==M.URLPARAM_TARGET_PRINT)return i.preventDefault(),void t.openPrint(r);if(popManager.targetExists(c)){i.preventDefault(),r==M.HOME_URL&&(r=M.HOME_URL+"/");var p=!1,d={},u={};if(o.data("reloadurl"))d.reloadurl=!0;else{u={event:i,relatedTarget:o,target:o.attr("target")||popManager.getClickFrameTarget(l)};var g=r;o.data("append-intercepturl")&&(g+=o.data("append-intercepturl")),p=popURLInterceptors.getInterceptors(g,u).length}if(p)popURLInterceptors.intercept(g,u);else{d.target=c,d["js-args"]={relatedTarget:o};var h=t.maybeaddspinner(o,r)?"":null;void 0!==o.data("loadingmsg-target")&&(h=o.data("loadingmsg-target")),null!=h&&(d["loadingmsg-target"]=h),i.metaKey&&(d.silentDocument=!0,d["js-args"].inactivePane=!0),popManager.fetch(r,d)}}}}),e(document).on("click",'a[target="'+M.URLPARAM_TARGET_SOCIALMEDIA+'"]',function(a){a.preventDefault();var n=e(this).attr("href");t.openSocialMedia(n)}),e(document).on("click",'a[href^="#"]',function(t){var a=e(this),n=a.attr("href");if(n.length>1){var i=e(n),o=void 0!==a.data("toggle")||void 0!==a.data("slide");i.length&&!o&&(t.preventDefault(),popManager.scrollToElem(popManager.getPageSection(i),i,!0))}}),e(document).on("click",'a[href^="http://"],a[href^="https://"]',function(a){var n=e(this),i=n.attr("href"),o=!0;e.each(M.ALLOWED_URLS,function(e,t){if(i.startsWith(t))return o=!1,-1}),o&&t.linkBlankTarget(n)})},openPrint:function(e){window.open(e,"_blank")},openSocialMedia:function(e){window.open(e,"_blank","left=20,top=20,width=500,height=400,toolbar=1,resizable=0")},scrollHandler:function(t){var a=0;t.pageSection.scroll(function(){var t=e(this).scrollTop();Math.abs(a-t)>=200&&(t>a?e(window).triggerHandler("scroll:down"):e(window).triggerHandler("scroll:up"),a=t)})}}}(jQuery),popJSLibraryManager.register(popSystem,["documentInitialized","activeLinks","newWindow","fullscreen","clickURLParam","initDelegatorFilter","initBlockGroupFilter","initBlockFilter","reloadBlockGroup","reloadBlock","loadLatestBlock","timeoutLoadLatestBlock","displayBlockDatasetCount","clearDatasetCount","clearDatasetCountOnUserLoggedOut","replicateTopLevel","replicatePageSection","closePageSection","closePageSectionOnTabShown","onDestroyPageSwitchTab","addOpenTab","closePageTab","resetOnSuccess","resetOnUserLogout","closeMessageFeedbacksOnPageSectionOpen","closePageSectionOnSuccess","destroyPageOnUserLoggedOut","destroyPageOnUserNoRole","refetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedInOut","deleteBlockFeedbackValueOnUserLoggedInOut","scrollTopOnUserLoggedInOut","refetchBlockGroupOnUserLoggedIn","destroyPageOnSuccess","destroyPage","initFilter","interceptForm","forms","clearInput","makeAlwaysRefetchBlock","scrollHandler"]),function(e){popForms={formCreatePostBlock:function(e){var t=this,a=e.pageSection,n=e.block;popManager.getSettingsId(a),popManager.getSettingsId(n);n.one("fetched",function(e,i){t.execFormCreatePostBlock(a,n,i)})},manageStatus:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;t.execManageStatus(i);var o=popManager.getSettingsId(a),r=popManager.getSettingsId(n);n.on("fetched",function(e,a){!0===a.feedback.block[o][r].result&&t.execManageStatus(i)})},execFormCreatePostBlock:function(e,t,a){var n=this,i=popManager.getSettingsId(e),o=popManager.getSettingsId(t);!0===a.feedback.block[i][o].result?popSystem.execDestroyPageOnUserLoggedOut(t):t.one("fetched",function(a,i){n.execFormCreatePostBlock(e,t,i)})},execManageStatus:function(t){t.each(function(){var t=e(this);t.val()==M.POSTSTATUS.PUBLISH?(t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled",!1)):(t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled",!1))})}}}(jQuery),popJSLibraryManager.register(popForms,["formCreatePostBlock","manageStatus"]),function(e){popEditor={editor:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;i.one("rerender",function(e){a.destroy(o)}),popManager.getPageSectionPage(i).one("destroy",function(){a.destroy(o)}),o.each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id");t.closest("form").on("beforeSubmit",function(){tinymce.get(a)&&tinymce.get(a).save()})}),o.filter(".pop-editor-form-clear").each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id");t.closest("form").on("clear",function(){tinymce.get(a)&&tinymce.get(a).setContent("")})}),!POP_CACHED_SETTINGS&&popManager.isFirstLoad(n)||e(document).ready(function(e){o.each(function(){var t=e(this).find(".pop-editor"),a=t.attr("id"),n=tinyMCEPreInit.mceInit[M.TEMPLATE_EDITOR_NAME];t.hasClass("pop-editor-autofocus")&&(n=e.extend({},n,{auto_focus:a})),tinyMCE.init(n),tinymce.execCommand("mceAddEditor",!0,a);var i=e.extend({},tinyMCEPreInit.qtInit[M.TEMPLATE_EDITOR_NAME],{id:a});quicktags(i),window.wpActiveEditor||(window.wpActiveEditor=a),"undefined"!=typeof jQuery?t.closest(".wp-editor-wrap").on("click.wp-editor",function(){this.id&&(window.wpActiveEditor=this.id.slice(3,-5))}):document.getElementById("wp-"+a+"-wrap").onclick=function(){window.wpActiveEditor=this.id.slice(3,-5)}})})},destroy:function(t){t.each(function(){var t=e(this).find(".pop-editor").attr("id");tinymce.execCommand("mceRemoveEditor",!1,t)})}}}(jQuery),popJSLibraryManager.register(popEditor,["editor"]),function(e){popMentions={previousData:{},documentInitialized:function(){this.prefetch()},prefetch:function(){var t=this;e.each(M.MENTIONS.TYPES,function(e,a){t.fetchData(e,a.baseline)})},fetchData:function(t,a,n){var i=this,o=popManager.getStoredData(a);o?i.processData(t,o,n):e.getJSON(a,function(e){popManager.storeData(a,e,864e5),i.processData(t,e,n)})},processData:function(e,t,a){this.previousData[e]=t,a&&a(t)},source:function(e,t,a){var n=this;if(M.MENTIONS.TYPES[a]){var i;if(i=e?M.MENTIONS.TYPES[a].url.replace(M.MENTIONS.QUERYWILDCARD,e):M.MENTIONS.TYPES[a].baseline){var o={url:i,delimiter:a,query:e};popJSLibraryManager.execute("mentionsSource",o),i=o.url,t(n.previousData[a]||[]),n.fetchData(a,i,t)}}},render:function(e){var t=this.infereDelimiter(e);return'<li><a href="javascript:;"><span>'+popManager.getHtml(M.MENTIONS.TYPES[t].template,e)+"</span></a></li>"},insert:function(e){var t=this.infereDelimiter(e);return"<span>"+t+e[M.MENTIONS.TYPES[t].key]+"</span>&nbsp;"},infereDelimiter:function(t){var a="";return e.each(M.MENTIONS.TYPES,function(e,n){if(void 0!==t[n.key])return a=e,-1}),a}}}(jQuery),popJSLibraryManager.register(popMentions,["documentInitialized"]),function(e){popFeaturedImage={frame:null,documentInitialized:function(){var t=this;t.frame=wp.media({title:M.LABELS.MEDIA_FEATUREDIMAGE_TITLE,multiple:!1,library:{type:"image"},button:{text:M.LABELS.MEDIA_FEATUREDIMAGE_BTN}}),t.frame.on("open",function(){var a=e(".pop-featuredimage.open").find('input[type="hidden"]');if(a.val()){var n=t.frame.state().get("selection");attachment=wp.media.attachment(a.val()),attachment.fetch(),n.add(attachment?[attachment]:[])}}),t.frame.on("close",function(){var a=e(".pop-featuredimage.open"),n=t.frame.state().get("selection");if(n.length){var i,o,r=a.data("img-size");n.map(function(e){var t=(e=e.toJSON()).sizes[r]||e.sizes.medium||e.sizes.thumbnail;i=e.id,o={src:t.url,width:t.width,height:t.height}});var s=popManager.getBlock(a),l=popManager.getPageSection(s);t.merge(l,s,a,i,o)}a.removeClass("open")})},featuredImageSet:function(t){var a=this;t.pageSection,t.block;t.targets.click(function(t){t.preventDefault(),e(this).closest(".pop-featuredimage").addClass("open"),a.frame.open()})},featuredImageRemove:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this).closest(".pop-featuredimage");a.remove(n,i,o)})},merge:function(e,t,a,n,i){var o={extendContext:{value:n,img:i}},r=a.data("merge-template");popJSRuntimeManager.setBlockURL(t.data("toplevel-url")),popManager.mergeTargetTemplate(e,t,r,o),popManager.runJSMethods(e,t,r,"full")},remove:function(e,t,a){this.merge(e,t,a,"","")}}}(jQuery),popJSLibraryManager.register(popFeaturedImage,["documentInitialized","featuredImageSet","featuredImageRemove"]),function(e){popTabs={documentInitialized:function(t){var a=!1,n=popManager.getTabsCurrentURL(),i=popManager.getScreenOpenTabs();if(e.each(i,function(e,t){if(t.length>1||e!=M.URLPARAM_TARGET_MAIN&&t.length||e==M.URLPARAM_TARGET_MAIN&&t[0]!=n)return a=!0,-1}),a)if(e.cookie("opentabs"))"true"==e.cookie("opentabs")?popManager.openTabs():popManager.keepScreenOpenTab(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);else{var o=e("#"+M.IDS_APPSTATUS),r="popTabs.keepScreenOpenTab('{0}', '{1}')".format(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);o.prepend(M.TABS_REOPENMSG.format("popTabs.openTabs()",r))}},saveCookie:function(t){e("#"+M.IDS_TABS_REMEMBERCHECKBOX).attr("checked")&&e.cookie("opentabs",t,{expires:365,path:"/"})},openTabs:function(){this.saveCookie("true"),popManager.openTabs()},keepScreenOpenTab:function(e,t){this.saveCookie("false"),popManager.keepScreenOpenTab(e,t)}}}(jQuery),popJSLibraryManager.register(popTabs,["documentInitialized"]),function(e){popUserAccount={initialuserdata:!1,loggedin:!1,id:null,name:"",avatar:"",url:"",roles:[],userattributes:[],documentInitialized:function(){var e=this;e.checkpointInvalidateBlocks(),e.initialuserdata&&e.fetchLoggedInUserData()},pageSectionInitialized:function(e){var t=this;e.pageSection.on("fetched",function(e,a,n){t.feedbackLoginOut(!1)})},blockInitialized:function(e){var t=this;e.pageSection;e.block.on("fetched",function(e){t.feedbackLoginOut(!1)})},loadAvatar:function(e){var t=this;e.targets.attr("src",t.avatar)},initialLogin:function(){var e=this;feedbackAvailable=e.feedbackLoginOut(!0),e.initialuserdata=!feedbackAvailable},fetchLoggedInUserData:function(e){(e=e||{})["loadingmsg-target"]=M.USERLOGGEDIN_LOADINGMSG_TARGET,e.silentDocument=!0,popManager.fetch(M.USERLOGGEDIN_DATA_PAGEURL,e)},isLoggedIn:function(){return this.loggedin},updateUserInfo:function(t,a,n,i,o,r){var s=this,l={};s.name!=a&&(s.name=a,e(".pop-user-name").text(s.name),l.name=s.name),s.id==t&&s.avatar==n||(s.id=t,s.avatar=n,e(".pop-user-avatar").attr("src",s.avatar),l.avatar=s.avatar),s.url!=i&&(s.url=i,e(".pop-user-url").attr("href",s.url),l.url=s.url),0===e(s.roles).not(o).length&&0===e(o).not(s.roles).length||(s.roles=o,e.each(M.ROLES,function(t,a){e(document.body).removeClass(a)}),e.each(s.roles,function(t,a){e(document.body).addClass(a)}),l.roles=s.roles),0===e(s.userattributes).not(r).length&&0===e(r).not(s.userattributes).length||(s.userattributes=r,e.each(M.USERATTRIBUTES,function(t,a){e(document.body).removeClass(a)}),e.each(s.userattributes,function(t,a){e(document.body).addClass(a)}),l.userattributes=s.userattributes),e.isEmptyObject(l)||(l.id=t,e(document).triggerHandler("user:updated",[l]))},loginout:function(t,a,n,i,o,r,s,l){var c=this;if(c.updateUserInfo(n,i,o,r,s,l),c.loggedin!=a){c.loggedin=a;var i,p=e(document.body);c.loggedin?(p.data("loggedinuser-id",n).addClass("loggedin user-"+n),i="user:loggedin"):(p.removeClass("loggedin").removeClass("user-"+p.data("loggedinuser-id")).data("loggedinuser-id",""),i="user:loggedout"),"initialfeedback"!=t&&c.closeCheckpointMessages(),e(document).triggerHandler(i,[t]),e(document).triggerHandler("user:loggedinout",[t])}},feedbackLoginOut:function(e){var t=this,a=popManager.getTopLevelFeedback()[M.DATALOAD_USER];if(void 0!==a){var n,i,o,r,s;n=a[M.DATALOAD_USER_LOGGEDIN],i=a[M.DATALOAD_USER_ID],o=a[M.DATALOAD_USER_NAME],r=a[M.DATALOAD_USER_AVATAR],s=a[M.DATALOAD_USER_URL],roles=a[M.DATALOAD_USER_ROLES],userattributes=a[M.DATALOAD_USER_ATTRIBUTES];var l="feedback";return e?l="initialfeedback":t.initialuserdata&&(l="initialuserdata",t.initialuserdata=!1),t.loginout(l,n,i,o,r,s,roles,userattributes),!0}return!1},checkpointInvalidateBlocks:function(){var t=this;e(document).on("user:loggedin",function(e,a){"initialfeedback"!=a&&"initialuserdata"!=a&&t.closeCheckpointMessages()})},closeCheckpointMessages:function(){jQuery(document).ready(function(e){e(".alert.in.pop-messagefeedback.checkpoint").removeClass("fade").alert("close")})}}}(jQuery),popJSLibraryManager.register(popUserAccount,["documentInitialized","pageSectionInitialized","blockInitialized","loadAvatar"]),function(e){popWaypoints={waypointsHistoryStateNew:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=t.getOptions(a,i),r=new Waypoint({element:i,handler:function(t){var a=this.element;popManager.isHidden(a)||"up"==t&&popManager.historyReplaceState(e(this))},context:o.context,offset:"bottom-in-view"}),s=new Waypoint({element:i,handler:function(t){var a=this.element;popManager.isHidden(a)||"down"==t&&popManager.historyReplaceState(e(this))},context:o.context});t.destroy(a,n,r),t.destroy(a,n,s)})})},waypointsHistoryStateOriginal:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=t.getOptions(a,i),r=new Waypoint({element:i,handler:function(e){var t=this.element;popManager.isHidden(t)||"up"==e&&popManager.historyReplaceState(t)},context:o.context});t.destroy(a,n,r)})})},waypointsToggleClass:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=e(i.data("target")),r=i.data("class");if(o.length&&r){var s=t.getOptions(a,i),l=new Waypoint({element:i,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?o.addClass(r):"up"==e&&o.removeClass(r))},context:s.context,offset:s.context?0:function(){return t.getOffset(this.element)}});t.destroy(a,n,l)}})})},waypointsToggleCollapse:function(e){var t=this,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),n=e(a.data("collapse-target"));if(n.length){var i=popManager.getBlock(n),o=popManager.getBlock(i);t.execWaypointsToggleCollapse(o,i,n,a)}})})},waypointsTheater:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){i.each(function(){var i=e(this),o=t.getOptions(a,i),r=new Waypoint({element:i,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?popPageSectionManager.theater(!0):"up"==e&&popPageSectionManager.theater(!1))},context:o.context,offset:o.context?0:function(){return t.getOffset(this.element)}});t.destroy(a,n,r)})})},waypointsFetchMore:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;jQuery(document).ready(function(e){var o=[],r=popManager.isContentLoaded(a,n);i.each(function(){var i=e(this),s=t.getOptions(a,i),l=new Waypoint({element:i,handler:function(e){var t=this.element;if("down"==e){if(popManager.isHidden(t))return;t.trigger("click")}},context:s.context,enabled:r,offset:"bottom-in-view"});t.destroy(a,n,l),o.push(l)}),n.on("fetchCompleted",function(n){var i=e(this);popManager.getBlockParams(a,i)[M.URLPARAM_STOPFETCHING]?e.each(o,function(e,n){n.enabled&&(n.disable(),t.reEnable(a,i,n))}):e.each(o,function(e,t){t.enabled||t.enable(),t.context.refresh()})})})},reEnable:function(e,t,a){var n=this;t.one("beforeReload",function(){t.one("fetchCompleted",function(){popManager.getBlockParams(e,t)[M.URLPARAM_STOPFETCHING]?n.reEnable(e,t,a):a.enable()})})},execWaypointsToggleCollapse:function(e,t,a,n){var i=this,o=i.getOptions(e,a),r=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?n.collapse("show"):"up"==e&&n.collapse("hide"))},context:o.context});i.destroy(e,t,r)},getOptions:function(e,t){var a={},n=e.filter(".pop-waypoints-context");return n.length?a.context=n:(n=t.closest(".pop-waypoints-context")).length&&(a.context=n),a},getOffset:function(e){return popManager.getPageSection(e).offset().top},destroy:function(e,t,a){popManager.getPageSectionPage(t).one("destroy",function(){a.destroy()})}}}(jQuery),popJSLibraryManager.register(popWaypoints,["waypointsFetchMore","waypointsToggleClass","waypointsToggleCollapse","waypointsTheater","waypointsHistoryStateOriginal","waypointsHistoryStateNew"]),function(e){popWindow={windowSize:function(t){var a=this;t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),i=e(n.data("target"));if(i.length){var o=n.data("toggle");"window-fullsize"==o?a.fullsize(i):"window-maximize"==o?a.maximize(i):"window-minimize"==o&&a.minimize(i)}})},getSize:function(e){return e.hasClass("fullsize")?"fullsize":e.hasClass("maximized")?"maximized":e.hasClass("minimized")?"minimized":null},fullsize:function(e){e.removeClass("maximized minimized").addClass("fullsize"),e.triggerHandler("fullsize.bs.window")},maximize:function(e){e.removeClass("fullsize minimized").addClass("maximized"),e.triggerHandler("maximized.bs.window")},minimize:function(e){e.removeClass("fullsize maximized").addClass("minimized"),e.triggerHandler("minimized.bs.window")}}}(jQuery),popJSLibraryManager.register(popWindow,["windowSize"]),function(e){popMultiselect={multiselect:function(t){t.pageSection;var a=t.block,n=t.targets;popManager.getPageSectionPage(a).one("destroy",function(){n.multiselect("destroy")});var i={buttonClass:"btn btn-default",buttonContainer:'<div class="btn-group multiselect-btn-group" />',enableHTML:!0,nonSelectedText:M.MULTISELECT_NONSELECTEDTEXT,nSelectedText:M.MULTISELECT_NSELECTEDTEXT,allSelectedText:M.MULTISELECT_ALLSELECTEDTEXT};n.each(function(){var t=e(this),a=e.extend({},i);t.attr("title")&&(a.nonSelectedText=t.attr("title")),t.hasClass("input-sm")&&(a.buttonClass+=" btn-sm"),t.hasClass("input-lg")&&(a.buttonClass+=" btn-lg"),t.multiselect(a)})}}}(jQuery),popJSLibraryManager.register(popMultiselect,["multiselect"]),function(e){popDynamicMaxHeight={dynamicMaxHeight:function(e){e.targets.dynamicMaxHeight()}}}(jQuery),popJSLibraryManager.register(popDynamicMaxHeight,["dynamicMaxHeight"]),function(e){popDateRange={dateRange:function(t){var a=this,n=t.pageSection,i=(t.block,t.targets),o=M.DATERANGE_FORMAT||"DD/MM/YYYY",r={autoUpdateInput:!1,autoApply:!0,linkedCalendars:!0,showWeekNumbers:!1,timePicker:!1,buttonClasses:["btn"],applyClass:"btn-success",cancelClass:"btn-warning",format:o,separator:M.DATERANGE_SEPARATOR,locale:{applyLabel:M.DATERANGE_APPLY,cancelLabel:M.DATERANGE_CANCEL,fromLabel:M.DATERANGE_FROM,toLabel:M.DATERANGE_TO,customRangeLabel:M.DATERANGE_CUSTOMRANGE,daysOfWeek:M.DATERANGE_DAYSOFWEEK,monthNames:M.DATERANGE_MONTHNAMES,firstDay:1}},s={maxDate:moment().add(1,"days")},l={minDate:moment().subtract(1,"days")},c={opens:"right"},p={opens:"left"};i.each(function(){var t=e(this),i=t.hasClass("opens-left")?p:c,d={parentEl:"#"+popManager.getDOMContainer(n,t).attr("id")},u=e.extend({},r,i,d);if(t.hasClass("daterange-future")&&!t.hasClass("daterange-past")?e.extend(u,l):t.hasClass("daterange-past")&&!t.hasClass("daterange-future")&&e.extend(u,s),t.hasClass("timepicker")){var g=M.DATERANGE_TIMEFORMAT||"h:mm A";u.locale.format=o+" "+g;var h={autoApply:!1,timePicker:!0,timePicker24Hour:"h:mm A"!=g,timePickerIncrement:15};e.extend(u,h)}t.on("apply.daterangepicker",function(t,a){e(this).val(a.startDate.format(a.locale.format)+" - "+a.endDate.format(a.locale.format))}),t.daterangepicker(u,a.callback)})},callback:function(e,t){var a=this.element;a.siblings(".from").val(e.format("YYYY-MM-DD")),a.siblings(".to").val(t.format("YYYY-MM-DD")),a.siblings(".fromtime").length&&(a.siblings(".fromtime").val(e.format("HH:mm")),a.siblings(".totime").val(t.format("HH:mm")))}}}(jQuery),popJSLibraryManager.register(popDateRange,["dateRange"]),function(e){popTypeahead={typeaheadSearchBtn:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.click(function(){var t=e(this).closest(".pop-typeahead");a.executeTypeaheadSearch(n,i,t)})},typeaheadSearchInput:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.keypress(function(t){if(13==event.which){event.preventDefault();var o=e(this).closest(".pop-typeahead");o.find('input[type="text"].tt-input').typeahead("close"),a.executeTypeaheadSearch(n,i,o)}})},fillTypeahead:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.each(function(){var t=e(this),o=t.data("urlparam");if(o){var r=i.data("paramsscope-url"),s=getParam(o,r);if(s){var l=t.data("database-key");e.each(s,function(e,o){var r=popManager.getItemObject(l,o);a.selectTypeahead(n,i,t,r)}),popBootstrap.execOpenParentCollapse(t)}}})},selectDatum:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this),r=e(o.data("target")),s=o.data("objectid"),l=o.data("db-key"),c=popManager.getItemObject(l,s);a.selectTypeahead(n,i,r,c)})},selectableTypeahead:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;a.typeahead(n,i,o),o.each(function(){var t=e(this);a.validateMaxSelected(n,i,t),t.bind("typeahead:selected",function(t,o,r){var s=e(this);a.selectTypeahead(n,i,s,o)})})},fetchlinkTypeahead:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;a.typeahead(n,i,o),o.each(function(){e(this).bind("typeahead:selected",function(t,a,n){var i=e(this).closest(".pop-typeahead");popManager.click(a.url,"",i)})})},selectableTypeaheadTrigger:function(t){var a=this;t.pageSection,t.block;t.targets.on("close.bs.alert",function(){var t=e(this),n=t.closest(".pop-typeahead"),i=a.getElementsToDisable(n);i.attr("disabled",!1),i.removeClass("disabled");var o=t.children('input[type="hidden"]').val();n.triggerHandler("close",[t,o])})},selectTypeahead:function(e,t,a,n){var i=this,o=a.find('input[type="text"].tt-input');i.triggerSelect(e,t,a,n),o.typeahead("val","")},executeTypeaheadSearch:function(e,t,a){var n=a.find('input[type="text"].tt-input'),i=popManager.getQueryUrl(e,t);n.typeahead("val")&&(i=i.replace(M.JSPLACEHOLDER_QUERY,n.typeahead("val")),popManager.click(i,"",a))},getElementsToDisable:function(e){return e.children("div.pop-operation").find("a, button, input")},typeahead:function(t,a,n){var i=this;popManager.getPageSectionPage(a).one("destroy",function(){i.destroy(n)}),a.one("rerender",function(e){i.destroy(n)}),n.each(function(){var n=e(this),i=n.find('input[type="text"]'),o=popManager.getJsSettings(t,a,n),r=[];e.each(o["dataset-components"],function(e,n){var i=popManager.getJsSettings(t,a,n);r.push(i.dataset)}),e.each(r,function(e,t){var a=t.layout;t.template=popManager.getScriptTemplate(a);var n={};t.prefetch&&(n.url=t.prefetch,popJSLibraryManager.execute("typeaheadPrefetchURL",n),t.prefetch=n.url),t.remote&&(n.url=t.remote,popJSLibraryManager.execute("typeaheadRemoteURL",n),t.remote=n.url)});var s=[],l=[];e.each(r,function(t,a){var n=a.limit;r.length>1&&n>3&&(n=3);var i={datumTokenizer:function(t){var n=[];return e.each(a.tokenizerKeys,function(e,a){n=n.concat(Bloodhound.tokenizers.whitespace(t[a]))}),n},queryTokenizer:Bloodhound.tokenizers.whitespace};a.local&&(i.local=a.local),a.prefetch&&(i.prefetch={url:a.prefetch,thumbprint:a.thumbprint}),a.remote&&(i.remote={url:a.remote,wildcard:M.JSPLACEHOLDER_QUERY});var o=new Bloodhound(i);s.push(o);var c;c=a.staticSuggestions?function(t,n){var i=[];e.each(a.staticSuggestions,function(a,n){var o={};e.each(n,function(e,a){"string"==typeof a&&(a=a.replace(M.JSPLACEHOLDER_QUERY,t)),o[e]=a}),i.push(o)}),n(i)}:o.ttAdapter(),l.push({source:c,name:a.name,display:a.valueKey,limit:n,templates:{suggestion:a.template,header:a.header,pending:a.pending,notFound:a.notFound}})}),e.each(s,function(e,t){t.initialize()}),1==l.length?i.typeahead({highlight:!0},l[0]):2==l.length?i.typeahead({highlight:!0},l[0],l[1]):3==l.length?i.typeahead({highlight:!0},l[0],l[1],l[2]):4==l.length&&i.typeahead({highlight:!0},l[0],l[1],l[2],l[3])})},triggerSelect:function(t,a,n,i){var o=this;if(0==n.find('input[type="hidden"][value="'+i.id+'"]').length){var r=popManager.getJsSettings(t,a,n),s=r["trigger-layout"],l=(popManager.getSettingsId(t),popManager.getSettingsId(a),{extendContext:e.extend({itemObject:i},r["datum-context"])});popJSRuntimeManager.setBlockURL(a.data("toplevel-url"));var c=popManager.getTemplateHtml(t,a,s,l);popManager.mergeHtml(c,n.find(".pop-box")),popManager.runJSMethods(t,a,s,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(t,a,s),o.validateMaxSelected(t,a,n),n.triggerHandler("selected",[i])}},validateMaxSelected:function(e,t,a){var n=this;if(a.data("max-selected")&&a.find('input[type="hidden"]').length==a.data("max-selected")){var i=n.getElementsToDisable(a);i.attr("disabled","disabled"),i.addClass("disabled")}},removeSelected:function(e,t){e.find('input[type="hidden"][value="'+t+'"]').closest(".alert").alert("close")},destroy:function(e){e.find('input[type="text"].tt-input').typeahead("destroy")}}}(jQuery),popJSLibraryManager.register(popTypeahead,["selectableTypeahead","fillTypeahead","selectDatum","fetchlinkTypeahead","selectableTypeaheadTrigger","typeaheadSearchBtn","typeaheadSearchInput"]),function(e){popGA={documentInitialized:function(){var e=e||[];e.push(["_setAccount",M.GOOGLEANALYTICS]),e.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},replaceState:function(e){_gaq.push(["_trackPageview"])}}}(jQuery),popJSLibraryManager.register(popGA,["documentInitialized","replaceState"]),function(e){popPerfectScrollbar={scrollbarHorizontal:function(e){e.pageSection;var t=e.targets;jQuery(document).ready(function(e){t.perfectScrollbar({suppressScrollY:!0})})},scrollbarVertical:function(e){e.pageSection;var t=e.targets;jQuery(document).ready(function(e){t.perfectScrollbar({suppressScrollX:!0})})},getPosition:function(e){var t=e.elem.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(t.length){var a=t.children(".perfect-scrollbar-offsetreference");if(a.length)return-1*a.position().top}return 0},doScroll:function(e,t,a){a?e.animate({scrollTop:t}):e.scrollTop(t),e.perfectScrollbar("update")},scrollToElem:function(e){var t=this,a=e.elem,n=e.position,i=e.animate,o=a.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(o.length){var r=0;if(n){var s=o.children(".perfect-scrollbar-offsetreference");s.length||(s=a),r=n.offset().top-s.offset().top}return t.doScroll(o,r,i),!0}return!1},scrollTop:function(e){var t=this,a=e.elem,n=e.top,i=e.animate;n=n||0;var o=a.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");return!!o.length&&(t.doScroll(o,n,i),!0)}}}(jQuery),popJSLibraryManager.register(popPerfectScrollbar,["scrollbarHorizontal","scrollbarVertical","getPosition","scrollToElem","scrollTop"]),function(e){popFunctions={expandJSKeys:function(e){var t=e.context;t[M.JS_FONTAWESOME]&&(t.fontawesome=t[M.JS_FONTAWESOME]),t[M.JS_DESCRIPTION]&&(t.description=t[M.JS_DESCRIPTION])},beep:function(e){beep()},showmore:function(t){var a=t.targets;a.find(".pop-showmore-more").click(function(t){t.preventDefault();var a=e(this).closest(".pop-content");a.find(".pop-showmore-more").addClass("hidden"),a.find(".pop-showmore-less").removeClass("hidden"),a.find(".pop-showmore-more-full").removeClass("hidden")}),a.find(".pop-showmore-less").click(function(t){t.preventDefault();var a=e(this).closest(".pop-content");a.find(".pop-showmore-less").addClass("hidden"),a.find(".pop-showmore-more").removeClass("hidden"),a.find(".pop-showmore-more-full").addClass("hidden")})},hideEmpty:function(e){e.targets.closest(".pop-hide-empty").addClass("hidden")},imageResponsive:function(e){e.targets.find("div.pop-content").addBack("div.pop-content").find("img, .wp-caption").addClass("img-responsive")},printWindow:function(e){getParam(M.URLPARAM_ACTION,window.location.href)==M.URLPARAM_ACTION_PRINT&&jQuery(document).ready(function(e){window.print()})},copyHeader:function(e){var t=e.targets,a=e.relatedTarget;if(a){var n=(a=popManager.getOriginalLink(a)).data("header");n&&t.find(".pop-header").removeClass("hidden").find(".pop-box").html(n)}},fillURLParamInput:function(t){var a=this,n=t.block;t.targets.each(function(){var t=e(this),i=a.getURLParamInputValue(n,t);t.val(i)})},fillAddonInput:function(t){var a=this,n=t.targets,i=t.relatedTarget;i&&n.each(function(){var t=e(this);a.fillInput(t,i)})},fillModalInput:function(t){var a=this;t.targets.each(function(){var t=e(this);t.closest(".modal").on("show.bs.modal",function(n){var i=e(n.relatedTarget);a.fillInput(t,i)})})},fillAddonURLInput:function(t){var a=this,n=t.targets,i=t.relatedTarget;i&&n.each(function(){var t=e(this);a.fillURLInput(t,i)})},fillModalURLInput:function(t){var a=this;t.targets.each(function(){var t=e(this);t.closest(".modal").on("show.bs.modal",function(n){var i=e(n.relatedTarget);a.fillURLInput(t,i)})})},switchTargetClass:function(t){t.targets.click(function(t){var a=e(this);a.is('a[href="#"]')&&t.preventDefault();var n=e(a.data("target"))||e(document.body),i=a.data("mode")||"add",o=a.data("class");"add"==i?n.addClass(o):"remove"==i?n.removeClass(o):"toggle"==i&&n.toggleClass(o)})},doNothing:function(e){e.targets.click(function(e){e.preventDefault()})},fetchMore:function(e){var t=e.pageSection,a=e.block,n=e.targets;a.on("beforeFetch",function(e,t){t["skip-status"]||n.button("loading")}),a.on("fetchCompleted",function(e){popManager.getBlockParams(t,a)[M.URLPARAM_STOPFETCHING]?n.addClass("hidden"):(n.removeClass("hidden"),n.button("reset"))}),n.click(function(e){e.preventDefault(),popManager.fetchBlock(t,a,{operation:M.URLPARAM_OPERATION_APPEND})})},fetchMoreDisable:function(e){var t=e.block,a=e.targets;t.on("beforeFetch",function(e,t){t["skip-status"]||a.addClass("disabled").attr("disabled","disabled")}),t.on("fetchCompleted",function(e){a.removeClass("disabled").attr("disabled",!1)})},saveLastClicked:function(t){t.pageSection;var a=t.block;t.targets.click(function(t){var n=e(this);a.find('[data-action="retry"]').data("lastclicked","#"+n.attr("id")).removeClass("hidden")})},retrySendRequest:function(t){t.pageSection,t.block;t.targets.click(function(t){t.preventDefault();var a=e(this);a.data("lastclicked")&&e(a.data("lastclicked")).trigger("click")})},highlight:function(t){t.targets.each(function(){var t=e(this),a=popManager.getPageSection(t);popManager.scrollToElem(a,t,!0)})},modalReloadEmbedPreview:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=popManager.getBlock(t),o=popManager.getJsSettings(n,i,t)["url-type"]||"embed";i.closest(".modal").on("show.bs.modal",function(r){i.data("embed-iframe")&&(t=e(i.data("embed-iframe")));var s=e(r.relatedTarget),l=a.getUrl(s,!0);"embed"==o?l=popManager.getEmbedUrl(l):"api"==o&&(l=popManager.getAPIUrl(l)),a.embedPreview(n,i,t,l)})})},reloadEmbedPreview:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.each(function(){var t=e(this);e(t.data("input-target")).change(function(){e(this);a.embedPreviewFromInput(n,i,t)}),a.embedPreviewFromInput(n,i,t)})},replaceCode:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=popManager.getBlock(t),o=popManager.getJsSettings(n,i,t)["url-type"]||"";t.closest(".modal").on("show.bs.modal",function(n){var i=e(n.relatedTarget),r=a.getUrl(i);"embed"==o?r=popManager.getEmbedUrl(r):"api"==o&&(r=popManager.getAPIUrl(r)),a.execReplaceCode(t,r)})})},socialmedia:function(t){t.targets.one("mouseenter",function(){e(this).children("a.socialmedia-item").each(function(){var t=e(this),a=t.data("provider");if(a){var n=M.SOCIALMEDIA[a];n&&e.ajax({type:"GET",dataType:n.dataType,url:n["counter-url"].replace("%s",t.data("url")),success:function(e){if(e.hasOwnProperty(n.property)){var a=e[n.property];0!=a&&t.children(".pop-counter").html(a)}}})}})})},mediaplayer:function(e){e.targets.mediaelementplayer()},reset:function(t){var a=t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),i=popManager.getBlock(n);popManager.reset(a,i),popManager.closeMessageFeedback(i)})},browserUrl:function(e){var t=e.targets;t.closest("form").on("beforeSubmit",function(){var e=window.location.href;t.val(e)})},smallScreenHideCollapse:function(t){t.targets;e(window).width()<768&&t.targets.collapse("hide")},cookies:function(t){t.targets.each(function(){var t=e(this);e.cookie(t.data("cookieid"))||t.removeClass("hidden"),t.children("button.close").click(function(t){t.preventDefault();var a=e(this).parent(".cookie");e.cookie(a.data("cookieid"),"set",{expires:90,path:"/"})})})},cookieToggleClass:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("cookieid");if(a.cookieToggleClassInitial(n,t),t.data("deletecookiebtn")&&(r="self"==(o=t.data("deletecookiebtn"))?t:e(o)).click(function(t){e.cookie(i,null,{expires:-1,path:"/"})}),t.data("setcookiebtn")&&(r="self"==(o=t.data("setcookiebtn"))?t:e(o)).click(function(t){e.cookie(i,"set",{expires:180,path:"/"})}),t.data("togglecookiebtn")){var o=t.data("togglecookiebtn"),r="self"==o?t:e(o);r.click(function(t){e.cookie(i)?e.cookie(i,null,{expires:-1,path:"/"}):e.cookie(i,"set",{expires:180,path:"/"})})}})},sortable:function(e){e.pageSection,e.block;e.targets.sortable({cursor:"move"})},onActionThenClick:function(t){t.targets.each(function(){var t=e(this),a=e(t.data("triggertarget")),n=t.data("trigger-action")||"click";t.data("triggertarget-internal")&&(a=a.find(t.data("triggertarget-internal"))),a.on(n,function(e){t.trigger("click")})})},cookieToggleClassInitial:function(t,a){var n=a.data("cookieid"),i=a.data("initial")||"notset";if("set"==i&&e.cookie(n)||"notset"==i&&!e.cookie(n)){var o=e(a.data("cookietarget")),r=a.data("cookiecollapse");r&&jQuery(document).ready(function(e){o.collapse(r)});var s=a.data("cookieclass");s&&o.addClass(s)}},embedPreviewFromInput:function(t,a,n){var i=this,o=e(n.data("input-target")).val();if(o&&isUrlValid(o)){var r=e(n.data("iframe-target")),s=i.embedPreview(t,a,r,o);n.data("iframe-target","#"+s.targetContainer.attr("id"))}},getURLParamInputValue:function(e,t){var a,n=t.data("urlparam");if(n){var i=e.data("paramsscope-url");a=getParam(n,i)}return a||""},embedPreview:function(e,t,a,n){var i={operation:M.URLPARAM_OPERATION_REPLACEINLINE,extendContext:{src:n},"merge-target":"#"+a.attr("id")},o=a.data("templateid");popJSRuntimeManager.setBlockURL(t.data("toplevel-url"));var r=popManager.mergeTargetTemplate(e,t,o,i);popManager.runJSMethods(e,t,o,"full");var s=popJSRuntimeManager.getLastGeneratedId(popManager.getSettingsId(e),popManager.getSettingsId(t),o);return t.data("embed-iframe","#"+s),r},fillInput:function(e,t){t=popManager.getOriginalLink(t);var a,n=e.data("attr");n&&(a=t.data(n)),a=a||"",e.val(a)},fillURLInput:function(e,t){var a=this;t=popManager.getOriginalLink(t);var n=a.getUrl(t);e.val(n)},getUrl:function(t,a){var n=(t=popManager.getOriginalLink(t)).data("target-url");if(!n){var i=e(t.data("blocktarget")),o=popManager.getPageSection(i);n=popManager.getBlockFilteringUrl(o,i,a)}return n},execReplaceCode:function(e,t){var a=e.data("code-placeholder").format(t);e.val(a)}}}(jQuery),popJSLibraryManager.register(popFunctions,["expandJSKeys","showmore","hideEmpty","imageResponsive","printWindow","copyHeader","fillURLParamInput","fillAddonInput","fillModalInput","fillAddonURLInput","fillModalURLInput","switchTargetClass","doNothing","fetchMore","fetchMoreDisable","saveLastClicked","retrySendRequest","highlight","replaceCode","modalReloadEmbedPreview","reloadEmbedPreview","socialmedia","mediaplayer","reset","browserUrl","smallScreenHideCollapse","cookies","cookieToggleClass","sortable","onActionThenClick","beep"]),function(e){popBlockFunctions={hideIfEmptyBlock:function(e){var t=e.pageSection,a=e.block;popManager.hideIfEmpty(t,a)?a.addClass("hidden"):a.removeClass("hidden")}}}(jQuery),popJSLibraryManager.register(popBlockFunctions,["hideIfEmptyBlock"]),function(e){popBootstrapCarousel={carouselStatic:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets;t.prepareCarousel(a,n,i),i.carousel({interval:!1,wrap:!1})},carouselAutomatic:function(t){var a=this,n=t.pageSection,i=t.block,o=t.targets;i.on("beforeReload",function(e){o.carousel("pause")}),a.prepareCarousel(n,i,o),carousel.find(".item.active").length&&(gdBootstrapCarousel.numberSlides(carousel)>=2?(e(window).width()>=768?carousel.carousel():carousel.carousel({interval:!1,wrap:!1}),carousel.find(".pop-carousel-controls").removeClass("hidden")):carousel.find(".pop-carousel-controls").addClass("hidden"))},prepareCarousel:function(e,t,a){var n=this;t.on("rendered",function(){n.targetsAddActive(a)}),n.targetsAddActive(a)},targetsAddActive:function(t){var a=this;t.each(function(){var t=e(this);a.addActive(t)})},addActive:function(e){0==e.find(".item.active").length&&e.find(".item:first-child").addClass("active")},showElement:function(e,t){var a=this,n=t.closest(".item"),i=n.parent().children().index(n);a.slideTo(e,i)},slideTo:function(e,t){e.carousel(t)},next:function(e){e.carousel("next")},prev:function(e){e.carousel("prev")},isFirstSlide:function(e){return e.find(".item:first-child").hasClass("active")},isLastSlide:function(e){return e.find(".item:last-child").hasClass("active")},isNthSlide:function(e,t){return e.find(".item:nth-child("+t+")").hasClass("active")},isNthLastSlide:function(e,t){return e.find(".item:nth-last-child("+t+")").hasClass("active")},numberSlides:function(e){return e.find(".item").length}}}(jQuery),function(e){popBootstrapCarouselControls={initBlockRuntimeMemory:function(e){var t=this,a=e.pageSection,n=e.block;e.runtimeMempage.carouselControls={},t.resetBlockRuntimeMemory(a,n)},carouselControls:function(e){var t=this,a=e.pageSection,n=e.block,i=e.targets,o=t.getCarousel(i),r=i.children(".pop-carousel-control.right");t.controlCarouselNext(a,n,o,i,r);var s=i.children(".pop-carousel-control.left");t.controlCarouselPrev(a,n,o,i,s),n.on("fetchCompleted",function(e){t.handleReload(a,n,i)}),t.setEnabledDisabled(a,n,i)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).carouselControls},resetBlockRuntimeMemory:function(t,a){var n=this.getRuntimeMemoryPage(t,a),i={state:""};e.extend(n,i)},slideNext:function(e,t,a,n){var i=this,o=popManager.getBlockParams(e,t);popBootstrapCarousel.isNthLastSlide(a,2)&&o[M.URLPARAM_STOPFETCHING]&&i.disable(n),i.enable(n.siblings(".pop-carousel-control.left")),popBootstrapCarousel.next(a)},controlCarouselNext:function(t,a,n,i,o){var r=this,s=popManager.getBlockParams(t,a);o.click(function(i){i.preventDefault();var o=e(this);if(!r.disabled(o))if(popBootstrapCarousel.isLastSlide(n)){if(s.loading.length||s[M.URLPARAM_STOPFETCHING])return;popManager.fetchBlock(t,a,{operation:M.URLPARAM_OPERATION_APPEND}),r.setControlState(t,a,"loading")}else r.slideNext(t,a,n,o)})},controlCarouselPrev:function(t,a,n,i,o){var r=this;o.click(function(t){t.preventDefault();var a=e(this);r.disabled(a)||(popBootstrapCarousel.isNthSlide(n,2)&&r.disable(a),popBootstrapCarousel.numberSlides(n)>1&&r.enable(a.siblings(".pop-carousel-control.right")),popBootstrapCarousel.prev(n))})},handleReload:function(e,t,a){var n=this,i=popManager.getBlockDataset(e,t);if(n.setEnabledDisabled(e,t,a),i&&i.length&&"loading"==n.getControlState(e,t)){var o=n.getCarousel(a),r=a.children(".pop-carousel-control.right");n.slideNext(e,t,o,r)}n.setControlState(e,t,"")},getControlState:function(e,t){return this.getRuntimeMemoryPage(e,t).state},setControlState:function(e,t,a){this.getRuntimeMemoryPage(e,t).state=a},getCarousel:function(t){return e(t.data("target"))},setEnabledDisabled:function(e,t,a){var n=this,i=n.getCarousel(a),o=a.children(".pop-carousel-control.left"),r=a.children(".pop-carousel-control.right");if(0==popBootstrapCarousel.numberSlides(i))n.disable(o),n.disable(r);else{popBootstrapCarousel.isFirstSlide(i)?n.disable(o):n.enable(o);var s=popManager.getBlockParams(e,t);popBootstrapCarousel.isLastSlide(i)&&s[M.URLPARAM_STOPFETCHING]?n.disable(r):n.enable(r)}},disable:function(e){e.addClass("disabled"),e.attr("disabled",!0)},enable:function(e){e.removeClass("disabled"),e.attr("disabled",!1)},disabled:function(e){return e.hasClass("disabled")}}}(jQuery),popJSLibraryManager.register(popBootstrapCarousel,["carouselStatic","carouselAutomatic"]),popJSLibraryManager.register(popBootstrapCarouselControls,["initBlockRuntimeMemory","controlCarouselPrev","controlCarouselNext","carouselControls"]),function(e){popModals={modalForm:function(t){t.pageSection;t.targets.on("show.bs.modal",function(t){var a=e(this);e(t.relatedTarget);e(a.data("initjs-targets")).each(function(){var t=e(this);popManager.closeMessageFeedback(t)})})}}}(jQuery),popJSLibraryManager.register(popModals,["modalForm"]),function(e){popControls={controlPrint:function(t){var a=this,n=t.pageSection;t.block;t.targets.click(function(t){t.preventDefault();var i=e(this),o=a.getBlockFilteringUrl(n,i,!0);o=popManager.getPrintUrl(o),popSystem.openPrint(o)})},controlSocialMedia:function(t){var a=this,n=t.pageSection;t.block;t.targets.click(function(t){t.preventDefault();var i=e(this),o=i.data("shareurl")?i.data("shareurl"):a.getBlockFilteringUrl(n,i,!0),r=i.data("sharetitle")?i.data("sharetitle"):popManager.documentTitle,s=i.data("provider"),l=M.SOCIALMEDIA[s]["share-url"].replace(new RegExp("%url%","g"),encodeURIComponent(o)).replace(new RegExp("%title%","g"),encodeURIComponent(r));popSystem.openSocialMedia(l)})},getBlockFilteringUrl:function(t,a,n){var i=e(a.data("blocktarget"));return popManager.getBlockFilteringUrl(t,i,n)}}}(jQuery),popJSLibraryManager.register(popControls,["controlPrint","controlSocialMedia"]),jQuery.fn.fullScreen=d,jQuery.fn.toggleFullScreen=function(){return d.call(this,!d.call(this))};var e,f,g;(e=document).webkitCancelFullScreen?(f="webkitfullscreenchange",g="webkitfullscreenerror"):e.msExitFullscreen?(f="MSFullscreenChange",g="MSFullscreenError"):e.mozCancelFullScreen?(f="mozfullscreenchange",g="mozfullscreenerror"):(f="fullscreenchange",g="fullscreenerror"),jQuery(document).bind(f,function(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))}),jQuery(document).bind(g,function(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))}),function(e){"use strict";function t(e,t){for(var a=0;a<e.length;++a)t(e[a],a)}function a(t,a){this.$select=e(t),this.$select.attr("data-placeholder")&&(a.nonSelectedText=this.$select.data("placeholder")),this.options=this.mergeOptions(e.extend({},a,this.$select.data())),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=e.proxy(this.options.onChange,this),this.options.onDropdownShow=e.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=e.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=e.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=e.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&e("option",this.$select).length<=0&&this.disable(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:["options","value","selectedOptions"],init:function(t,a,n,i,o){var r=e(t),s=ko.toJS(a());if(r.multiselect(s),n.has("options")){var l=n.get("options");ko.isObservable(l)&&ko.computed({read:function(){l(),setTimeout(function(){var e=r.data("multiselect");e&&e.updateOriginalOptions(),r.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:t})}if(n.has("value")){var c=n.get("value");ko.isObservable(c)&&ko.computed({read:function(){c(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(n.has("selectedOptions")){var p=n.get("selectedOptions");ko.isObservable(p)&&ko.computed({read:function(){p(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0})}ko.utils.domNodeDisposal.addDisposeCallback(t,function(){r.multiselect("destroy")})},update:function(t,a,n,i,o){var r=e(t),s=ko.toJS(a());r.multiselect("setOptions",s),r.multiselect("rebuild")}}),a.prototype={defaults:{buttonText:function(t,a){if(0===t.length)return this.nonSelectedText;if(this.allSelectedText&&t.length===e("option",e(a)).length&&1!==e("option",e(a)).length&&this.multiple)return this.selectAllNumber?this.allSelectedText+" ("+t.length+")":this.allSelectedText;if(t.length>this.numberDisplayed)return t.length+" "+this.nSelectedText;var n="",i=this.delimiterText;return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();n+=t+i}),n.substr(0,n.length-2)},buttonTitle:function(t,a){if(0===t.length)return this.nonSelectedText;var n="",i=this.delimiterText;return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();n+=t+i}),n.substr(0,n.length-2)},optionLabel:function(t){return e(t).attr("label")||e(t).text()},onChange:function(e,t){},onDropdownShow:function(e){},onDropdownHide:function(e){},onDropdownShown:function(e){},onDropdownHidden:function(e){},onSelectAll:function(){},enableHTML:!1,buttonClass:"btn btn-default",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,selectedClass:"active",maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableClickableOptGroups:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,delimiterText:", ",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:a,buildContainer:function(){this.$container=e(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=e(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth,overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var t=this.$select.attr("tabindex");t&&this.$button.attr("tabindex",t),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=e(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(e.proxy(function(t,a){var n=e(a),i=n.prop("tagName").toLowerCase();n.prop("value")!==this.options.selectAllValue&&("optgroup"===i?this.createOptgroup(a):"option"===i&&("divider"===n.data("role")?this.createDivider():this.createOptionValue(a)))},this)),e("li input",this.$ul).on("change",e.proxy(function(t){var a=e(t.target),n=a.prop("checked")||!1,i=a.val()===this.options.selectAllValue;this.options.selectedClass&&(n?a.closest("li").addClass(this.options.selectedClass):a.closest("li").removeClass(this.options.selectedClass));var o=a.val(),r=this.getOptionByValue(o),s=e("option",this.$select).not(r),l=e("input",this.$container).not(a);if(i&&(n?this.selectAll():this.deselectAll()),i||(n?(r.prop("selected",!0),this.options.multiple?r.prop("selected",!0):(this.options.selectedClass&&e(l).closest("li").removeClass(this.options.selectedClass),e(l).prop("checked",!1),s.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&s.closest("a").css("outline","")):r.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(r,n),this.options.preventInputChangeEvent)return!1},this)),e("li a",this.$ul).on("mousedown",function(e){if(e.shiftKey)return!1}),e("li a",this.$ul).on("touchstart click",e.proxy(function(t){t.stopPropagation();var a=e(t.target);if(t.shiftKey&&this.options.multiple){a.is("label")&&(t.preventDefault(),(a=a.find("input")).prop("checked",!a.prop("checked")));var n=a.prop("checked")||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==a){var i=a.closest("li").index(),o=this.lastToggledInput.closest("li").index();if(i>o){var r=o;o=i,i=r}++o;var s=this.$ul.find("li").slice(i,o).find("input");s.prop("checked",n),this.options.selectedClass&&s.closest("li").toggleClass(this.options.selectedClass,n);for(var l=0,c=s.length;l<c;l++){var p=e(s[l]);this.getOptionByValue(p.val()).prop("selected",n)}}a.trigger("change")}a.is("input")&&!a.closest("li").is(".multiselect-item")&&(this.lastToggledInput=a),a.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",e.proxy(function(t){if(!e('input[type="text"]',this.$container).is(":focus"))if(9===t.keyCode&&this.$container.hasClass("open"))this.$button.click();else{var a=e(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!a.length)return;var n=a.index(a.filter(":focus"));38===t.keyCode&&n>0?n--:40===t.keyCode&&n<a.length-1?n++:~n||(n=0);var i=a.eq(n);if(i.focus(),32===t.keyCode||13===t.keyCode){var o=i.find("input");o.prop("checked",!o.prop("checked")),o.change()}t.stopPropagation(),t.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&e("li.multiselect-group",this.$ul).on("click",e.proxy(function(t){t.stopPropagation();var a=!0,n=e(t.target).parent().nextUntil("li.multiselect-group").filter(":visible:not(.disabled)").find("input");n.each(function(){a=a&&e(this).prop("checked")}),n.prop("checked",!a).trigger("change")},this))},createOptionValue:function(t){var a=e(t);a.is(":selected")&&a.prop("selected",!0);var n=this.options.optionLabel(t),i=a.val(),o=this.options.multiple?"checkbox":"radio",r=e(this.options.templates.li),s=e("label",r);s.addClass(o),this.options.enableHTML?s.html(" "+n):s.text(" "+n);var l=e("<input/>").attr("type",o);this.options.checkboxName&&l.attr("name",this.options.checkboxName),s.prepend(l);var c=a.prop("selected")||!1;l.val(i),i===this.options.selectAllValue&&(r.addClass("multiselect-item multiselect-all"),l.parent().parent().addClass("multiselect-all")),s.attr("title",a.attr("title")),this.$ul.append(r),a.is(":disabled")&&l.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled"),l.prop("checked",c),c&&this.options.selectedClass&&l.closest("li").addClass(this.options.selectedClass)},createDivider:function(t){var a=e(this.options.templates.divider);this.$ul.append(a)},createOptgroup:function(t){var a=e(t).prop("label"),n=e(this.options.templates.liGroup);this.options.enableHTML?e("label",n).html(a):e("label",n).text(a),this.options.enableClickableOptGroups&&n.addClass("multiselect-group-clickable"),this.$ul.append(n),e(t).is(":disabled")&&n.addClass("disabled"),e("option",t).each(e.proxy(function(e,t){this.createOptionValue(t)},this))},buildSelectAll:function(){if("number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&e("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(e(this.options.templates.divider));var t=e(this.options.templates.li);e("label",t).addClass("checkbox"),this.options.enableHTML?e("label",t).html(" "+this.options.selectAllText):e("label",t).text(" "+this.options.selectAllText),this.options.selectAllName?e("label",t).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):e("label",t).prepend('<input type="checkbox" />');var a=e("input",t);a.val(this.options.selectAllValue),t.addClass("multiselect-item multiselect-all"),a.parent().parent().addClass("multiselect-all"),this.$ul.prepend(t),a.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var t=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=t){if(this.$filter=e(this.options.templates.filter),e("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn){var a=e(this.options.templates.filterClearBtn);a.on("click",e.proxy(function(t){clearTimeout(this.searchTimeout),this.$filter.find(".multiselect-search").val(""),e("li",this.$ul).show().removeClass("filter-hidden"),this.updateSelectAll()},this)),this.$filter.find(".input-group").append(a)}this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",e.proxy(function(t){13===t.which&&t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(e.proxy(function(){if(this.query!==t.target.value){this.query=t.target.value;var a,n;e.each(e("li",this.$ul),e.proxy(function(t,i){var o=e("input",i).length>0?e("input",i).val():"",r=e("label",i).text(),s="";if("text"===this.options.filterBehavior?s=r:"value"===this.options.filterBehavior?s=o:"both"===this.options.filterBehavior&&(s=r+"\n"+o),o!==this.options.selectAllValue&&r){var l=!1;this.options.enableCaseInsensitiveFiltering&&s.toLowerCase().indexOf(this.query.toLowerCase())>-1?l=!0:s.indexOf(this.query)>-1&&(l=!0),e(i).toggle(l).toggleClass("filter-hidden",!l),e(i).hasClass("multiselect-group")?(a=i,n=l):(l&&e(a).show().removeClass("filter-hidden"),!l&&n&&e(i).show().removeClass("filter-hidden"))}},this))}this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){e("option",this.$select).each(e.proxy(function(t,a){var n=e("li input",this.$ul).filter(function(){return e(this).val()===e(a).val()});e(a).is(":selected")?(n.prop("checked",!0),this.options.selectedClass&&n.closest("li").addClass(this.options.selectedClass)):(n.prop("checked",!1),this.options.selectedClass&&n.closest("li").removeClass(this.options.selectedClass)),e(a).is(":disabled")?n.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):n.prop("disabled",!1).closest("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(t,a){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(null!==i&&void 0!==i){var o=this.getOptionByValue(i),r=this.getInputByValue(i);void 0!==o&&void 0!==r&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&r.closest("li").addClass(this.options.selectedClass),r.prop("checked",!0),o.prop("selected",!0),a&&this.options.onChange(o,!0))}}this.updateButtonText(),this.updateSelectAll()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(t,a){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(null!==i&&void 0!==i){var o=this.getOptionByValue(i),r=this.getInputByValue(i);void 0!==o&&void 0!==r&&(this.options.selectedClass&&r.closest("li").removeClass(this.options.selectedClass),r.prop("checked",!1),o.prop("selected",!1),a&&this.options.onChange(o,!1))}}this.updateButtonText(),this.updateSelectAll()},selectAll:function(t,a){var t=void 0===t||t,n=e("li input[type='checkbox']:enabled",this.$ul),i=n.filter(":visible"),o=n.length,r=i.length;if(t?(i.prop("checked",!0),e("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass)):(n.prop("checked",!0),e("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass)),o===r||!1===t)e("option:enabled",this.$select).prop("selected",!0);else{var s=i.map(function(){return e(this).val()}).get();e("option:enabled",this.$select).filter(function(t){return-1!==e.inArray(e(this).val(),s)}).prop("selected",!0)}a&&this.options.onSelectAll()},deselectAll:function(t){if(t=void 0===t||t){var a=e("li input[type='checkbox']:not(:disabled)",this.$ul).filter(":visible");a.prop("checked",!1);var n=a.map(function(){return e(this).val()}).get();e("option:enabled",this.$select).filter(function(t){return-1!==e.inArray(e(this).val(),n)}).prop("selected",!1),this.options.selectedClass&&e("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else e("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),e("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&e("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&e("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(a){var n=0,i=this.$select.empty();e.each(a,function(a,o){var r;e.isArray(o.children)?(n++,r=e("<optgroup/>").attr({label:o.label||"Group "+n,disabled:!!o.disabled}),t(o.children,function(t){r.append(e("<option/>").attr({value:t.value,label:t.label||t.value,title:t.title,selected:!!t.selected,disabled:!!t.disabled}))})):r=e("<option/>").attr({value:o.value,label:o.label||o.value,title:o.title,selected:!!o.selected,disabled:!!o.disabled}),i.append(r)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(e){this.options=this.mergeOptions(e)},mergeOptions:function(t){return e.extend(!0,{},this.defaults,this.options,t)},hasSelectAll:function(){return e("li.multiselect-all",this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var t=e("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),a=t.length,n=t.filter(":checked").length,i=e("li.multiselect-all",this.$ul),o=i.find("input");n>0&&n===a?(o.prop("checked",!0),i.addClass(this.options.selectedClass),this.options.onSelectAll()):(o.prop("checked",!1),i.removeClass(this.options.selectedClass))}},updateButtonText:function(){var t=this.getSelected();this.options.enableHTML?e(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(t,this.$select)):e(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(t,this.$select)),e(".multiselect",this.$container).attr("title",this.options.buttonTitle(t,this.$select))},getSelected:function(){return e("option",this.$select).filter(":selected")},getOptionByValue:function(t){for(var a=e("option",this.$select),n=t.toString(),i=0;i<a.length;i+=1){var o=a[i];if(o.value===n)return e(o)}},getInputByValue:function(t){for(var a=e("li input",this.$ul),n=t.toString(),i=0;i<a.length;i+=1){var o=a[i];if(o.value===n)return e(o)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(e,t,a){var n=Array.prototype.slice.call(arguments,3);return setTimeout(function(){e.apply(a||window,n)},t)},setAllSelectedText:function(e){this.options.allSelectedText=e,this.updateButtonText()}},e.fn.multiselect=function(t,n,i){return this.each(function(){var o=e(this).data("multiselect"),r="object"==typeof t&&t;o||(o=new a(this,r),e(this).data("multiselect",o)),"string"==typeof t&&(o[t](n,i),"destroy"===t&&e(this).data("multiselect",!1))})},e.fn.multiselect.Constructor=a,e(function(){e("select[data-role=multiselect]").multiselect()})}(window.jQuery),function(e,t,a,n){"use strict";e.fn.dynamicMaxHeight=function(t){function a(e,t){var a;a=e.hasClass(r)?t.data("replace-text"):t.attr("title"),t.text(a)}function n(e,t){e.find("."+o).css("max-height",t)}function i(e,t){t.css("display","inline-block")}var o="dynamic-height-wrap",r="dynamic-height-active";return this.each(function(t,s){var l=e(s),c=l.data("maxheight"),p=l.find("."+o).outerHeight(),d=l.find(".js-dynamic-show-hide");l.attr("data-itemheight",p),p>c&&(n(l,c),l.toggleClass(r),i(l,d)),d.click(function(){l.hasClass(r)?n(l,p):n(l,c),a(l,d),l.toggleClass(r)})})}}(window.jQuery||window.$,document,window),"undefined"!=typeof module&&module.exports&&(module.exports=dynamicMaxHeight);
;!function(t){popCDN={localStorageKey:"PoP:cdn-thumbprints",thumbprintValues:{},documentInitialized:function(){var e=this,r=popManager.getTopLevelFeedback()[M.CDN_THUMBPRINTVALUES];e.thumbprintValues=popManager.getStoredData(e.localStorageKey,!1),e.thumbprintValues?e.updateThumbprintValues(r):(e.thumbprintValues=t.extend({},r),e.storeData())},pageSectionFetchSuccess:function(t){var e=this,r=t.response;e.fetchSuccess(r)},blockFetchSuccess:function(t){var e=this,r=t.response;e.fetchSuccess(r)},modifyFetchArgs:function(t){var e=this,r=t.options,a=t.url;if(e.useCDN(a)){t.url=e.getCDNUrl(a);var n=e.getThumbprintValue(a);n&&(r.params=r.params||{},r.params[M.CDN_URLPARAM_THUMBPRINT]=n)}},modifyFetchBlockArgs:function(t){var e=this,r=t.options,a=t.url;if("GET"==t.type&&e.useCDN(a)){t.url=e.getCDNUrl(a);var n=e.getThumbprintValue(a);n&&(r["onetime-post-data"]=r["onetime-post-data"]?r["onetime-post-data"]+"&":"",r["onetime-post-data"]+=M.CDN_URLPARAM_THUMBPRINT+"="+n)}},fetchSuccess:function(t){this.updateThumbprintValues(t.feedback.toplevel[M.CDN_THUMBPRINTVALUES])},updateThumbprintValues:function(t){var e=this,r=!1;for(var a in t)t[a]>e.thumbprintValues[a]&&(e.thumbprintValues[a]=t[a],r=!0);r&&e.storeData()},storeData:function(){var t=this;popManager.storeData(t.localStorageKey,t.thumbprintValues)},useCDN:function(t){return M.CDN_CONTENT_URI&&t.startsWith(M.HOME_URL)&&popCDNThumbprints.canUseCDN(t)},getCDNUrl:function(t){return M.CDN_CONTENT_URI+t.substr(M.HOME_URL.length)},getThumbprintValue:function(e){var r=this,a=popCDNThumbprints.getThumbprints(e),n=[];return t.each(a,function(t,e){n.push(r.thumbprintValues[e])}),n.join(M.CDN_SEPARATOR_THUMBPRINT)},convertURL:function(t){var e=this;if(e.useCDN(t)){var r=e.getThumbprintValue(t);t=e.getCDNUrl(t),r&&(t=add_query_arg(M.CDN_URLPARAM_THUMBPRINT,r,t))}return t}}}(jQuery),popJSLibraryManager.register(popCDN,["documentInitialized","pageSectionFetchSuccess","blockFetchSuccess"],!0),popJSLibraryManager.register(popCDN,["modifyFetchArgs","modifyFetchBlockArgs"]),function(t){popCDNThumbprints={canUseCDN:function(t){var e=this;return!!popCDNConfig&&!e.evalCriteria(t,popCDNConfig.criteria.rejected)},getThumbprints:function(e){var r=this;if(!popCDNConfig)return[];var a=[];return t.each(popCDNConfig.thumbprints,function(t,n){r.evalCriteria(e,popCDNConfig.criteria.thumbprints[n])&&a.push(n)}),a},isHome:function(t){var e=removeParams(t);return[M.HOME_URL,M.HOME_URL+"/",M.HOMELOCALE_URL,M.HOMELOCALE_URL+"/"].indexOf(e)>-1},evalCriteria:function(e,r){var a=this,n=function(t){var r=t[0],a=t[1],n=getParam(r,e);return"object"==typeof n?searchInObject(n,a):n==a},o=[{isHome:r.isHome&&a.isHome(e),startsWith:r.startsWith.full.some(function(t){return e.startsWith(t)}),pageStartsWith:r.startsWith.partial.some(function(t){return e.startsWith(M.HOMELOCALE_URL+"/"+t)}),hasParamValues:r.hasParamValues.some(n)},{noParamValues:!r.noParamValues.some(n)}],i=0;return t.each(o,function(t,e){Object.keys(e).filter(function(t){return e[t]}).length&&i++}),i==o.length}}}(jQuery),function(t){popCDNCoreHooks={mentionsSource:function(t){t.url=popCDN.convertURL(t.url)},typeaheadPrefetchURL:function(t){t.url=popCDN.convertURL(t.url)},typeaheadRemoteURL:function(t){t.url=popCDN.convertURL(t.url)}}}(jQuery),popJSLibraryManager.register(popCDNCoreHooks,["mentionsSource","typeaheadPrefetchURL","typeaheadRemoteURL"]);
;!function(e){popServiceWorkers={pages:{},documentInitialized:function(r){var t=this;"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=function(r){var a=JSON.parse(r.data);if("refresh"===a.type&&t.pages[a.url]){var o=e("#"+t.pages[a.url]);o&&o.data("fetch-url")&&(t.showRefreshMessage(o),delete t.pages[a.url])}},navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){e("#"+M.IDS_APPSTATUS).prepend(M.SW_MESSAGES_WEBSITEUPDATED.format(window.location.href))}))},pageSectionNewDOMsBeforeInitialize:function(e){var r=this,t=e.pageSection,a=e.newDOMs,o=t.attr("id");if(M.SW_MAIN_PAGESECTIONS&&M.SW_MAIN_PAGESECTIONS.indexOf(o)>-1){var i=a.filter(".pop-pagesection-page");if(i.length){var n=i.data("fetch-url");n&&(r.pages[n]=i.attr("id"),i.one("destroy",function(){delete r.pages[n]}))}}},modifyFetchArgs:function(e){var r=e.options;r["js-args"]&&(anchor=r["js-args"].relatedTarget,anchor&&anchor.data("sw-networkfirst")&&(r.params=r.params||{},r.params[M.SW_URLPARAM_NETWORKFIRST]="true"))},modifyFetchBlockArgs:function(e){var r=e.options;e.url;r.reload&&(r["onetime-post-data"]=r["onetime-post-data"]?r["onetime-post-data"]+"&":"",r["onetime-post-data"]+=M.SW_URLPARAM_NETWORKFIRST+"=true")},fetchBrowserURL:function(r){e(document).on("initialized.pop.document",function(){var e={skipPushState:!0},r=window.location.href;r.startsWith(M.HOMELOCALE_URL+"/")||(r=M.HOMELOCALE_URL+r.substr(M.HOME_URL.length)),popManager.fetch(r,e)})},resetTimestamp:function(e){var r=e.pageSection,t=e.block;"serviceWorker"in navigator&&(popManager.getBlockParams(r,t)[M.URLPARAM_TIMESTAMP]=Math.floor(Date.now()/1e3)+60*M.GMT_OFFSET*60)},showRefreshMessage:function(e){var r=e.data("url"),t=e.data("target");e.prepend(M.SW_MESSAGES_PAGEUPDATED.format(r,t))}}}(jQuery),popJSLibraryManager.register(popServiceWorkers,["documentInitialized","pageSectionNewDOMsBeforeInitialize","modifyFetchArgs","modifyFetchBlockArgs","fetchBrowserURL","resetTimestamp"]);
;!function(t){popNotifications={timeFromNow:function(o){var i=this;o.targets.each(function(){var o=t(this);i.execTimeFromNow(o)})},execTimeFromNow:function(o){var i=this;if(t("#"+o.attr("id")).length){var e=o.data("time"),r=o.data("format");o.html(moment(e,r).fromNow()),setTimeout(function(){i.execTimeFromNow(o)},6e4)}}}}(jQuery),popJSLibraryManager.register(popNotifications,["timeFromNow"]);
;!function(e){popFileUpload={fileUpload:function(a){var l=a.pageSection;a.targets.each(function(){var a=this,o=e(this),p=o.data("action"),t=popManager.getBlock(o);o.fileupload({url:p,autoUpload:!0,maxNumberOfFiles:1,maxFileSize:2e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:function(a){var l=o.data("template-upload"),p=e(),d={o:a,locale:locale};popJSRuntimeManager.setBlockURL(t.data("toplevel-url"));var n=popManager.getHtml(l,d),i=e(n);return p=p.add(i)},downloadTemplate:function(a){var p=o.data("template-download"),d=e(),n=popManager.getTargetConfiguration(l,t,p);popManager.expandJSKeys(n);var i=e.extend({},n,{o:a,locale:locale});popJSRuntimeManager.setBlockURL(t.data("toplevel-url"));var r=popManager.getHtml(p,i),u=e(r);return e(document).triggerHandler("gd-fileupload:rendered",[u]),d=d.add(u)},completed:function(e,a){o.find(".pop-fileuploaded-hide").hide()},destroyed:function(e,a){o.find(".pop-fileuploaded-hide").show()}}),o.hasClass("pop-fileupload-loadfromserver")&&e.getJSON(p,function(l){l&&l.files&&l.files.length&&o.fileupload("option","done").call(a,e.Event("done"),{result:l})})})}}}(jQuery),popJSLibraryManager.register(popFileUpload,["fileUpload"]);
;!function(e){popCreateLocation={createLocationModal:function(e){var a=this,t=e.pageSection,n=e.targets;a.execCreateLocationModal(t,n)},createLocationModalBlock:function(e){var a=this,t=e.pageSection,n=e.targets,r=e.relatedTarget;a.transferAttributes(n.closest(".modal"),r),a.execCreateLocationModal(t,n.closest(".modal"))},maybeCloseLocationModal:function(a){var t=a.pageSection,n=a.targets,r=popManager.getSettingsId(t);n.on("fetched",function(a,t){var n=e(this),o=popManager.getSettingsId(n);!0===t.feedback.block[r][o].result&&n.closest(".modal").modal("hide")})},transferAttributes:function(e,a){a=popManager.getOriginalLink(a),e.data("typeahead-target",a.data("typeahead-target"))},execCreateLocationModal:function(a,t){var n=this;t.addClass("pop-createlocation"),t.on("show.bs.modal",function(a){var t=e(this),r=e(a.relatedTarget);n.transferAttributes(t,r)})}}}(jQuery),popJSLibraryManager.register(popCreateLocation,["createLocationModal","createLocationModalBlock","maybeCloseLocationModal"]),function(e){popMap={initBlockRuntimeMemory:function(e){var a=this,t=e.pageSection,n=e.block;e.runtimeMempage.map={},a.resetBlockRuntimeMemory(t,n)},map:function(a){var t=this,n=a.pageSection,r=a.block,o=a.targets;r.one("rerender",function(e){t.destroy(n,r,o)}),o.each(function(){var a=e(this);t.triggerShowMap(n,r,a)})},mapModal:function(a){var t=this,n=a.pageSection;a.targets.on("shown.bs.modal",function(){var a=e(this);e.each(a.find(".pop-map"),function(){var a=e(this),r=popManager.getBlock(a);popManager.jsInitialized(r)&&t.triggerShowMap(n,r,a)})})},mapStandalone:function(a){var t=this,n=a.pageSection,r=a.block,o=a.targets;popPageSectionManager.getGroup(n).on("on.bs.pagesection:theater off.bs.pagesection:theater",function(a){o.each(function(){var a=e(this);popManager.isHidden(a)||t.refresh(n,r,a)})}),r.on("fetchCompleted",function(a,i){popJSRuntimeManager.setBlockURL(r.data("toplevel-url")),o.each(function(){var a=e(this);t.triggerAddMarkers(n,r,a,i)})}),o.each(function(){var a=e(this);t.hoverBlockElems(n,r,a)})},getRuntimeMemoryPage:function(e,a){return popManager.getRuntimeMemoryPage(e,a).map},resetBlockRuntimeMemory:function(a,t){var n=this.getRuntimeMemoryPage(a,t),r={markers:{},markersPos:{},markersOpen:{},maps:{}};e.extend(n,r)},destroy:function(a,t,n){var r=this.getRuntimeMemoryPage(a,t);n.each(function(){var a=e(this).attr("id");delete r.maps[a]})},triggerShowMap:function(e,a,t){var n=this;popManager.isHidden(t)?n.pendingTriggerMap("showmap",e,a,t):n.execTriggerShowMap(e,a,t)},triggerAddMarkers:function(e,a,t,n){var r=this;popManager.isHidden(t)?r.pendingTriggerMap("addmarkers",e,a,t,n):r.addMarkers(e,a,t,n.reload)},triggerFunction:function(e,a,t,n,r){var o=this;"showmap"==e?o.triggerShowMap(a,t,n):"addmarkers"==e&&o.triggerAddMarkers(a,t,n,r)},pendingTriggerMap:function(a,t,n,r,o){var i=this,s=popManager.getPageSectionPage(n);popPageSectionManager.execIsHidden(t)?popPageSectionManager.getGroup(t).one("on.bs.pagesection-group:pagesection-"+t.attr("id")+":opened",function(){(n=e("#"+n.attr("id"))).length&&i.triggerFunction(a,t,n,r,o)}):r.parents(".collapse").not(".in").length?r.parents(".collapse").not(".in").one("shown.bs.collapse",function(){i.triggerFunction(a,t,n,r,o)}):s.hasClass("tab-pane")&&!popManager.isActive(s)&&s.one("shown.bs.tabpane",function(){i.triggerFunction(a,t,n,r,o)})},execTriggerShowMap:function(e,a,t){this.addMarkers(e,a,t,t.data("markers-removecurrent")),windowResize()},refresh:function(e,a,t){var n=this.getGMap(e,a,t);n&&n.refresh()},hoverBlockElems:function(a,t,n){var r=this;t.on("mouseenter",".pop-openmapmarkers",function(){var o,i=e(this);if(i.hasClass("make-popover")){var s=i.attr("aria-describedby");s&&(o=e("#"+s).find("a.pop-modalmap-link"))}else o=i.find("a.pop-modalmap-link");r.openMapMarkers(a,t,n,o)})},openMapMarkers:function(e,a,t,n){var r=this;popManager.isHidden(t)||(r.closeMarkers(e,a,t),n.length&&r.openMarkers(e,a,t,n))},closeMarkers:function(a,t,n){var r=this,o=r.getGMap(a,t,n);if(o){var i=r.getMarkersInfo(a,t,n);o.hideInfoWindows(),e.each(i.markersOpen,function(e,a){markerPos=i.markersPos[a],o.markers[markerPos]&&o.markers[markerPos].setIcon("https://maps.google.com/mapfiles/ms/icons/red-dot.png")})}},getMarkerIdsFromLinkURLs:function(a){var t=[];return a.each(function(){var a=e(this),n=(a=popManager.getOriginalLink(a)).attr("href"),r=getParam(M.LOCATIONSID_FIELDNAME,n);r&&e.each(r,function(e,a){t.push(a)})}),t},openMarkers:function(a,t,n,r){var o=this,i=o.getMarkerIdsFromLinkURLs(r);if(i.length){i=i.filter(function(e,a){return i.indexOf(e)==a});var s=o.getGMap(a,t,n);if(s){var p=o.getMarkersInfo(a,t,n);e.each(i,function(e,a){markerPos=p.markersPos[a],s.markers[markerPos]&&s.markers[markerPos].setIcon("https://maps.google.com/mapfiles/ms/icons/green-dot.png")}),1==i.length?(markerPos=p.markersPos[i[0]],s.markers[markerPos]&&"undefined"!=typeof google&&google.maps.event.trigger(s.markers[markerPos],"click")):s.fitZoom(),o.setMarkersOpen(a,t,n,i,!0)}}},initMarker:function(e,a,t,n){var r=this.getRuntimeMemoryPage(e,a),o=r.markers[t];if(o){if(o.title.split(" | ").indexOf(n.title)>-1)return;n.title=o.title+" | "+n.title,n.infoWindow.content=n.infoWindow.content+"<hr/>"+o.infoWindow.content,n.icon="https://maps.google.com/mapfiles/ms/icons/red-dot.png"}r.markers[t]=n},hasMarker:function(e,a,t){return this.getRuntimeMemoryPage(e,a).markers[t]},getGMap:function(e,a,t){var n=this;if("undefined"!=typeof google&&"undefined"!=typeof GMaps){var r=n.getRuntimeMemoryPage(e,a),o=t.attr("id"),i=r.maps[o];return i||(i=r.maps[o]=new GMaps({div:"#"+o,lat:M.LOCATIONSMAP_LAT,lng:M.LOCATIONSMAP_LNG,zoom:parseInt(M.LOCATIONSMAP_ZOOM)})),i}},getMarkersInfo:function(e,a,t){var n=this,r=t.data("markers-pagesection")||e,o=t.data("markers-block")||a,i=n.getRuntimeMemoryPage(r,o),s=t.attr("id");return{markers:i.markers||{},markersPos:i.markersPos[s]||{},markersOpen:i.markersOpen[s]||[]}},setMarkersOpen:function(e,a,t,n,r){var o=this.getRuntimeMemoryPage(e,a),i=t.attr("id");!r&&o.markersOpen[i]||(o.markersOpen[i]=[]),n&&(o.markersOpen[i]=o.markersOpen[i].concat(n))},setMarkersPos:function(a,t,n,r,o){var i=this.getRuntimeMemoryPage(a,t),s=n.attr("id");!o&&i.markersPos[s]||(i.markersPos[s]={}),r&&e.extend(i.markersPos[s],r)},removeMarker:function(e,a,t,n){var r=this,o=r.getGMap(e,a,t);if(o){var i=r.getMarkersInfo(e,a,t);markerPos=i.markersPos[n],o.markers[markerPos]&&o.markers[markerPos].setMap(null),r.zoom(e,a,t)}},zoom:function(e,a,t){var n=this.getGMap(e,a,t);if(n)if(n.markers.length>1)n.fitZoom();else if(1==n.markers.length){var r=n.markers[0].getPosition();n.setCenter(r.lat(),r.lng()),n.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM))}},addMarkers:function(a,t,n,r){var o=this,i=o.getGMap(a,t,n);if(i){r&&(i.removeMarkers(),o.setMarkersOpen(a,t,n,null,!0),o.setMarkersPos(a,t,n,null,!0));var s=n.data("marker-ids");if(s&&s.length){n.data("marker-ids",null);var p,c,g,d=o.getMarkersInfo(a,t,n),l={};e.each(s,function(e,a){var t={content:(p=d.markers[a]).infoWindow.header+"<br/>"+p.infoWindow.content},n={lat:p.coordinates.lat,lng:p.coordinates.lng,title:p.title,infoWindow:t,icon:p.icon};"undefined"!=typeof google&&(n.animation=google.maps.Animation.DROP),c=i.addMarker(n),g=i.markers.length-1,l[a]=g}),o.setMarkersPos(a,t,n,l);var m=n.data("open-onemarker-infowindow");1==s.length&&m&&(i.hideInfoWindows(),"undefined"!=typeof google&&google.maps.event.trigger(c,"click")),o.zoom(a,t,n)}}},geocode:function(e,a,t,n,r,o){var i=this.getGMap(e,a,t);i&&GMaps.geocode({address:n,callback:function(e,a){if("OK"==a){i.removeMarkers();var t=e[0].geometry.location;i.setCenter(t.lat(),t.lng()),i.addMarker({lat:t.lat(),lng:t.lng(),draggable:!0}),i.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM)),r.val(t.lat()),o.val(t.lng());var n=i.markers[0];"undefined"!=typeof google&&google.maps.event.addListener(n,"dragend",function(){var e=n.getPosition();r.val(e.lat()),o.val(e.lng())})}}})}}}(jQuery),function(e){popMapRuntime={initBlockRuntimeMemory:function(e){var a=this,t=e.pageSection,n=e.block;e.runtimeMempage.mapRuntime={},a.resetBlockRuntimeMemory(t,n)},getRuntimeMemoryPage:function(e,a){return popManager.getRuntimeMemoryPage(e,a).mapRuntime},resetBlockRuntimeMemory:function(a,t){var n=this.getRuntimeMemoryPage(a,t),r={content:"",title:"",marker_ids:[]};e.extend(n,r)},drawMarkers:function(e,a,t){var n=this;popManager.jsInitialized(a)?n.execDrawMarkers(e,a,t):a.one("initialize",function(){n.execDrawMarkers(e,a,t)})},execDrawMarkers:function(e,a,t){var n=this.getRuntimeMemoryPage(e,a);t.data("marker-ids",n.marker_ids)},resetMarkerIds:function(e,a){var t=this;popManager.jsInitialized(a)?t.execResetMarkerIds(e,a):a.one("initialize",function(){t.execResetMarkerIds(e,a)})},execResetMarkerIds:function(e,a){this.getRuntimeMemoryPage(e,a).marker_ids=[]},setMarkerData:function(e,a,t,n){var r=this;popManager.jsInitialized(a)?r.execSetMarkerData(e,a,t,n):a.one("initialize",function(){r.execSetMarkerData(e,a,t,n)})},execSetMarkerData:function(e,a,t,n){var r=this.getRuntimeMemoryPage(e,a);r.title||(r.title=t),r.content||(r.content=n)},initMarker:function(e,a,t,n,r,o,i){var s=this;popManager.jsInitialized(a)?s.execInitMarker(e,a,t,n,r,o,i):a.one("initialize",function(){s.execInitMarker(e,a,t,n,r,o,i)})},execInitMarker:function(e,a,t,n,r,o,i){var s=this,p=s.getRuntimeMemoryPage(e,a);s.setMarkerData(e,a,o,i);var c=p.title,g={coordinates:{lat:n,lng:r},title:c,infoWindow:{header:"<strong>"+c+"</strong>",content:p.content},icon:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"};p.marker_ids.push(t),popMap.initMarker(e,a,t,g),p.content="",p.title=""}}}(jQuery),popJSLibraryManager.register(popMap,["initBlockRuntimeMemory","map","mapModal","mapStandalone"]),popJSLibraryManager.register(popMapRuntime,["initBlockRuntimeMemory"]),function(e){popTypeaheadMap={typeaheadMap:function(a){var t=a.pageSection,n=a.block;a.targets.each(function(){var a=e(this),r=a.find(".pop-typeahead"),o=a.find(".pop-map"),i=a.data("addmarker-template");r.on("selected",function(r,s){if(!popMap.hasMarker(t,n,s.id)){var p=popManager.getTargetConfiguration(t,n,i);e.extend(p,{itemObject:s}),popJSRuntimeManager.setBlockURL(n.data("toplevel-url"));var c=popManager.getTemplateHtml(t,n,i);popManager.mergeHtml(c,a),popManager.runJSMethods(t,n,i,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(t,n,i)}o.data("marker-ids",[s.id]),popMap.addMarkers(t,n,o)}),r.on("close",function(e,a,r){popMap.removeMarker(t,n,o,r)})})}}}(jQuery),popJSLibraryManager.register(popTypeaheadMap,["typeaheadMap"]),function(e){popMapCollection={formMapLocationGeocode:function(a){var t=a.pageSection,n=a.block;a.targets.find("input.address-input").change(function(){var a=e(this).closest("div.pop-map-locationgeocode"),r=[];a.find("input.address-input").each(function(){var a=e(this);a.val()&&r.push(a.val())});var o=a.find("div.pop-map"),i=a.find("input.address-lat"),s=a.find("input.address-lng");popMap.geocode(t,n,o,r.join(", "),i,s)})},modalMap:function(a){var t=this;a.targets.on("show.bs.modal",function(a){var n=e(this),r=e(a.relatedTarget);t.execModalMap(n,r)})},modalMapBlock:function(e){var a=this,t=(e.pageSection,e.block,e.targets),n=e.relatedTarget,r=t.closest(".modal");a.execModalMap(r,n)},execModalMap:function(e,a){a=popManager.getOriginalLink(a);var t=popManager.getBlock(a),n=popManager.getPageSection(t),r=e.find(".pop-map");r.data("markers-pagesection",n),r.data("markers-block",t),r.data("markers-removecurrent",!0);var o=popMap.getMarkerIdsFromLinkURLs(a);r.data("marker-ids",o)}}}(jQuery),popJSLibraryManager.register(popMapCollection,["formMapLocationGeocode","modalMap","modalMapBlock"]),function(e){popFullCalendar={initBlockRuntimeMemory:function(e){var a=this,t=e.pageSection,n=e.block;e.runtimeMempage.fullCalendar={},a.resetBlockRuntimeMemory(t,n)},calendar:function(a){var t=this,n=a.pageSection,r=a.block,o=a.targets,i=popManager.getPageSectionPage(r);i.one("destroy",function(){o.fullCalendar("destroy")}),i.hasClass("tab-pane")&&!popManager.isActive(i)&&i.one("shown.bs.tabpane",function(){o.fullCalendar("render")}),r.on("beforeMerge",function(a,r){var o=e(this);r.operation==M.URLPARAM_OPERATION_REPLACE&&t.resetBlockRuntimeMemory(n,o)}),r.on("rendered",function(a){var n=e(this),r=popManager.getPageSection(n);t.execCalendar(r,n,o,"update"),windowResize()}),t.execCalendar(n,r,o,"new")},getRuntimeMemoryPage:function(e,a){return popManager.getRuntimeMemoryPage(e,a).fullCalendar},resetBlockRuntimeMemory:function(a,t){var n=this.getRuntimeMemoryPage(a,t),r={eventsHtml:{},runJS:!1,events:[],loadedEventIds:{},loadedDates:{}};e.extend(n,r)},addEvents:function(e,a,t){var n=this;t.length&&(popManager.jsInitialized(a)?n.execAddEvents(e,a,t):a.one("initialize",function(){n.execAddEvents(e,a,t)}))},execAddEvents:function(a,t,n){var r=this,o=r.getRuntimeMemoryPage(a,t),i=[];e.each(n,function(e,n){r.isEventLoaded(a,t,n.id)||(i.push(n),r.setEventLoaded(a,t,n.id))}),e.merge(o.events,i)},execCalendar:function(a,t,n,r){var o,i=this,s=i.getRuntimeMemoryPage(a,t),p=i.getDate(a,t);"new"==r&&(o={header:{left:"title",center:"",right:""},events:function(e,a,t,n){n(s.events)},defaultDate:p,fixedWeekCount:!1,height:"auto",contentHeight:"auto",dayNamesShort:M.DATERANGE_DAYSOFWEEK}),n.each(function(){var n=e(this);if("new"==r){var s=popManager.getJsSettings(a,t,n),p=s.options||{},c=e.extend({},o,p),g=s.layouts;c.eventRender=function(e,n){i.renderEvent(a,t,g,e,n)},c.eventAfterAllRender=function(e){i.renderEventAfterAll(a,t,g)},n.fullCalendar(c)}else"update"==r&&n.fullCalendar("refetchEvents")}),i.setDateLoaded(a,t,p)},setDateLoaded:function(e,a,t){this.getRuntimeMemoryPage(e,a).loadedDates[t.year()+"-"+(t.month()+1)]=!0},isDateLoaded:function(e,a,t){return!0===this.getRuntimeMemoryPage(e,a).loadedDates[t.year()+"-"+(t.month()+1)]},setEventLoaded:function(e,a,t){this.getRuntimeMemoryPage(e,a).loadedEventIds[t]=!0},isEventLoaded:function(e,a,t){return!0===this.getRuntimeMemoryPage(e,a).loadedEventIds[t]},getDate:function(e,a){var t=popManager.getBlockParams(e,a),n=parseInt(t[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]),r=parseInt(t[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]);return moment(n+"-"+r+"-01","YYYY-M-DD")},renderEvent:function(a,t,n,r,o){var i=this.getRuntimeMemoryPage(a,t),s=r.id,p=i.eventsHtml[s];if(p)i.runJS=!0;else{var c={},g=popManager.getDatabaseKeys(a,t)["db-key"];p="",popJSRuntimeManager.setBlockURL(t.data("toplevel-url")),e.each(n,function(e,n){p+=popManager.getTemplateHtml(a,t,n,c,g,s)}),i.eventsHtml[s]=p}o.html(p)},renderEventAfterAll:function(a,t,n){var r=this.getRuntimeMemoryPage(a,t);popManager.triggerHTMLMerged(),r.runJS&&(r.runJS=!1,e.each(n,function(e,n){popManager.runJSMethods(a,t,n,"full")}))},fetch:function(e,a,t){var n=this,r=n.getDate(e,a);t.fullCalendar("gotoDate",r),n.isDateLoaded(e,a,r)||popManager.fetchBlock(e,a,{operation:M.URLPARAM_OPERATION_APPEND})}}}(jQuery),function(e){popFullCalendarControls={controlCalendarPrev:function(a){var t=this,n=a.pageSection,r=a.block;a.targets.click(function(a){var o=e(this);t.execute(n,r,o,"prev")})},controlCalendarNext:function(a){var t=this,n=a.pageSection,r=a.block;a.targets.click(function(a){var o=e(this);t.execute(n,r,o,"next")})},setCalendarBlockParams:function(e,a,t){var n=popManager.getBlockParams(e,a);n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]=t.year(),n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]=t.month()+1},execute:function(a,t,n,r){var o=this,i=e(n.closest(".pop-calendar-controls").data("target")),s=i.fullCalendar("getDate");"next"==r?s.add(1,"months"):s=s.subtract(1,"months"),o.setCalendarBlockParams(a,t,s),popManager.closeMessageFeedback(t),popFullCalendar.fetch(a,t,i)}}}(jQuery),popJSLibraryManager.register(popFullCalendar,["initBlockRuntimeMemory","calendar"]),popJSLibraryManager.register(popFullCalendarControls,["controlCalendarPrev","controlCalendarNext"]);
;function wsl_wordpress_social_login_callback(){if(popUserAccount.isLoggedIn()&&popWSL.loginBlock){var o=popManager.getPageSection(popWSL.loginBlock),l=M.WSL_LOGINUSER_CLOSETIME||1500;popSystem.timeoutClosePageSection(o,l)}}!function(o){popWSL={loginBlock:null,wslNetworkLink:function(l){var a=this;l.targets.click(function(l){l.preventDefault();var i=o(this);popupurl=i.data("url");var n=popManager.getBlock(i);a.loginBlock=o(n.data("loginblock")),window.open(popupurl,"hybridauth_social_sing_on","location=1,status=0,scrollbars=0,width=600,height=400")})}}}(jQuery),popJSLibraryManager.register(popWSL,["wslNetworkLink"]),window.wsl_wordpress_social_login=function(o){var l={params:o};popWSL.loginBlock&&(l["disable-layer"]=popWSL.loginBlock,l["urlfetched-callbacks"]=[wsl_wordpress_social_login_callback]),popUserAccount.fetchLoggedInUserData(l)};
;!function(t){popPhotoSwipe={linksImage:function(e){var i=this,a=e.anchor;new PhotoSwipe(t("#pswp")[0],PhotoSwipeUI_Default,i.getItems(a),i.getOptions(a)).init()},getOptions:function(t){return{index:this.getIndex(t),bgOpacity:.8,showHideOpacity:!0,history:!1,loop:!1,shareButtons:[{id:"download",label:M.LABELS.DOWNLOAD,url:"{{raw_image_url}}?fileaction=download",download:!0}]}},getItem:function(t){var e=t.children("img"),i={src:t.attr("href"),msrc:e.attr("src"),w:640,h:480};if(e.attr("width")&&e.attr("height")&&(i.w=e.attr("width"),i.h=e.attr("height")),t.data("size")){var a=t.data("size").split("x");i.w=a[0],i.h=a[1]}return t.attr("title")?i.title=t.attr("title"):e.attr("alt")&&(i.title=e.attr("alt")),i},getItems:function(e){var i=this,a=[],r=e.closest(".gallery");return r.length?r.find(".gallery-item a").each(function(){a.push(i.getItem(t(this)))}):a.push(i.getItem(e)),a},getIndex:function(t){var e=t.closest(".gallery-item");return e.length?e.index():0}}}(jQuery),popJSLibraryManager.register(popPhotoSwipe,["linksImage"]);
;!function(e){popCustomFunctions={addPageSectionIds:function(e){var t=e.pageSection,i=e.template,n=popManager.getSettingsId(t),a=t.attr("id");a==M.PS_HOVER_ID?popJSRuntimeManager.addPageSectionId(n,i,a,"closehover"):a==M.PS_FRAME_NAVIGATOR_ID?popJSRuntimeManager.addPageSectionId(n,i,a,"closenavigator"):a==M.PS_ADDONS_ID&&(popJSRuntimeManager.addPageSectionId(n,i,a,"window-fullsize"),popJSRuntimeManager.addPageSectionId(n,i,a,"window-maximize"),popJSRuntimeManager.addPageSectionId(n,i,a,"window-minimize"))},pageSectionInitialized:function(e){var t=e.pageSection;t.attr("id")==M.PS_PAGETABS_ID&&popManager.getPageSectionGroup(t).on("on.bs.pagesection-group:pagesection-"+M.PS_HOVER_ID+":closed",function(){t.find("a.pop-pagetab-btn.active").trigger("click")})},pageSectionNewDOMsBeforeInitialize:function(t){var i=this,n=t.pageSection,a=t.newDOMs,o=t.inactivePane,r=n.attr("id");o=!0===o&&a.siblings(".pop-pagesection-page").length>0;var p=popManager.isFirstLoad(n),s=a.filter(".tab-pane"),d=[M.PS_PAGETABS_ID,M.PS_ADDONTABS_ID];if([M.PS_MAIN_ID,M.PS_ADDONS_ID].indexOf(r)>-1){if(o){if(r==M.PS_MAIN_ID){var c=e("#"+M.PS_PAGETABS_ID);popPageSectionManager.open(c),popPageSectionManager.open(c,"xs")}}else s.addClass("active");if(r==M.PS_ADDONS_ID)s.on("shown.bs.tabpane",function(){i.handleWindow(n,"minimized")}),o||p||i.handleWindow(n,"minimized");else{var S=e("#"+M.PS_ADDONS_ID);s.on("shown.bs.tabpane",function(){i.handleWindow(S,"fullsize")}),o||p||i.handleWindow(S,"fullsize")}}else d.indexOf(r)>-1&&o&&a.filter(".pop-pagesection-page").find(".pop-pagetab-btn").addClass("pop-highlight");var g=[M.PS_MAIN_ID,M.PS_HOVER_ID,M.PS_ADDONS_ID,M.PS_FRAME_NAVIGATOR_ID],l=[M.PS_QUICKVIEW_ID,M.PS_QUICKVIEWINFO_ID],u=[M.PS_SIDEINFO_ID],_=[M.PS_MODALS_ID];if(g.indexOf(r)>-1){var I=r==M.PS_MAIN_ID,u=e("#"+M.PS_SIDEINFO_ID+",#"+M.PS_FRAME_SIDE_ID+",#"+M.PS_FRAME_NAVIGATOR_ID);popCustomBootstrap.activateTabPanes(n,a,o,I,u)}else d.indexOf(r)>-1?popCustomBootstrap.activatePageTabs(n,a,o):u.indexOf(r)>-1?popCustomBootstrap.activateSideTabpanes(n,a,o):l.indexOf(r)>-1?popCustomBootstrap.activateQuickviewTabpanes(n,a,o):_.indexOf(r)>-1&&popCustomBootstrap.activateModals(n,a)},isUserIdSameAsLoggedInUser:function(e){if(popUserAccount.isLoggedIn()){var t=e.input;return popUserAccount.id==t}return!1},getEmbedUrl:function(e){var t=this,i=e.url;return t.addURLParams(add_query_arg(M.URLPARAM_THEMEMODE,M.THEMEMODE_WASSUP_EMBED,i))},getUnembedUrl:function(e){var t=e.url;return removeQueryFields(t,[M.URLPARAM_THEMEMODE])},getPrintUrl:function(e){var t=this,i=e.url;return t.addURLParams(add_query_arg(M.URLPARAM_ACTION,M.URLPARAM_ACTION_PRINT,add_query_arg(M.URLPARAM_THEMEMODE,M.THEMEMODE_WASSUP_PRINT,i)))},scrollToElem:function(e){var t=this,i=e.elem,n=e.position,a=e.animate,o=popManager.getPageSection(n),r=n.offset().top-o.offset().top;return t.execScrollTop(i,r,a)},scrollTop:function(e){var t=this,i=e.elem,n=e.top,a=e.animate;return t.execScrollTop(i,n,a)},getPosition:function(e){var t=e.elem;return t.attr("id")!=M.PS_MAIN_ID||t.hasClass("perfect-scrollbar")?0:body.scrollTop},execScrollTop:function(t,i,n){return t.attr("id")==M.PS_MAIN_ID&&!t.hasClass("perfect-scrollbar")&&(n?e(document.body).animate({scrollTop:i},"fast"):window.scrollTo(0,i),!0)},addURLParams:function(e){return M.THEMESTYLE&&(e=add_query_arg(M.URLPARAM_THEMESTYLE,M.THEMESTYLE,e)),e},handleWindow:function(e,t){var i=e.closest(".window");popWindow.getSize(i)==t&&popWindow.maximize(i)}}}(jQuery),popJSLibraryManager.register(popCustomFunctions,["addPageSectionIds","pageSectionNewDOMsBeforeInitialize"],!0),popJSLibraryManager.register(popCustomFunctions,["pageSectionInitialized","getEmbedUrl","getUnembedUrl","getPrintUrl","isUserIdSameAsLoggedInUser","getPosition","scrollToElem","scrollTop"]),function(e){popUserRole={filterByCommunity:function(t){var i=t.pageSection,n=t.block;t.targets.change(function(t){var a=e(this),o=a.val(),r=e(a.data("target"));if(a.is(":checked")){var p=a.data("user-datum");popTypeahead.triggerSelect(i,n,r,p)}else popTypeahead.removeSelected(r,o)})}}}(jQuery),popJSLibraryManager.register(popUserRole,["filterByCommunity"]),function(e){popUREAAL={isActionUpdatedUserMembership:function(e){return e.input==M.ACTION_USER_UPDATEDUSERMEMBERSHIP},isActionJoinedCommunity:function(e){return e.input==M.ACTION_USER_JOINEDCOMMUNITY},isObjectTypeUser:function(e){return e.input==M.OBJECTTYPE_USER}}}(jQuery),popJSLibraryManager.register(popUREAAL,["isActionUpdatedUserMembership","isActionJoinedCommunity","isObjectTypeUser"]);