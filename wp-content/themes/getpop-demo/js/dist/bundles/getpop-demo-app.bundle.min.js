/* Minify: at least one missing file. See http://code.google.com/p/minify/wiki/Debugging */

;function getMultiLayoutKey(e,t){var r=M.MULTILAYOUT_KEYFIELDS[e]||[];if(!r.length)return"default";var n=[];return jQuery.each(r,function(e,r){n.push(t[r])}),n.join("-")}Handlebars.registerHelper("showmore",function(e,t){var r=t.hash.len||0;if(r>0&&e.length>r+100){var n=r,a='<a href="#" class="pop-showmore-more">'+M.STRING_MORE+"</a>",s='<a href="#" class="pop-showmore-less hidden">'+M.STRING_LESS+"</a>",i=!1,o=!0;if(e.length>n&&e.substr(r).indexOf("</p>")>-1&&(i=!0,o=!1,n=r+(e=e.substr(0,r)+'<span class="pop-showmore-more-full hidden">'+e.substr(r,e.substr(r).indexOf("</p>"))+"</span> "+a+e.substr(r+e.substr(r).indexOf("</p>"))).substr(r).indexOf("</p>")+"</p>".length),i||e.length>n){var h=e.substr(n),p=h.trim().length;if(i||p){var u='<span class="pop-showmore-more-teaser">'+e.substr(0,n)+"</span>"+(p?'<span class="pop-showmore-more-full hidden">'+h+"</span> ":" ")+(o?a:"")+s;return new Handlebars.SafeString(u)}}}return e}),Handlebars.registerHelper("ondate",function(e,t){return new Handlebars.SafeString(M.ONDATE.format(e))}),Handlebars.registerHelper("addParam",function(e,t,r,n){return jQuery.isArray(r)||(r=[r]),jQuery.each(r,function(r,n){e=add_query_arg(t,n,e)}),e}),Handlebars.registerHelper("destroyUrl",function(e,t){return new Handlebars.SafeString(popManager.getDestroyUrl(e))}),Handlebars.registerHelper("statusLabel",function(e,t){var r='<span class="label '+M.STATUS.class[e]+" label-"+e+'">'+M.STATUS.text[e]+"</span>";return new Handlebars.SafeString(r)}),Handlebars.registerHelper("labelize",function(e,t,r){var n="";if(e)for(var a=0;a<e.length;a++)n+='<span class="label '+t+" "+(M.LABELIZE_CLASSES[e[a]]?M.LABELIZE_CLASSES[e[a]]:"")+'">'+e[a]+"</span> ";return new Handlebars.SafeString(n)}),Handlebars.registerHelper("mod",function(e,t,r){if(arguments.length<3)throw new Error("Handlebars Helper equal needs 2 parameters");return offset=r.hash.offset||0,(e+offset)%t==0?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("compare",function(e,t,r){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var n=r.hash.operator||"==",a={eq:function(e,t){return e==t||e.toString()==t.toString()},"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},typeof:function(e,t){return typeof e==t},in:function(e,t){return t.indexOf(e)>=0},notin:function(e,t){return-1==t.indexOf(e)}};if(!a[n])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+n);return a[n](e,t)?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("get",function(e,t,r){return void 0===e||void 0===e[t]?"":e[t]}),Handlebars.registerHelper("ifget",function(e,t,r){if(void 0===e)return"";var n=r.hash.context||this,a=!1;if(r.hash.method){var s=popJSLibraryManager.execute(r.hash.method,{domain:n.tls.domain,input:e[t]});jQuery.each(s,function(e,t){if(t)return a=!0,-1})}else a=e[t];return a?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("withget",function(e,t,r){if(void 0===e||void 0===e[t])return"";var n=e[t];return"object"===jQuery.type(n)&&popManager.expandJSKeys(n),r.fn(n)}),Handlebars.registerHelper("iffirstload",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId;return popManager.isFirstLoad(r)?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("interceptAttr",function(e){var t=(e.hash.context||this)[M.JS_INTERCEPT]||{};return new Handlebars.SafeString((t[M.JS_TYPE]?' data-intercept="'+t[M.JS_TYPE]+'"':"")+(t.settings?' data-intercept-settings="'+t[M.JS_SETTINGS]+'"':"")+(t[M.JS_TARGET]?' target="'+t[M.JS_TARGET]+'"':"")+(t[M.JS_SKIPSTATEUPDATE]?' data-intercept-skipstateupdate="true"':"")+' style="display: none;"')}),Handlebars.registerHelper("generateId",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId,n=e.hash.targetId||t.bs.bsId,a=e.hash.template||t[M.JS_TEMPLATE],s=e.hash.fixed||t[M.JS_FIXEDID],i=e.hash.idUnique||t[M.JS_ISIDUNIQUE],o=e.hash.group,h=e.fn(this),p=t.ignorePSRuntimeId,u=t.tls.domain,d=e.hash.addURL?t.tls.feedback[M.URLPARAM_URL]:"";d&&popJSRuntimeManager.setBlockURL(d);var l=popJSRuntimeManager.addTemplateId(u,r,n,a,h,o,s,i,p),S=[];return S.push('id="'+l+'"'),S.push('data-templateid="'+a+'"'),d&&(S.push("data-"+M.PARAMS_TOPLEVEL_URL+'="'+d+'"'),S.push("data-"+M.PARAMS_TOPLEVEL_DOMAIN+'="'+getDomain(d)+'"')),new Handlebars.SafeString(S.join(" "))}),Handlebars.registerHelper("lastGeneratedId",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId,n=e.hash.targetId||t.bs.bsId,a=e.hash.template||t[M.JS_TEMPLATE],s=e.hash.domain||t.tls.domain,i=e.hash.group;return popJSRuntimeManager.getLastGeneratedId(s,r,n,a,i)}),Handlebars.registerHelper("applyLightTemplate",function(e,t){var r=t.hash.context||this,n=popManager.getHtml(e,r);return new Handlebars.SafeString(n)}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),Handlebars.registerHelper("enterModule",function(e,t){var r=t.hash.context||this,n=t.hash.template||r[M.JS_TEMPLATE],a=e.tls,s=e.pss,i=e.bs,o=e.itemObject,h=e.itemObjectDBKey,p=e.ignorePSRuntimeId,u=void 0!==t.hash.itemDBKey?t.hash.itemDBKey:e.itemDBKey,d={itemObject:o,itemObjectDBKey:h,itemDBKey:u,items:void 0!==t.hash.items?t.hash.items:e.items,tls:a,pss:s,bs:i,ignorePSRuntimeId:p},l=a.domain,S=s.pssId,f=(s.psId,i.bsId);i.bId;jQuery.extend(r,popManager.getRuntimeConfiguration(l,S,f,n)),popManager.expandJSKeys(r);var c=t.hash.itemObjectId;"array"===jQuery.type(c)&&(c.length?c=c[0]:(c=null,o=null,d.itemObject=o)),t.hash.itemDBKey&&c?(u=t.hash.itemDBKey,o=popManager.getItemObject(l,u,c),d.itemObject=o,d.itemObjectDBKey=u,d.itemDBKey=u,d.items=[c]):t.hash.itemDBKey&&t.hash.items?(d.itemDBKey=t.hash.itemDBKey,d.items=t.hash.items):t.hash.subcomponent&&c?(u=i["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],o=popManager.getItemObject(l,u,c),d.itemObject=o,d.itemObjectDBKey=u,d.itemDBKey=u,d.items=[c]):t.hash.subcomponent&&t.hash.items?(u=i["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],d.itemDBKey=u,d.items=t.hash.items):t.hash.items?d.items=t.hash.items:t.hash.itemDBKey&&(d.itemDBKey=t.hash.itemDBKey,d.itemObject=null,d.itemObjectDBKey=null,d.items=null),d.items&&"array"!==jQuery.type(d.items)&&(d.items=[d.items]),t.hash["feedback-msg"]&&(d["feedback-msg"]=t.hash["feedback-msg"]);var m=[],g=[],b=[];r[M.JS_MODULEOPTIONS]&&(m=r[M.JS_MODULEOPTIONS][M.JS_OVERRIDEFROMITEMOBJECT]||[],g=r[M.JS_MODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),r[M.JS_RUNTIMEMODULEOPTIONS]&&(b=r[M.JS_RUNTIMEMODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),m.length&&popManager.overrideFromItemObject(o,d,m);var y=g.concat(b);y.length&&popManager.replaceFromItemObject(l,S,f,n,o,d,y);var E=t.hash.parentContext||{};if(E){d["parent-context"]=E;for(var H=E;H["parent-context"];)H=H["parent-context"];d["root-context"]=H}jQuery.extend(r,d);var O=popManager.getHtml(n,r);return t.hash.unsafe?O:new Handlebars.SafeString(O)}),Handlebars.registerHelper("withLayout",function(e,t,r,n,a){var s=n.tls.domain,i=r[getMultiLayoutKey(e,popManager.getItemObject(s,e,t))];if(i||(i=r.default),!i)return"";var o=n[M.JS_MODULES][i];return jQuery.extend(o,{itemDBKey:e,itemObjectId:t}),popManager.expandJSKeys(o),a.fn(o)}),Handlebars.registerHelper("layoutLabel",function(e,t,r){var n=getMultiLayoutKey(e,t);return M.MULTILAYOUT_LABELS[n]||""}),Handlebars.registerHelper("withBlock",function(e,t,r){if(void 0!==e&&void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][t])return e=e[M.JS_MODULES][t],popManager.expandJSKeys(e),r.fn(e)}),Handlebars.registerHelper("withModule",function(e,t,r){if(void 0!==e&&void 0!==e[M.JS_SETTINGSIDS]&&void 0!==e[M.JS_SETTINGSIDS][t]){var n=e[M.JS_SETTINGSIDS][t];if(void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][n])return e=e[M.JS_MODULES][n],popManager.expandJSKeys(e),jQuery.extend(e,r.hash),r.fn(e)}}),Handlebars.registerHelper("withSublevel",function(e,t){var r=t.hash.context||this;return"object"===jQuery.type(r)&&popManager.expandJSKeys(r),t.fn(r[e])}),Handlebars.registerHelper("withItemObject",function(e,t,r){var n=(a=r.hash.context||this).tls.domain,a=popManager.getItemObject(n,e,t);return r.fn(a)}),Handlebars.registerHelper("join",function(e,t){var r=t.hash.delimiter||",",n=n=t.hash.start||0,a=e?e.length:0,s=t.hash.end||a,o="";if(s>a&&(s=a),"function"==typeof t){for(i=n;i<s;i++)i>n&&(o+=r),"string"==typeof e[i]?o+=e[i]:o+=t(e[i]);return o}return[].concat(e).slice(n,s).join(r)});
;function getDomain(A){var u=A.split("/");return u[0]+"//"+u[2]}function removeScheme(A){var u=A.split("//");return 1==u.length?u[0]:u[1]}function getDomainId(A){return removeScheme(A).replace(/\./g,"-")}function unescapeHtml(A){var u=document.createElement("div");return u.innerHTML=A,u.innerText||u.text||u.textContent}function add_query_arg(A,u,r){return r+=(r.split("?")[1]?"&":"?")+A+"="+u}function removeQueryFields(A,u){if(!u||!u.length)return A;var r=document.createElement("a");r.href=A;var e=r.search.slice(1).split("&").map(function(A){return A.split("=")}).filter(function(A){return u.every(function(u){return u!=A[0]})}).map(function(A){return A.join("=")}).join("&");return r.protocol+"//"+r.host+r.pathname+(e?"?"+e:"")+r.hash}function removeParams(A){return A.indexOf("?")>-1?A.substr(0,A.indexOf("?")):A}function getParams(A){if(A.indexOf("?")>-1){var u=A.substr(A.indexOf("?")+1);return u.indexOf("#")>-1&&(u=u.substr(0,u.indexOf("#"))),u}return""}function getParam(A,u){return splitUrlParams(u?getParams(u):window.location.search.substring(1))[A]}function splitUrlParams(A){return void 0!==urlParams[A]?urlParams[A]:(urlParams[A]=jQuery.extend({},splitParams(A)),urlParams[A])}function splitParams(A){for(var u,r={},e=function(A){return decodeURIComponent(A).replace(/\+/g," ")},n=decodeURI(A),F=/([^&=]+)=?([^&]*)/g;u=F.exec(n);)if("-1"==u[1].indexOf("["))r[e(u[1])]=e(u[2]);else{var t=u[1].indexOf("["),o=u[1].slice(t+1,u[1].indexOf("]",t)),a=e(u[1].slice(0,t));"object"!=typeof r[a]&&(r[e(a)]={}),o?r[e(a)][e(o)]=e(u[2]):Array.prototype.push.call(r[e(a)],e(u[2]))}return r}function searchInObject(A,u){for(var r in A)if(Object.prototype.hasOwnProperty.call(A,r)&&A[r]==u)return!0;return!1}function getRandomInt(A,u){return Math.floor(Math.random()*(u-A+1)+A)}function doScroll(A,u){u=u||!1;var r=A.offset().top-20;u?jQuery("html, body").animate({scrollTop:r}):window.scrollTo(0,r)}function removeMarker(A){return A.indexOf("#")>-1?A.substr(0,A.indexOf("#")):A}function counterNext(){return++counter}function windowResize(){var A=document.createEvent("UIEvents");A.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(A)}function isUrlValid(A){return/^(https?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(A)}function beep(){new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(A){return!1}}function load_script(A,u,r){function e(){n||(n=!0,u&&u(A,"ok"))}var n=!1,F=document.createElement("script");r&&(F.async=!1),F.onload=e,F.onreadystatechange=function(){n||"complete"===F.readyState&&e()},F.onerror=function(){n||(n=!0,u&&u(A,"error"))},F.src=A,document.body.appendChild(F)}var urlParams={},counter=0;
;jQuery,popUtils={getPath:function(e){var t=document.createElement("a");return t.href=e,t.pathname.substr(M.PATHSTARTPOS)}};
;String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(r,o){return void 0!==t[o]?t[o]:r})}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return 0==this.indexOf(t)}),Array.prototype.some||(Array.prototype.some=function(t){var r=this.length;if("function"!=typeof t)throw new TypeError;for(var o=arguments[1],n=0;n<r;n++)if(n in this&&t.call(o,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t){var r=this.length;if("function"!=typeof t)throw new TypeError;for(var o=new Array,n=arguments[1],e=0;e<r;e++)if(e in this){var i=this[e];t.call(n,i,e,this)&&o.push(i)}return o}),Date.now||(Date.now=function(){return(new Date).getTime()});
;!function(e){popJSLibraryManager={libraries:[],methods:{},register:function(t,i,r,s){var n=this;n.libraries.push(t),e.each(i,function(e,i){n.methods[i]&&!s||(n.methods[i]=[]),r?n.methods[i].unshift(t):n.methods[i].push(t)})},getLibraries:function(e){return this.methods[e]||[]},execute:function(t,i){var r={},s=this.methods[t];return s&&e.each(s,function(e,s){r["l"+e]=s[t](i)}),r}}}(jQuery);
;!function(s){popJSRuntimeManager={"full-session-ids":{},"last-session-ids":{},blockURL:null,pageSectionURL:"general",setBlockURL:function(e){var t=this,i="";if("object"==s.type(e)){var n=e;i=popManager.getBlockTopLevelURL(n)}else i=e;t.blockURL=i},initBlockVarPaths:function(s,e,t,i,n,a,o){o=o||M.JSMETHOD_GROUP_MAIN,s[e]||(s[e]={}),s[e][t]||(s[e][t]={}),s[e][t][i]||(s[e][t][i]={}),s[e][t][i][n]||(s[e][t][i][n]={}),s[e][t][i][n][a]||(s[e][t][i][n][a]={}),s[e][t][i][n][a][o]||(s[e][t][i][n][a][o]=[])},initVars:function(s,e,t,i,n,a){var o=this;o.initBlockVarPaths(o["full-session-ids"],s,e,t,i,n,a),o.initBlockVarPaths(o["last-session-ids"],s,e,t,i,n,a)},addGroup:function(s,e){return e&&(s+=M.ID_SEPARATOR+e),s},addPageSectionId:function(s,e,t,i,n){return this.addTemplateId(s,e,e,t,i,n,!0,!0)},addTemplateId:function(s,e,t,i,n,a,o,d,l){var r=this;return d||(n+=popManager.getUniqueId(s)),o||(n+=M.ID_SEPARATOR+counterNext()),n=r.addGroup(n,a),l||r.addTargetId(r.pageSectionURL,s,e,e,i,a,n),e!=t&&r.addTargetId(r.blockURL,s,e,t,i,a,n),n},addTargetId:function(s,e,t,i,n,a,o){var d=this;return a=a||M.JSMETHOD_GROUP_MAIN,d.initVars(s,e,t,i,n,a),d["full-session-ids"][s][e][t][i][n][a].push(o),d["last-session-ids"][s][e][t][i][n][a].push(o),o},getLastGeneratedId:function(s,e,t,i,n){var a=this;n=n||M.JSMETHOD_GROUP_MAIN;var o=e==t?a.pageSectionURL:a.blockURL,d=a["full-session-ids"][o][s][e][t][i][n];return d[d.length-1]},getPageSectionSessionIds:function(s,e,t){var i=this,n=i.pageSectionURL;return i.getTargetSessionIds(n,s,e,e,t)},getBlockSessionIds:function(s,e,t,i){var n=this,a=popManager.getBlockTopLevelURL(t);return n.getTargetSessionIds(a,s,e,t,i)},getTargetSessionIds:function(s,e,t,i,n){var a=this,o=popManager.getSettingsId(t),d=popManager.getSettingsId(i);return n=n||"last",a[n+"-session-ids"][s]&&a[n+"-session-ids"][s][e]&&a[n+"-session-ids"][s][e][o]?a[n+"-session-ids"][s][e][o][d]:null},deletePageSectionLastSessionIds:function(e,t){var i=this,n=popManager.getSettingsId(t),a=i.pageSectionURL;delete i["last-session-ids"][a][e][n][n],s.isEmptyObject(i["last-session-ids"][a][e][n])&&(delete i["last-session-ids"][a][e][n],s.isEmptyObject(i["last-session-ids"][a][e])&&(delete i["last-session-ids"][a][e],s.isEmptyObject(i["last-session-ids"][a])&&delete i["last-session-ids"][a]))},deleteBlockLastSessionIds:function(e,t,i){var n=this,a=popManager.getSettingsId(t),o=popManager.getSettingsId(i),d=popManager.getBlockTopLevelURL(i);n["last-session-ids"][d]&&n["last-session-ids"][d][e]&&n["last-session-ids"][d][e][a]&&n["last-session-ids"][d][e][a][o]&&(delete n["last-session-ids"][d][e][a][o],s.isEmptyObject(n["last-session-ids"][d][e][a])&&(delete n["last-session-ids"][d][e][a],s.isEmptyObject(n["last-session-ids"][d][e])&&(delete n["last-session-ids"][d][e],s.isEmptyObject(n["last-session-ids"][d])&&delete n["last-session-ids"][d])))}}}(jQuery);
;!function(t){popPageSectionManager={offcanvasToggle:function(e){var n=this;e.pageSection;e.targets.click(function(e){e.preventDefault();var a=t(this),s=a.data("mode"),o=t(a.data("target")),i=a.data("toggle");"offcanvas-open"==i?n.open(o,s):"offcanvas-close"==i?n.close(o,s):"offcanvas-toggle"==i&&n.toggle(o,s)})},isHidden:function(t){var e=this,n=t.targets.closest(".offcanvas");return e.execIsHidden(n)},execIsHidden:function(t){var e=this;if(t.length){var n=e.getOffcanvasActiveClass(t);return!e.getGroup(t).hasClass(n)}return!1},getOffcanvasActiveClass:function(t,e){var n="active-"+t.data("offcanvas");return"xs"==e&&(n+="-xs"),n},open:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.addClass(s),n.triggerStatus(t,e,"opened")},close:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.removeClass(s),n.triggerStatus(t,e,"closed")},toggle:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.hasClass(s)?n.close(t,e):n.open(t,e)},triggerStatus:function(t,e,n){this.getGroup(t).triggerHandler("on.bs.pagesection-group:pagesection-"+t.attr("id")+":"+n,[t,e])},getTopLevelSettingsId:function(){return M.TEMPLATE_TOPLEVEL_SETTINGS_ID},getPageSectionStatus:function(e){return t("#"+e.attr("id")+"-status")},getGroup:function(e){return e?e.closest(".pop-pagesection-group"):t("#"+M.TEMPLATE_PAGESECTIONGROUP_ID)},theater:function(t){var e=this,n=e.getGroup();e.transitionEndResize(),t?(n.addClass("theater"),n.triggerHandler("on.bs.pagesection:theater")):(n.removeClass("theater"),n.triggerHandler("off.bs.pagesection:theater"))},isTheater:function(){return this.getGroup().hasClass("theater")},transitionEndResize:function(){this.getGroup().one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){windowResize()})},getOpenMode:function(t){return t.data("pagesection-openmode")||"automatic"}}}(jQuery),popJSLibraryManager.register(popPageSectionManager,["isHidden","offcanvasToggle"],!0);
;!function(e){popBrowserHistory={loaded:!1,documentInitialized:function(){var t=this;e(window).on("popstate",function(e){if(t.loaded){var r=t.removePushURLAtts(window.location.href);r=t.getApplicationURL(r);var a={skipPushState:!0};popURLInterceptors.getInterceptors(r).length?popURLInterceptors.intercept(r,a):popManager.fetch(r,a)}else t.loaded=!0})},getApplicationURL:function(e){var t={url:e};return popJSLibraryManager.execute("modifyApplicationURL",t),e=t.url},addPushURLAtts:function(t){var r=popManager.getTopLevelFeedback(getDomain(t));return e.each(r[M.DATALOAD_PUSHURLATTS],function(e,r){t=add_query_arg(e,r,t)}),t},removePushURLAtts:function(t){var r=popManager.getTopLevelFeedback(getDomain(t)),a=[];return e.each(r[M.DATALOAD_PUSHURLATTS],function(e,t){a.push(e)}),removeQueryFields(t,a)},pushState:function(e){var t=this,r={url:e=t.addPushURLAtts(e)};popJSLibraryManager.execute("modifyPushStateURL",r),e=r.url,history.pushState({url:e},"",e),popJSLibraryManager.execute("stateURLPushed",r),t.loaded=!0},replaceState:function(e){var t=this;window.location.url!=e&&(e=t.addPushURLAtts(e),history.replaceState({url:e},"",e),t.loaded=!0)}}}(jQuery),popJSLibraryManager.register(popBrowserHistory,["documentInitialized"],!0);
;!function(t){popURLInterceptors={fullurl:{},partialurl:{},pageSectionNewDOMsInitialized:function(e){var r=this,a=e.pageSection,n=e.newDOMs;n.find('[data-intercept="fullurl"]').addBack('[data-intercept="fullurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e));r.fullurl[l]||(r.fullurl[l]={}),r.fullurl[l][i]||(r.fullurl[l][i]=[]),r.fullurl[l][i].push(n)}),n.find('[data-intercept="partialurl"]').addBack('[data-intercept="partialurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e));r.partialurl[l]||(r.partialurl[l]={}),r.partialurl[l][n]=i})},destroyTarget:function(e){var r=this,a=e.pageSection,n=e.destroyTarget;n.find('[data-intercept="fullurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e)),u=r.fullurl[l][i];u&&((u=u.filter(function(t,e){return n!=t})).length?r.fullurl[l][i]=u:delete r.fullurl[l][i])}),n.find('[data-intercept="partialurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getTarget(a,e);delete r.partialurl[i][n]})},getSettings:function(t){var e=t.data("intercept-settings")||"";return e=e.split(M.SEPARATOR)},getTarget:function(t,e){return e.attr("target")||popManager.getFrameTarget(t)},getUrl:function(t){return t.data("intercept-url")},getFullUrlInterceptors:function(e,r){var a=this,n=[],i=(r=r||{}).target||M.URLPARAM_TARGET_MAIN,l=a.fullurl;if(l[i])if(l[i][e])n.push(t("#"+l[i][e].join(", #")));else{var u=removeParams(e);if(e!=u&&l[i][u]){var p=t("#"+l[i][u].join(", #")).filter(".pop-interceptor");p.length&&n.push(p)}}return n},getPartialUrlInterceptor:function(e,r){var a=this,n=null,i=(r=r||{}).target||M.URLPARAM_TARGET_MAIN,l=a.partialurl;if(i){var u=l[i];u&&t.each(u,function(r,a){if(e.startsWith(a))return n=t("#"+r),!1})}return n},getURLInterceptors:function(t,e){var r=this,a=r.getFullUrlInterceptors(t,e),n=r.getPartialUrlInterceptor(t,e);return n&&a.push(n),a},getInterceptors:function(t,e){var r=this,a=r.getURLInterceptors(t,e);if(a.length)return a;var n=removeMarker(t);return n!=t&&(a=r.getURLInterceptors(n,e)),a},intercept:function(e,r){var a=this;r=r||{};var n=a.getInterceptors(e,r);if(n.length){r.event&&r.event.stopImmediatePropagation(),t.each(n,function(t,a){if(!(a.data("intercept-skipstateupdate")||r.skipstateupdate))return r.skipPushState||popBrowserHistory.pushState(e),popManager.updateTitle(a.data("title")),-1});var i=r["interceptor-atts"]||{};return t.each(n,function(n,l){t.each(i,function(t,e){l.data(t,e)});var u=r.relatedTarget;l.data("interceptedTarget",u);a.getSettings(l.parent());l.data("original-url",e),l.data("post-data",getParams(e)),l.trigger("click")}),!0}return!1}}}(jQuery),popJSLibraryManager.register(popURLInterceptors,["destroyTarget","pageSectionNewDOMsInitialized"],!0);
;function markResourceAsLoaded(e,r){popResourceLoader.markResourceAsLoaded(e,r)}!function(e){popResourceLoader={config:{},loading:{js:{resources:[]}},"error-loading":{js:{resources:[]}},"loading-urls":{},loaded:{js:{resources:[]}},"loaded-by-domain":{},preFetchPageSection:function(r){var o=this,s=r.url,a=r.options;if(M.USECODESPLITTING)if(o.configFilesLoaded(s,a))o.loadResourcesForURL(s);else{var n=o.loadURLConfigFile(s);e(document).one("loaded-url:"+escape(n),function(e){o.loadResourcesForURL(s)})}},areResourcesLoaded:function(e){var r=this;M.USECODESPLITTING&&(e.loaded=r.areResourcesLoadedForURL(e.fetchUrl))},markResourceAsLoaded:function(e,r){var o=this,s=o["loading-urls"][e];"ok"==r?o.loaded.js.resources.push(s):"error"==r&&o["error-loading"].js.resources.push(s),o.loading.js.resources.splice(o.loading.js.resources.indexOf(s),1),delete o["loading-urls"][e]},loadURLConfigFile:function(e){var r=this.getConfigFile(e);return load_script(r),r},configFilesLoaded:function(e,r){var o=this,s=o.getConfig(e);if(s.loaded)return!0;var a=o.getPropertiesForURL(e),n=a.hierarchy,t=a.path;if(["page","single"].indexOf(n)>=0&&s["loaded-paths"][n]&&s["loaded-paths"][n].indexOf(t)>=0)return!0;var i=o.getConfigFile(e);return s["loaded-files"].indexOf(i)>=0},getConfigFile:function(e){var r=this,o=r.getConfig(e),s=r.getPropertiesForURL(e),a=s.hierarchy,n=s.format;return o["configfile-urlplaceholder"].format(a,n)},getPropertiesForURL:function(e){var r=this,o=popUtils.getPath(e);return{hierarchy:r.getHierarchy(e),format:getParam(M.URLPARAM_FORMAT,e)||M.VALUES_DEFAULT,path:o}},getConfig:function(e){var r=this,o=getDomain(e),s=r.config[o];return s||o==M.HOME_DOMAIN||(s=r.config[M.HOME_DOMAIN]),s||{}},getHierarchy:function(e){var r=this.getConfig(e),o=popUtils.getPath(e);return o?o.startsWith(r.paths.author)&&o!=r.paths.author?"author":o.startsWith(r.paths.tag)&&o!=r.paths.tag?"tag":-1===r.paths.single.indexOf(o)&&r.paths.single.some(function(e){return o.startsWith(e)&&o!=e})?"single":"page":"home"},getResourcesDB:function(e){var r=this,o=r.getConfig(e);if(!o||!o.resources||!o.resources.js)return{};var s=r.getHierarchy(e),a=popUtils.getPath(e),n=o.resources.js[s];"single"==s?n=n[o.paths.single.filter(function(e){return a.startsWith(e)&&a!=e})[0]]:"page"==s&&(n=n[a]);var t={url:e,path:a,config:o,jsResourcesDB:n};return popJSLibraryManager.execute("loadResourcesDB",t),(n=t.jsResourcesDB)||{}},getURLComponents:function(e){var r=[],o=getParam(M.URLPARAM_TARGET,e)||M.URLPARAM_TARGET_MAIN,s=getParam(M.URLPARAM_FORMAT,e)||M.VALUES_DEFAULT,a=getParam(M.URLPARAM_TAB,e)||"";return s&&r.push(M.CODESPLITTING.PREFIXES.FORMAT+s),a&&r.push(M.CODESPLITTING.PREFIXES.TAB+a),o&&r.push(M.CODESPLITTING.PREFIXES.TARGET+o),{params:r,target:o,format:s,tab:a,key:r.join(M.SEPARATOR_RESOURCELOADER)}},initLoadedByDomain:function(e){var r=this;r["loaded-by-domain"][e]||(r["loaded-by-domain"][e]={js:{bundles:[],"bundle-groups":[]}})},loadResourcesForURL:function(r){var o=this,s=o.getConfig(r),a=o.getResourcesDB(r),n=o.getURLComponents(r),t=s.keys[n.key];if(t&&a[t]){var i=getDomain(r);o.initLoadedByDomain(i);var d=a[t];if(-1==o["loaded-by-domain"][i].js["bundle-groups"].indexOf(d)){var u=s["bundle-groups"][d]||[];u=e(u).not(o["loaded-by-domain"][i].js.bundles).get(),e.each(u,function(r,a){if(-1==o["loaded-by-domain"][i].js.bundles.indexOf(a)){var n=s.bundles[a];n=e(n).not(o.loaded.js.resources).get(),n=e(n).not(o.loading.js.resources).get(),e.each(n,function(e,r){o.loadResource(s,r)})}})}}else n.target!=M.URLPARAM_TARGET_MAIN&&(r=removeQueryFields(r,[M.URLPARAM_TARGET]),o.loadResourcesForURL(r))},loadResource:function(e,r){var o=this;o.loading.js.resources.push(r);var s=o["error-loading"].js.resources.indexOf(r);s>=0&&o["error-loading"].js.resources.splice(s,1);var a=e.sources[r],n=e["ordered-load-resources"].indexOf(r)>=0;load_script(a,markResourceAsLoaded,n),o["loading-urls"][a]=r},areResourcesLoadedForURL:function(r){var o=this,s=o.getConfig(r),a=o.getResourcesDB(r),n=o.getURLComponents(r),t=s.keys[n.key];if(t&&a[t]){var i=getDomain(r);o.initLoadedByDomain(i);var d=a[t];if(o["loaded-by-domain"][i].js["bundle-groups"].indexOf(d)>=0)return!0;var u=s["bundle-groups"][d]||[];if(!(u=e(u).not(o["loaded-by-domain"][i].js.bundles).get()).length)return o["loaded-by-domain"][i].js["bundle-groups"].push(d),!0;var l=!0;return e.each(u,function(r,a){var n=s.bundles[a];n=e(n).not(o.loaded.js.resources).get();var t=!0;if(e.each(n,function(e,r){if(o["error-loading"].js.resources.indexOf(r)>=0&&o.loadResource(s,r),-1==o.loaded.js.resources.indexOf(r)){t=!1;var a=s.sources[r];return o["loading-urls"][a]||o.loadResource(s,r),-1}}),!t)return l=!1,-1;o["loaded-by-domain"][i].js.bundles.push(a)}),!!l&&(o["loaded-by-domain"][i].js["bundle-groups"].push(d),!0)}return n.target==M.URLPARAM_TARGET_MAIN||(r=removeQueryFields(r,[M.URLPARAM_TARGET]),o.areResourcesLoadedForURL(r))}}}(jQuery),popJSLibraryManager.register(popResourceLoader,["preFetchPageSection","areResourcesLoaded"]);
;!function(e){popManager={mergingTemplatePromise:!1,state:{},sitemapping:{},runtimeMemory:{general:{},url:{}},initialBlockMemory:{},urlPointers:{},replicableMemory:{},firstLoad:{},documentTitle:null,domains:{},getMemory:function(e){return this.state[e].memory},getDatabase:function(e){return this.state[e].database},getUserDatabase:function(e){return this.state[e].userdatabase},getInitialBlockMemory:function(e){var t=this;if(e==M.INITIAL_URL)return t.initialBlockMemory[e];var n=t.urlPointers[e];return n?t.initialBlockMemory[n.url]:t.initialBlockMemory[e]||{}},addInitialBlockMemory:function(t){var n=this,a=t.feedback.toplevel[M.URLPARAM_URL];n.initialBlockMemory[a]||(n.initialBlockMemory[a]={dataset:{},feedback:{block:{}},"query-state":{general:{},domain:{}},runtimesettings:{configuration:{}}});var i=n.initialBlockMemory[a];e.each(t.settings.configuration,function(n,a){i["query-state"].general[n]||(i["query-state"].general[n]={},i["query-state"].domain[n]={},i.runtimesettings.configuration[n]={},i.dataset[n]={},i.feedback.block[n]={}),e.extend(i["query-state"].general[n],t["query-state"].general[n]),e.extend(i["query-state"].domain[n],t["query-state"].domain[n]),e.extend(i.runtimesettings.configuration[n],t.runtimesettings.configuration[n]),e.extend(i.dataset[n],t.dataset[n]),e.extend(i.feedback.block[n],t.feedback.block[n])})},getReplicableMemory:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN;var a=n.urlPointers[e];return n.replicableMemory[a.url][a.target]},saveUrlPointers:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var i=t.feedback.toplevel[M.URLPARAM_URL];e.each(t.feedback.pagesection,function(t,r){r["intercept-urls"]&&e.each(r["intercept-urls"],function(t,r){e.each(r,function(e,t){a.urlPointers[t]={url:i,target:n}})})}),e.each(t.feedback.block,function(t,r){e.each(r,function(t,r){r["intercept-urls"]&&e.each(r["intercept-urls"],function(t,r){e.each(r,function(e,t){a.urlPointers[t]={url:i,target:n}})})})})},addReplicableMemory:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var i=!1;if(e.each(t.settings.configuration,function(e,t){if(t[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE].length)return i=!0,-1}),i){var r=t.feedback.toplevel[M.URLPARAM_URL];a.replicableMemory[r]||(a.replicableMemory[r]={}),a.replicableMemory[r][n]={dataset:e.extend(!0,{},t.dataset),feedback:e.extend(!0,{},t.feedback),"query-state":e.extend(!0,{},t["query-state"])}}},getRuntimeMemory:function(e,t,n,a){var i=this;if(a=a||{},i.getPageSectionPage(n).data("paramsscope")==M.SETTINGS_PARAMSSCOPE_URL){var r=a.url||i.getTopLevelFeedback(e)[M.URLPARAM_URL];return i.runtimeMemory.url[r]||(i.runtimeMemory.url[r]={}),n.data(M.PARAMS_PARAMSSCOPE_URL,r),i.runtimeMemory.url[r]}return i.runtimeMemory.general},newRuntimeMemoryPage:function(e,t,n,a){var i=this;if(!(a=a||{}).url){var r=i.getTopLevelFeedback(e);a.url=r[M.URLPARAM_URL]}var o=i.getRuntimeMemory(e,t,n,a),s=i.getSettingsId(t),c=i.getSettingsId(n);return o[s]||(o[s]={}),o[s][c]={"query-state":{general:{},domain:{}},id:null},o[s][c]},deleteRuntimeMemoryPage:function(t,n,a,i){var r=this,o=r.getRuntimeMemory(t,n,a,i),s=r.getSettingsId(n),c=r.getSettingsId(a);o[s]&&(delete o[s][c],e.isEmptyObject(o[s])&&delete o[s])},getRuntimeMemoryPage:function(t,n,a){var i,r,o=this;if((a=a||{}).url)r=a.url;else if("object"==e.type(n)){var s=n;r=o.getTargetParamsScopeURL(s)}i=r?o.runtimeMemory.url[r]:o.runtimeMemory.general;var c=o.getSettingsId(t),g=o.getSettingsId(n);if(!i[c]||!i[c][g]){var u="Mempage not available";throw r&&(u+=" for url "+r),new Error(u)}return i[c][g]},isFirstLoad:function(e){var t=this;return t.firstLoad[t.getSettingsId(e)]},initDomainVars:function(e){this.state[e]={memory:{settings:{"js-settings":{},jsmethods:{pagesection:{},block:{}},"templates-cbs":{},"templates-paths":{},"db-keys":{},configuration:{}},runtimesettings:{"query-url":{},"query-multidomain-urls":{},configuration:{},"js-settings":{}},dataset:{},feedback:{block:{},pagesection:{},toplevel:{}},"query-state":{general:{},domain:{}}},database:{},userdatabase:{}}},init:function(){var t=this;if(e(document.body).removeClass("pop-loadinghtml"),e("#"+popPageSectionManager.getTopLevelSettingsId()).length){var n=M.HOME_DOMAIN;t.initLocalStorage(),t.initDomain(n),t.initTopLevelJson(n),t.initDocument(n);var a=t.getMemory(n),i=[];e.each(a.settings.configuration,function(a,r){var o=r[M.JS_FRONTENDID],s=e("#"+o);s.attr("data-settings-id",a),s.addClass("pop-pagesection"),t.initPageSectionSettings(n,s,r),t.addPageSectionIds(n,s,r[M.JS_TEMPLATE]),t.initPageSection(s),i.push(s)});var r={"serverside-rendering":M.USESERVERSIDERENDERING},o=e.Deferred();t.mergingTemplatePromise=o.promise(),e.each(i,function(e,a){t.renderPageSection(n,a,r)}),o.resolve(),e(document.body).removeClass("pop-loadingframe"),e.each(i,function(e,a){t.pageSectionInitialized(n,a)}),e(document.body).removeClass("pop-loadingjs");var s=t.getTopLevelFeedback(n),c=s[M.URLPARAM_URL];s[M.URLPARAM_SILENTDOCUMENT]||(popBrowserHistory.replaceState(c),t.updateDocument(n)),t.documentInitialized(n),t.backgroundLoad(M.BACKGROUND_LOAD),t.backgroundLoad(s[M.URLPARAM_BACKGROUNDLOADURLS])}},expandJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&(e[M.JS_MODULES]&&(e.modules=e[M.JS_MODULES]),e.bs&&e.bs["db-keys"]&&e.bs["db-keys"][M.JS_SUBCOMPONENTS]&&(e.bs["db-keys"].subcomponents=e.bs["db-keys"][M.JS_SUBCOMPONENTS]),e[M.JS_TEMPLATE]&&(e.template=e[M.JS_TEMPLATE]),e[M.JS_TEMPLATEIDS]&&(e["template-ids"]=e[M.JS_TEMPLATEIDS]),e[M.JS_SETTINGSID]&&(e["settings-id"]=e[M.JS_SETTINGSID]),e[M.JS_SETTINGSIDS]&&(e["settings-ids"]=e[M.JS_SETTINGSIDS],e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS]&&(e["settings-ids"].blockunits=e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS])),e[M.JS_TEMPLATESOURCES]&&(e["template-sources"]=e[M.JS_TEMPLATESOURCES]),e[M.JS_INTERCEPT]&&(e.intercept=e[M.JS_INTERCEPT]),e[M.JS_BLOCKSETTINGSIDS]&&(e["block-settings-ids"]=e[M.JS_BLOCKSETTINGSIDS],e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]&&(e["block-settings-ids"].blockunits=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]&&(e["block-settings-ids"]["blockunits-replicable"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME]&&(e["block-settings-ids"]["blockunits-frame"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME])),e[M.JS_REPLICATEBLOCKSETTINGSIDS]&&(e["replicate-blocksettingsids"]=e[M.JS_REPLICATEBLOCKSETTINGSIDS],e[M.JS_INTERCEPTSKIPSTATEUPDATE]&&(e["intercept-skipstateupdate"]=e[M.JS_INTERCEPTSKIPSTATEUPDATE]),e[M.JS_UNIQUEURLS]&&(e["unique-urls"]=e[M.JS_UNIQUEURLS]),e[M.JS_REPLICATETYPES]&&(e["replicate-types"]=e[M.JS_REPLICATETYPES])),e[M.JS_PARAMS]&&(e.params=e[M.JS_PARAMS]),e[M.JS_ITEMOBJECTPARAMS]&&(e["itemobject-params"]=e[M.JS_ITEMOBJECTPARAMS]),e[M.JS_PREVIOUSTEMPLATESIDS]&&(e["previoustemplates-ids"]=e[M.JS_PREVIOUSTEMPLATESIDS]),e[M.JS_BLOCKFEEDBACKPARAMS]&&(e["blockfeedback-params"]=e[M.JS_BLOCKFEEDBACKPARAMS]),e[M.JS_APPENDABLE]&&(e.appendable=e[M.JS_APPENDABLE]),e[M.JS_CLASS]&&(e.class=e[M.JS_CLASS]),e[M.JS_CLASSES]&&(e.classes=e[M.JS_CLASSES],e[M.JS_CLASSES][M.JS_APPENDABLE]&&(e.classes.appendable=e[M.JS_CLASSES][M.JS_APPENDABLE])),e[M.JS_STYLE]&&(e.style=e[M.JS_STYLE]),e[M.JS_STYLES]&&(e.styles=e[M.JS_STYLES]),e[M.JS_TITLES]&&(e.titles=e[M.JS_TITLES]),popJSLibraryManager.execute("expandJSKeys",{context:e}))},addPageSectionIds:function(e,t,n){var a=this.getSettingsId(t),i=t.attr("id");popJSRuntimeManager.addPageSectionId(e,a,n,i);var r={domain:e,pageSection:t,template:n};popJSLibraryManager.execute("addPageSectionIds",r)},initDocument:function(t){var n=this;e(document).on("user:loggedout",function(e,t,a){n.clearUserDatabase(a)});var a={domain:t};popJSLibraryManager.execute("initDocument",a),e(document).triggerHandler("initialize.pop.document",[t])},initDomain:function(t){var n=this;n.domains[t]={initialized:!0},n.initDomainVars(t);var a={domain:t};popJSLibraryManager.execute("initDomain",a),e(document).triggerHandler("initialize.pop.domain",[t])},maybeInitializeDomain:function(e){var t=this;t.domains[e]&&t.domains[e].initialized||t.initDomain(e)},documentInitialized:function(t){var n={domain:t};popJSLibraryManager.execute("documentInitialized",n),e(document).triggerHandler("initialized.pop.document")},pageSectionFetchSuccess:function(e,t,n){var a={pageSection:e,response:t,options:n};popJSLibraryManager.execute("pageSectionFetchSuccess",a),e.triggerHandler("fetched.pop.pageSection")},blockFetchSuccess:function(e,t,n){popJSLibraryManager.execute("blockFetchSuccess",{pageSection:e,block:t,response:n}),t.triggerHandler("fetched.pop.block")},backgroundLoad:function(t){var n=this,a={"loadingmsg-target":null,silentDocument:!0};e.each(t,function(t,i){e.each(i,function(i,r){n.fetch(t,e.extend({target:r},a))})})},initPageSection:function(t){var n=this;n.firstLoad[n.getSettingsId(t)]=!0,popJSLibraryManager.execute("initPageSection",{pageSection:t}),t.triggerHandler("initialize"),e(document).triggerHandler("initialize.pop.pagesection",[t])},pageSectionInitialized:function(e,t){var n=this;n.initPageSectionRuntimeMemory(e,t),popJSLibraryManager.execute("pageSectionInitialized",{domain:e,pageSection:t}),t.triggerHandler("initialized"),t.triggerHandler("completed"),n.firstLoad[n.getSettingsId(t)]=!1},pageSectionNewDOMsInitialized:function(t,n,a,i){var r=this,o=a.filter(".pop-pagesection-page");if(o.length){i["fetch-params"]&&e.each(i["fetch-params"],function(e,t){o.data(e,t)});var s=popPageSectionManager.getOpenMode(n),c=r.isFirstLoad(n);("automatic"==s||c&&"initial"==s)&&popPageSectionManager.open(n)}var g={domain:t,pageSection:n,newDOMs:a};r.extendArgs(g,i),popJSLibraryManager.execute("pageSectionNewDOMsBeforeInitialize",g),r.initPageSectionBranches(t,n,a,i),popJSLibraryManager.execute("pageSectionNewDOMsInitialized",g)},initPageSectionBranches:function(t,n,a,i){var r=this;r.runPageSectionJSMethods(t,n,i);var o=r.getPageSectionJsSettings(t,n)["initjs-blockbranches"];if(o){var s=e(o.join(",")).not("."+M.JS_INITIALIZED);r.initBlockBranches(t,n,s,i)}popJSRuntimeManager.deletePageSectionLastSessionIds(t,n)},triggerDestroyTarget:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN,n.removeOpenTab(e,t),popURLInterceptors.intercept(n.getDestroyUrl(e),{target:t})},destroyTarget:function(t,n,a){var i=this,r={domain:t,pageSection:n,destroyTarget:a};popJSLibraryManager.execute("destroyTarget",r),a.triggerHandler("destroy"),a.find(".pop-block."+M.JS_INITIALIZED).addBack(".pop-block."+M.JS_INITIALIZED).each(function(){var a=e(this);i.deleteRuntimeMemoryPage(t,n,a,{url:i.getTargetParamsScopeURL(a)})}),a.remove()},destroyPageSectionPage:function(e,t,n){var a=this,i=n||t;n.siblings(".pop-pagesection-page").length||(popPageSectionManager.close(t),popPageSectionManager.close(t,"xs")),a.destroyTarget(e,t,i)},pageSectionRendered:function(e,t,n,a){var i=this;i.pageSectionNewDOMsInitialized(e,t,n,a);var r={domain:e,pageSection:t,newDOMs:n};i.extendArgs(r,a),popJSLibraryManager.execute("pageSectionRendered",r),t.triggerHandler("pageSectionRendered")},runScriptsBefore:function(e,t){var n={pageSection:e,newDOMs:t};popJSLibraryManager.execute("runScriptsBefore",n)},jsInitialized:function(e){return e.hasClass(M.JS_INITIALIZED)},jsLazy:function(e){return e.hasClass(M.CLASS_LAZYJS)},setJsInitialized:function(e){e.addClass(M.JS_INITIALIZED).removeClass(M.CLASS_LAZYJS)},initBlockBranches:function(t,n,a,i){var r=this;a.length&&a.each(function(){var a=e(this),o=!r.jsInitialized(a);if(i["force-init"]||(o=o&&!r.jsLazy(a)),o){r.setJsInitialized(a),r.initBlock(t,n,a,i);var s=r.getJsSettings(t,n,a),c=s["initjs-blockbranches"];c&&r.initBlockBranches(t,n,e(c.join(", ")).not("."+M.JS_INITIALIZED),i);var g=s["initjs-blockchildren"];if(g){var u=a;e.each(g,function(t,n){e.each(n,function(e,t){u=u.children(t).not("."+M.JS_INITIALIZED)})}),r.initBlockBranches(t,n,u,i)}}})},initBlock:function(t,n,a,i){var r=this;i=i||{},r.initBlockRuntimeMemory(t,n,a,e.extend({},i)),r.initializeBlock(n,a,i),r.runScriptsBefore(n,a),r.runBlockJSMethods(t,n,a,i),a.on("rendered",function(t,a,o,s){var c=e(this);popJSRuntimeManager.setBlockURL(c),r.runScriptsBefore(n,a),r.runBlockJSMethods(s,n,c,null,i)}),r.blockInitialized(t,n,a,i),r.loadBlockContent(t,n,a)},initializeBlock:function(e,t,n){var a={pageSection:e,block:t};this.extendArgs(a,n),popJSLibraryManager.execute("initBlock",a),t.triggerHandler("initialize")},extendArgs:function(t,n){(n=n||{})["js-args"]&&e.extend(t,n["js-args"])},blockInitialized:function(e,t,n,a){var i={domain:e,pageSection:t,block:n};this.extendArgs(i,a),popJSLibraryManager.execute("blockInitialized",i),n.triggerHandler("js:initialized")},loadBlockContent:function(t,n,a){var i=this;if(!i.isContentLoaded(n,a)){a.one("fetchDomainCompleted",function(e,t,n){a.removeClass(M.CLASS_LOADINGCONTENT)}),i.setContentLoaded(n,a);var r={action:M.CBACTION_LOADCONTENT,"post-data":a.data("post-data")};i.getJsSettings(t,n,a)["loadcontent-showdisabledlayer"]&&(r["show-disabled-layer"]=!0),e(document).ready(function(e){i.fetchBlock(n,a,r)})}},runPageSectionJSMethods:function(t,n,a){var i=this,r=popJSRuntimeManager.getPageSectionSessionIds(t,n);if(r){var o=[],s=i.getPageSectionJsMethods(t,n);e.each(s,function(s,c){-1==o.indexOf(s)&&(o.push(s),r[s]&&c&&e.each(c,function(o,c){var g=r[s][o];if(g){var u="#"+g.join(", #"),l=e(u);l.length&&e.each(c,function(e,r){var o={domain:t,pageSection:n,targets:l};i.extendArgs(o,a),popJSLibraryManager.execute(r,o)})}}))})}},runBlockJSMethods:function(e,t,n,a){this.runJSMethods(e,t,n,null,null,a),popJSRuntimeManager.deleteBlockLastSessionIds(e,t,n)},runJSMethods:function(e,t,n,a,i,r){var o=this,s=popJSRuntimeManager.getBlockSessionIds(e,t,n,i);if(s){var c=o.getTemplateJSMethods(e,t,n,a);o.runJSMethodsInner(e,t,n,c,s,[],r)}},runJSMethodsInner:function(t,n,a,i,r,o,s){var c=this;s=s||{};var g=i[M.JS_TEMPLATE],u=i[M.JS_METHODS];-1==o.indexOf(g)&&(o.push(g),r[g]&&u&&e.each(u,function(i,o){var u=r[g][i];if(u){var l="#"+u.join(", #"),d=e(l);d.length&&e.each(o,function(e,i){var r={domain:t,pageSection:n,block:a,targets:d};c.extendArgs(r,s),popJSLibraryManager.execute(i,r)})}})),i[M.JS_NEXT]&&e.each(i[M.JS_NEXT],function(e,i){c.runJSMethodsInner(t,n,a,i,r,o,s)})},getTemplateJSMethods:function(e,t,n,a){var i=this,r=i.getBlockJsMethods(e,t,n);return a?i.getTemplateJSMethodsInner(t,n,a,r):r},getTemplateJSMethodsInner:function(t,n,a,i){var r=this;if(i[M.JS_TEMPLATE]==a)return i;var o;return i[M.JS_NEXT]&&e.each(i[M.JS_NEXT],function(e,i){if(o=r.getTemplateJSMethodsInner(t,n,a,i))return!1}),o},maybeRedirect:function(e){var t=this;if(e.redirect&&e.redirect.url){if(!e.redirect.fetch)return window.location=e.redirect.url,!0;t.click(e.redirect.url)}return!1},historyReplaceState:function(e,t){var n=this,a=e.data("historystate-url"),i=e.data("historystate-title");e.data("historystate-thumb");popBrowserHistory.replaceState(a),i&&(n.documentTitle=unescapeHtml(i),document.title=n.documentTitle)},isHidden:function(t){if(t.hasClass("hidden"))return!0;var n=t.attr("id");if(n&&!e("#"+n).length)return!0;var a=t.parents(".tab-pane"),i=a.filter(".active");if(a.length>i.length)return!0;var r=popJSLibraryManager.execute("isHidden",{targets:t}),o=!1;return e.each(r,function(e,t){if(t)return o=!0,-1}),o},isActive:function(t){var n=popJSLibraryManager.execute("isActive",{targets:t}),a=!0;return e.each(n,function(e,t){if(!t)return a=!1,-1}),a},isContentLoaded:function(e,t){return this.getBlockQueryState(e,t)[M.DATALOAD_CONTENTLOADED]||!1},setContentLoaded:function(e,t){this.getBlockQueryState(e,t)[M.DATALOAD_CONTENTLOADED]=!0},updateDocument:function(e){var t=this;t.updateTitle(t.getTopLevelFeedback(e)[M.URLPARAM_TITLE])},updateTitle:function(e){var t=this;e&&(t.documentTitle=unescapeHtml(e),document.title=t.documentTitle)},executeSetFilterBlockParams:function(t,n,a){var i=this.getBlockQueryState(t,n);i.filter=a.find("."+M.FILTER_INPUT).filter(function(){return e.trim(this.value)}).serialize(),i.filter&&(i.filter+="&"+a.find("."+M.FILTER_NAME_INPUT).serialize())},setFilterBlockParams:function(e,t,n){var a=this;a.jsInitialized(t)?a.executeSetFilterBlockParams(e,t,n):t.one("js:initialized",function(){a.executeSetFilterBlockParams(e,t,n)})},filter:function(e,t,n){var a=this;a.setFilterBlockParams(e,t,n),a.reload(e,t),a.blockScrollTop(e,t)},blockScrollTop:function(e,t){var n=this,a=t.closest(".modal");0==a.length?n.scrollToElem(e,t.children(".blocksection-status").first(),!0):a.animate({scrollTop:0},"fast")},setReloadBlockParams:function(t,n){var a=this.getBlockMultiDomainQueryState(t,n);e.each(a,function(e,t){t[M.DATALOAD_PARAMS]&&t[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]&&(t[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]=""),t[M.URLPARAM_STOPFETCHING]&&(t[M.URLPARAM_STOPFETCHING]=!1)})},refetch:function(e,t,n){var a=this;(n=n||{}).action=M.CBACTION_REFETCH,t.triggerHandler("beforeRefetch"),a.reload(e,t,n)},reset:function(e,t,n,a){var i=this;(a=a||{})["skip-restore"]||i.restoreInitialBlockMemory(t,n),i.processBlock(e,t,n,{operation:M.URLPARAM_OPERATION_REPLACE,action:M.CBACTION_RESET,reset:!0})},reload:function(e,t,n){var a=this;(n=n||{}).operation=M.URLPARAM_OPERATION_REPLACE,n.reload=!0,n["hide-latestcount"]=!0,a.setReloadBlockParams(e,t),t.triggerHandler("beforeReload"),a.fetchBlock(e,t,n)},loadLatest:function(t,n,a,i){var r=this;i=i||{};var o=r.getBlockDomainQueryState(t,n,a);i.operation=M.URLPARAM_OPERATION_PREPEND,i["skip-stopfetching-check"]=!0,i["hide-latestcount"]=!0;var s={};s[M.URLPARAM_ACTION]=M.URLPARAM_ACTION_LATEST,s[M.URLPARAM_TIMESTAMP]=o[M.URLPARAM_TIMESTAMP],i["onetime-post-data"]=e.param(s),a.triggerHandler("beforeLoadLatest"),r.fetchBlock(n,a,i)},handlePageSectionLoadingStatus:function(t,n,a){var i,r=this;if(void 0!==(a=a||{})["loadingmsg-target"]){if(!a["loadingmsg-target"])return;i=e(a["loadingmsg-target"])}else i=popPageSectionManager.getPageSectionStatus(t).find(".pop-loading");r.handleLoadingStatus(i,n,a)},handleLoadingStatus:function(e,t){var n=e.data("num")||0;"add"==t?n+=1:"remove"==t&&(n-=1),e.data("num",n),n?e.removeClass("hidden"):e.addClass("hidden"),n>=2?e.find(".pop-box").text("x"+n):e.find(".pop-box").text("")},fetch:function(e,t){var n=this;t=t||{};var a=n.getFetchTargetPageSection(t.target);n.getPageSectionParams(a)?n.fetchPageSection(a,e,t):t["noparams-reload-url"]&&(window.location=e)},removeLocalStorageItem:function(e,t){var n={result:t.startsWith(e),key:t,path:e};return popJSLibraryManager.execute("removeLocalStorageItem",n),n.result},initLocalStorage:function(){var e=this;if(M.USELOCALSTORAGE&&supports_html5_storage()){var t=localStorage["PoP:version"];t&&t==M.VERSION||(Object.keys(localStorage).forEach(function(t){M.ALLOWED_DOMAINS.forEach(function(n){if(e.removeLocalStorageItem(n,t))return localStorage.removeItem(t),-1})}),localStorage["PoP:version"]=M.VERSION)}},openTabs:function(){var t=this;if(M.KEEP_OPEN_TABS){var n={silentDocument:!0,"js-args":{inactivePane:!0,addOpenTab:!1}},a=t.getTabsCurrentURL(),i=t.getScreenOpenTabs();e.each(i,function(i,r){if(n.target=i,i==M.URLPARAM_TARGET_MAIN){var o=r.indexOf(a);-1!==o&&r.splice(o,1)}e.each(r,function(e,a){t.fetch(a,n)})})}},getTabsCurrentURL:function(){var e=window.location.href;return e==M.HOME_DOMAIN&&(e=M.HOME_DOMAIN+"/"),e==M.HOME_DOMAIN+"/"&&M.HOMELOCALE_URL&&(e=M.HOMELOCALE_URL+"/"),e},getOpenTabsKey:function(){var t=this,n=M.LOCALE,a=M.HOME_DOMAIN,i=t.getTopLevelFeedback(a)[M.DATALOAD_PARAMS];return e.each(i,function(e,t){n+="|"+e+"="+t}),n},getScreenOpenTabs:function(){var e=this;return e.getOpenTabs()[e.getOpenTabsKey()]||{}},keepScreenOpenTab:function(e,t){var n=this,a=n.getOpenTabs(),i=n.getOpenTabsKey();a[i]={},a[i][t]=[e],n.storeData("PoP:openTabs",a)},getOpenTabs:function(){var e=this;return M.KEEP_OPEN_TABS?e.getStoredData("PoP:openTabs")||{}:{}},addOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),i=n.getOpenTabsKey();return a[i]=a[i]||{},a[i][t]=a[i][t]||[],!(a[i][t].indexOf(e)>-1)&&(a[i][t].push(e),n.storeData("PoP:openTabs",a),!0)},removeOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),i=n.getOpenTabsKey();a[i]=a[i]||{},a[i][t]=a[i][t]||[];var r=a[i][t].indexOf(e);return-1!==r&&(a[i][t].splice(r,1),a[i][t].length||(delete a[i][t],a[i].length||delete a[i]),n.storeData("PoP:openTabs",a),!0)},replaceOpenTab:function(e,t,n){var a=this;M.KEEP_OPEN_TABS&&a.removeOpenTab(e,n)&&a.addOpenTab(t,n)},getStoredData:function(e,t){if(M.USELOCALSTORAGE&&supports_html5_storage()){var n=localStorage[e];if(n)return n=JSON.parse(n),t?n.version==M.VERSION&&(void 0===n.expires||n.expires>Date.now())?n.value:(delete localStorage[e],null):n.value}return null},storeData:function(e,t,n){if(M.USELOCALSTORAGE&&supports_html5_storage()){var a={version:M.VERSION,value:t};n&&(a.expires=Date.now()+n);try{localStorage[e]=JSON.stringify(a)}catch(e){console.log("Error: "+e.message)}}},fetchPageSection:function(t,n,a){var i=this,r=i.getPageSectionParams(t);if(r&&!(r.loading.indexOf(n)>-1)){a=a||{};var o=i.getTarget(t),s=getDomain(n);i.maybeInitializeDomain(s);var c={domain:s,options:a,url:n};popJSLibraryManager.execute("modifyFetchArgs",c);var g=c.url;g.indexOf("#")>-1&&(g=g.substr(0,g.indexOf("#"))),g=add_query_arg(M.URLPARAM_TARGET,o,g),g=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_SETTINGSDATA,g),g=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,g),popJSLibraryManager.execute("preFetchPageSection",{url:g,options:a});var u=i.getTopLevelFeedback(s),l=e.extend({},u[M.DATALOAD_PARAMS],r[M.DATALOAD_PARAMS]);a.params&&e.extend(l,a.params);var d,p=e.param(l);d=g+"|"+p;var S=i.getStoredData(d);if(S)return i.prePageSectionSuccess(t,S,a),void i.processPageSectionResponse(s,t,n,g,S,a);var m=popPageSectionManager.getPageSectionStatus(t).find(".pop-error");a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").removeClass("hidden");var f=i.getCrossDomainOptions(g);e.ajax(e.extend(f,{dataType:"json",url:g,data:p,beforeSend:function(e,s){e.url=n,r.url[e.url]=n,r.target[e.url]=o,r["fetch-url"][e.url]=s.url,r.loading.push(n),i.handlePageSectionLoadingStatus(t,"add",a)},complete:function(n){var o=r.url[n.url];if(delete r.url[n.url],delete r.target[n.url],delete r["fetch-url"][n.url],r.loading.splice(r.loading.indexOf(o),1),i.handlePageSectionLoadingStatus(t,"remove",a),a["urlfetched-callbacks"]){var s="urlfetched:"+escape(o);e.each(a["urlfetched-callbacks"],function(t,n){e(document).one(s,n)})}a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").addClass("hidden")},success:function(e,n,o){i.prePageSectionSuccess(t,e,a),m.addClass("hidden");var c=r.url[o.url],u=e.feedback.toplevel[M.URLPARAM_URL],l=r.target[o.url];c!=u&&i.replaceOpenTab(c,u,l),a["fetch-params"]={url:c,target:l,"fetch-url":r["fetch-url"][o.url]},e.feedback.toplevel[M.URLPARAM_STORELOCAL]&&i.storeData(d,e),i.processPageSectionResponse(s,t,c,g,e,a)},error:function(e,n,o){r.url[e.url];var s=r.url[e.url];a.silentDocument||i.showError(t,i.getError(t,s,e,n,o)),i.triggerURLFetchFailed(s),t.triggerHandler("fetchFailed")}}))}},prePageSectionSuccess:function(e,t,n){var a=this;a.pageSectionFetchSuccess(e,t,n),a.backgroundLoad(t.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS])},getCrossDomainOptions:function(t){var n={};return t.startsWith(M.HOME_DOMAIN)||e.each(M.ALLOWED_DOMAINS,function(e,a){if(t.startsWith(a))return n.xhrFields={withCredentials:!0},n.crossDomain=!0,-1}),n},showError:function(e,t){var n=this,a=popPageSectionManager.getPageSectionStatus(e).find(".pop-error");a.children("div.pop-box").html(t),a.removeClass("hidden"),n.scrollTop(a)},triggerURLFetched:function(t){e(document).triggerHandler("urlfetched:"+escape(t)),e(document).triggerHandler("urlfetched",[t]),e(document).triggerHandler("urlfetchcompleted:"+escape(t))},triggerURLFetchFailed:function(t){e(document).triggerHandler("urlfetchfailed:"+escape(t)),e(document).triggerHandler("urlfetchfailed",[t]),e(document).triggerHandler("urlfetchcompleted:"+escape(t))},processPageSectionResponse:function(e,t,n,a,i,r){var o=this,s=o.getTarget(t);o.saveUrlPointers(i,s),o.addReplicableMemory(i,s),o.addInitialBlockMemory(i),o.integrateDatabases(e,i),o.checkExecuteProcessPageSectionResponse(e,t,n,a,i,r)},checkExecuteProcessPageSectionResponse:function(e,t,n,a,i,r){var o=this,s={loaded:!M.USECODESPLITTING,fetchUrl:a};popJSLibraryManager.execute("areResourcesLoaded",s),s.loaded?o.executeProcessPageSectionResponse(e,t,n,i,r):setTimeout(function(){o.checkExecuteProcessPageSectionResponse(e,t,n,a,i,r)},100)},executeProcessPageSectionResponse:function(t,n,a,i,r){var o=this,s=e.Deferred(),c=o.mergingTemplatePromise;o.mergingTemplatePromise=s.promise(),c.done(function(){try{o.processPageSection(t,n,i,r),o.triggerURLFetched(a)}catch(e){o.triggerURLFetchFailed(a),console.log("Error: "+e.message)}s.resolve()})},maybeUpdateDocument:function(e,t,n){var a=this;if(!(n=n||{}).silentDocument&&a.getFetchPageSectionSettings(t).updateDocument){if(!n.skipPushState){var i=a.getTopLevelFeedback(e);popBrowserHistory.pushState(i[M.URLPARAM_URL])}a.updateDocument(e)}},processPageSection:function(t,n,a,i){var r=this,o=r.getTarget(n);r.integrateTopLevelFeedback(t,a);var s=r.getTopLevelFeedback(t),c=s[M.URLPARAM_ERROR];c&&r.showError(n,c);var g=s[M.URLPARAM_URL];i.reloadurl&&r.triggerDestroyTarget(g,o),s[M.URLPARAM_SILENTDOCUMENT]&&(i.silentDocument=!0),r.maybeUpdateDocument(t,n,i),i.maybeRedirect&&r.maybeRedirect(s)||(r.integratePageSection(t,a),e.each(a.settings.configuration,function(n,a){var o=a[M.JS_FRONTENDID],s=e("#"+o);r.renderPageSection(t,s,i),s.triggerHandler("fetched",[i,g,t]),s.triggerHandler("completed")}))},scrollToElem:function(e,t,n){popJSLibraryManager.execute("scrollToElem",{elem:e,position:t,animate:n})},scrollTop:function(e,t,n){popJSLibraryManager.execute("scrollTop",{elem:e,top:t,animate:n})},getPosition:function(t){var n=popJSLibraryManager.execute("getPosition",{elem:t}),a=0;return e.each(n,function(e,t){if(t)return a=t,-1}),a},getSettingsId:function(t){return"object"==e.type(t)?t.attr("data-settings-id"):t},getError:function(e,t,n,a,i){var r=this.getTarget(e);return 0===n.status?M.ERROR_OFFLINE.format(t,r):404==n.status?M.ERROR_404:M.ERROR_MSG.format(t,r)},closeMessageFeedback:function(e){var t={elem:e};popJSLibraryManager.execute("closeMessageFeedback",t)},closeMessageFeedbacks:function(e){var t={pageSection:e};popJSLibraryManager.execute("closeMessageFeedbacks",t)},processBlock:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n),s=i.getMemory(e);a.extendContext={items:s.dataset[r][o],ignorePSRuntimeId:!0},popJSRuntimeManager.setBlockURL(n),i.renderTarget(e,t,n,a)},fetchBlock:function(e,t,n){var a=this;!(n=n||{})["skip-stopfetching-check"]&&a.stopFetchingBlock(e,t)||a.executeFetchBlock(e,t,n)},getBlockPostData:function(t,n,a,i){var r=this,o=(i=i||{}).paramsGroup||"all",s=r.getBlockQueryState(n,a),c=r.getBlockDomainQueryState(t,n,a),g={};"all"==o&&(e.extend(g,s[M.DATALOAD_PARAMS]),c[M.DATALOAD_PARAMS]&&e.extend(g,c[M.DATALOAD_PARAMS])),s[M.DATALOAD_VISIBLEPARAMS]&&e.extend(g,s[M.DATALOAD_VISIBLEPARAMS]),c[M.DATALOAD_VISIBLEPARAMS]&&e.extend(g,c[M.DATALOAD_VISIBLEPARAMS]),e.each(g,function(e,t){t||delete g[e]});var u=e.param(g);return s.filter&&(u&&(u+="&"),u+=s.filter),u},handleBlockError:function(t,n,a){var i=this,r=[".errormsg.status-"+n.status,".errormsg.general"];e.each(r,function(e,n){var a=t.find(n);if(a.length)return a.removeClass("hidden").siblings(".errormsg").addClass("hidden"),!1}),a["skip-status"]||(t.removeClass("hidden"),i.scrollTop(t))},getMultiDomainBlockStatus:function(e,t,n){return{timestamp:n,isFirst:e.timestamps[n].length===Object.keys(t).length,isLast:1===e.timestamps[n].length}},executeFetchBlock:function(t,n,a){var i=this,r=(a=a||{}).type||"GET",o=i.getBlockQueryState(t,n);a["post-data"]&&(o["post-data"]=a["post-data"]);var s={},c=i.getQueryMultiDomainUrls(t,n);if(e.each(c,function(c,g){if(g&&(a["skip-stopfetching-check"]||!i.stopFetchingDomainBlock(c,t,n))){i.maybeInitializeDomain(c),i.initMultiDomainFeedback(c,t,n);var u={domain:c,options:a,url:g,type:r};popJSLibraryManager.execute("modifyFetchBlockArgs",u),g=u.url;var l=i.getTopLevelFeedback(c),d=i.getPageSectionFeedback(c,t),p=i.getBlockFeedback(c,t,n),S=e.extend({},l[M.DATALOAD_PARAMS],d[M.DATALOAD_PARAMS],p[M.DATALOAD_PARAMS]),m=e.param(S);o["post-data"]&&(m&&(m+="&"),m+=o["post-data"]),a["onetime-post-data"]&&(m&&(m+="&"),m+=a["onetime-post-data"]);var f=i.getBlockPostData(c,t,n);m&&f&&(m+="&"),m+=f;var h=i.getTarget(t);g=add_query_arg(M.URLPARAM_TARGET,h,g),g=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_DATA,g);var T=(g=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,g))+m;o.loading.indexOf(T)>-1||(s[c]={url:g,loading:T,data:m})}}),!e.isEmptyObject(s)){var g=n.find(".pop-loading"),u=n.find(".pop-error");a["skip-status"]||(g.removeClass("hidden"),u.addClass("hidden"),i.closeMessageFeedback(n)),i.triggerEvent(t,n,"beforeFetch",[a]),a["show-disabled-layer"]&&n.children(".pop-disabledlayer").removeClass("hidden");var l=Date.now();e.each(s,function(c,d){var p=d.url,S=d.loading,m=d.data,f=i.getCrossDomainOptions(p);e.ajax(e.extend(f,{dataType:"json",url:p,data:m,type:r,beforeSend:function(e,t){e.url=t.url,o.url[e.url]=S,o.loading.push(S),o.timestamps[l]=o.timestamps[l]||[],o.timestamps[l].push(S),o.operation[S]=a.operation,o.action[S]=a.action,o.domain[S]=c,o["paramsscope-url"][S]=i.getTargetParamsScopeURL(n),a.reload&&o.reload.push(S),a["skip-status"]||i.handleLoadingStatus(g,"add")},success:function(r,c,g){i.blockFetchSuccess(t,n,r),i.backgroundLoad(r.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS]),a["hide-latestcount"]&&n.children(".blocksection-latestcount").find(".pop-latestcount").addClass("hidden").find(".pop-count").text("0");var u=i.getMultiDomainBlockStatus(o,s,l),d=i.mergingTemplatePromise,p=e.Deferred(),S=p.promise();i.mergingTemplatePromise=S,d.done(function(){try{i.executeFetchBlockSuccess(t,n,r,u,g)}catch(e){console.log("Error: "+e.message)}p.resolve()})},error:function(e,r,o){i.handleBlockError(u,e,a),i.triggerEvent(t,n,"fetchFailed")},complete:function(r){var c=i.getMultiDomainBlockStatus(o,s,l),u=o.url[r.url];delete o.url[r.url];var d=o.domain[u];o.loading.splice(o.loading.indexOf(u),1),delete o.operation[u],delete o.action[u],delete o.domain[u],delete o["paramsscope-url"][u],o.timestamps[l].splice(o.timestamps[l].indexOf(u),1),o.timestamps[l].length||delete o.timestamps[l];var p=o.reload.indexOf(u);p>-1&&(c.reload=!0,o.reload.splice(p,1)),a["skip-status"]||i.handleLoadingStatus(g,"remove");var S=i.mergingTemplatePromise,m=e.Deferred(),f=m.promise();i.mergingTemplatePromise=f,S.done(function(){try{i.fetchBlockComplete(d,t,n,c,a)}catch(e){console.log("Error: "+e.message)}m.resolve()})}}))})}},fetchBlockComplete:function(t,n,a,i,r){var o=this,s=o.getBlockQueryState(n,a);a.children(".pop-disabledlayer").addClass("hidden"),r["datasetcount-target"]&&o.displayDatasetCount(t,n,a,e(r["datasetcount-target"]),r["datasetcount-updatetitle"]),s.loading.length||a.find(".pop-loading").addClass("hidden"),o.stopFetchingBlock(n,a)?a.addClass("pop-stopfetching"):a.removeClass("pop-stopfetching"),o.triggerEvent(n,a,"fetchDomainCompleted",[i,t]),i.isLast&&o.triggerEvent(n,a,"fetchCompleted",[i])},stopFetchingBlock:function(t,n){var a=this,i=!0,r=a.getQueryMultiDomainUrls(t,n);return e.each(r,function(e,r){if(!a.getBlockDomainQueryState(e,t,n)[M.URLPARAM_STOPFETCHING])return i=!1,-1}),i},stopFetchingDomainBlock:function(e,t,n){return this.getBlockDomainQueryState(e,t,n)[M.URLPARAM_STOPFETCHING]},displayDatasetCount:function(e,t,n,a,i){var r=this,o=r.getBlockDataset(e,t,n);if(o.length){var s=a.data("datasetcount-mode")||"add",c=o.length;"add"==s&&(c+=a.text()?parseInt(a.text()):0),c&&(a.removeClass("hidden").text(c),i&&(document.title="("+c+") "+r.documentTitle))}},initMultiDomainFeedback:function(t,n,a){var i=this,r=i.getMemory(t),o=i.getBlockTopLevelDomain(a);if(t!=o){var s=i.getSettingsId(n),c=i.getSettingsId(a),g=i.getMemory(o);e.isEmptyObject(r.feedback.toplevel)&&(r.feedback.toplevel=e.extend(!0,{},g.feedback.toplevel),void 0!==r.feedback.toplevel[M.DATALOAD_USER]&&delete r.feedback.toplevel[M.DATALOAD_USER]),e.isEmptyObject(r.feedback.pagesection[s])&&(r.feedback.pagesection[s]=e.extend(!0,{},g.feedback.pagesection[s]),r.feedback.block[s]={}),e.isEmptyObject(r.feedback.block[s][c])&&(r.feedback.block[s][c]=e.extend(!0,{},g.feedback.block[s][c]))}},initMultiDomainMemory:function(t,n,a,i){var r=this,o=r.getMemory(t),s=r.getBlockTopLevelDomain(a);if(t!=s){var c=r.getMemory(s);e.each(i["query-state"].general,function(t,n){if(e.isEmptyObject(o["query-state"].general[t])){o["query-state"].general[t]={},o["query-state"].domain[t]={},o.dataset[t]={},o.runtimesettings.configuration[t]={},o.runtimesettings["query-url"][t]={},o.runtimesettings["query-multidomain-urls"][t]={},o.runtimesettings.configuration[t]={},o.runtimesettings["js-settings"][t]={},o.settings["js-settings"][t]={},o.settings.jsmethods.pagesection[t]=e.extend({},c.settings.jsmethods.pagesection[t]),o.settings.jsmethods.block[t]={},o.settings["templates-cbs"][t]={},o.settings["templates-paths"][t]={},o.settings["db-keys"][t]={},o.settings.configuration[t]={},o.settings.configuration[t][M.JS_MODULES]={};var a=o.settings.configuration[t],i=c.settings.configuration[t];e.each(i,function(e,t){e!=M.JS_MODULES&&"modules"!=e&&"root-context"!=e&&"parent-context"!=e&&r.copyToConfiguration(e,t,a,!0)})}e.each(n,function(n,a){if(e.isEmptyObject(o["query-state"].general[t][n])){o["query-state"].general[t][n]=e.extend({},c["query-state"].general[t][n]),o["query-state"].domain[t][n]=e.extend({},c["query-state"].domain[t][n]),o.dataset[t][n]=e.extend({},c.dataset[t][n]),o.runtimesettings.configuration[t][n]={},o.runtimesettings["query-url"][t][n]=e.extend({},c.runtimesettings["query-url"][t][n]),o.runtimesettings["query-multidomain-urls"][t][n]=e.extend({},c.runtimesettings["query-multidomain-urls"][t][n]),o.runtimesettings.configuration[t][n]=e.extend({},c.runtimesettings.configuration[t][n]),o.runtimesettings["js-settings"][t][n]=e.extend({},c.runtimesettings["js-settings"][t][n]),o.settings["js-settings"][t][n]=e.extend({},c.settings["js-settings"][t][n]),o.settings.jsmethods.block[t][n]=e.extend({},c.settings.jsmethods.block[t][n]),o.settings["templates-cbs"][t][n]=e.extend({},c.settings["templates-cbs"][t][n]),o.settings["templates-paths"][t][n]=e.extend({},c.settings["templates-paths"][t][n]),o.settings["db-keys"][t][n]=e.extend({},c.settings["db-keys"][t][n]);var i=c.settings.configuration[t][M.JS_MODULES][n];delete i["root-context"],delete i["parent-context"],o.settings.configuration[t][M.JS_MODULES][n]=e.extend(!0,{},i)}})})}},executeFetchBlockSuccess:function(t,n,a,i,r){var o=this,s=o.getBlockQueryState(t,n),c=s.url[r.url],g=s.action[c],u={url:s["paramsscope-url"][c]},l={operation:s.operation[c],action:s.action[c],"fetch-status":i},d=s.domain[c];o.initMultiDomainMemory(d,t,n,a);var p=o.getMemory(d);if([M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(g)>-1){var S=o.getInitialBlockMemory(u.url);e.each(a["query-state"].general,function(t,n){e.each(n,function(e,n){p.runtimesettings.configuration[t][e]=S.runtimesettings.configuration[t][e]})})}o.integrateTopLevelFeedback(d,a),o.integrateDatabases(d,a),e.each(a["query-state"].general,function(t,n){var i=e("#"+p.settings.configuration[t].id);p.feedback.block[t]||(p.feedback.block[t]={}),e.extend(p.feedback.block[t],a.feedback.block[t]),p.dataset[t]||(p.dataset[t]={}),e.extend(p.dataset[t],a.dataset[t]),p["query-state"].general[t]||(p["query-state"].general[t]={}),p["query-state"].domain[t]||(p["query-state"].domain[t]={}),e.each(n,function(n,r){try{var s=e("#"+o.getBlockId(t,n,u));if(e.extend(o.getBlockQueryState(i,s,u),r),e.extend(o.getBlockDomainQueryState(d,i,s,u),a["query-state"].domain[t][n]),[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH].indexOf(g)>-1&&o.getJsSettings(d,i,s)["processblock-ifhasdata"]&&!a.dataset[t][n].length)return;o.processBlock(d,i,s,l)}catch(e){console.log("Error: "+e.message)}})}),n.triggerHandler("fetched",[a,g,d])},triggerEvent:function(e,t,n,a){t.triggerHandler(n,a)},integrateTopLevelFeedback:function(t,n){var a=this.getMemory(t).feedback.toplevel;e.each(n.feedback.toplevel,function(t,n){"array"==e.type(n)&&0==n.length||("object"==e.type(n)?(a[t]||(a[t]={}),e.extend(a[t],n)):a[t]=n)})},clearUserDatabase:function(e){this.state[e].userdatabase={}},integrateDatabase:function(t,n){e.each(n,function(n,a){t[n]=t[n]||{},"array"!=e.type(a)&&e.each(a,function(a,i){t[n][a]||(t[n][a]={}),e.extend(t[n][a],i)})})},integrateDatabases:function(e,t){var n=this;n.integrateDatabase(n.getDatabase(e),t.database),n.integrateDatabase(n.getUserDatabase(e),t.userdatabase)},getMergeTargetContainer:function(t){return t.data("merge-container")?e(t.data("merge-container")):t},getMergeTarget:function(t,n,a){var i=this,r=".pop-merge."+n,o=(a=a||{})["merge-target"]?e(a["merge-target"]):t.find(r).addBack(r);return i.getMergeTargetContainer(o)},generateUniqueId:function(e){var t=this,n=Date.now();return t.getTopLevelFeedback(e)[M.UNIQUEID]=n,n},getUniqueId:function(e){return this.getTopLevelFeedback(e)[M.UNIQUEID]},addUniqueId:function(e){var t=this,n=getDomain(e);return e+"#"+t.getUniqueId(n)},mergeTargetTemplate:function(e,t,n,a,i){var r=this;i=i||{};var o=[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(i.action)>-1;o&&r.generateUniqueId(e);var s=r.getTemplateHtml(e,t,n,a,i),c=r.getMergeTarget(n,a,i);i.operation=i.operation||M.URLPARAM_OPERATION_REPLACE,i.operation==M.URLPARAM_OPERATION_REPLACE&&(n.triggerHandler("replace",[i.action]),o&&n.triggerHandler("rerender",[i.action]),c.empty());var g=r.mergeHtml(s,c,i.operation);return n.triggerHandler("merged",[g.newDOMs]),g},mergeHtml:function(t,n,a){var i=this,r=e(t);return a==M.URLPARAM_OPERATION_PREPEND?n.prepend(r):a==M.URLPARAM_OPERATION_REPLACEINLINE?(n.replaceWith(r),n=r):n.append(r),i.triggerHTMLMerged(),{targetContainer:n,newDOMs:r}},triggerHTMLMerged:function(){e(document).triggerHandler("template:merged")},renderPageSection:function(t,n,a){var i=this;a=a||{},e.extend(a,i.getFetchPageSectionSettings(n));var r;if(a["serverside-rendering"]){i.triggerHTMLMerged(),r=i.getPageSectionDOMs(t,n);var o=i.getTopLevelFeedback(t)[M.URLPARAM_URL];a["fetch-params"]={url:o,target:M.URLPARAM_TARGET_FULL,"fetch-url":o}}else r=i.renderTarget(t,n,n,a);r.length&&i.pageSectionRendered(t,n,r,a)},getPageSectionDOMs:function(t,n){var a=this,i=a.getTemplatesCbs(t,n,n),r=e(),o=e();return e.each(i,function(e,t){var i=a.getMergeTarget(n,t);r.add(i),o=o.add(i.children())}),a.triggerRendered(t,n,o,r),o},renderTarget:function(t,n,a,i){var r=this,o=(i=i||{})["fetch-status"]||{isFirst:!0,isLast:!0};i.operation=i.operation||(o.isFirst?M.URLPARAM_OPERATION_REPLACE:M.URLPARAM_OPERATION_APPEND),i.operation!=M.URLPARAM_OPERATION_REPLACE||o.isFirst||(i.operation=M.URLPARAM_OPERATION_APPEND),a.triggerHandler("beforeRender",[i]);var s=r.getTemplatesCbs(t,n,a,i.action),c=e(),g=e();return e.each(s,function(e,o){var s=r.mergeTargetTemplate(t,n,a,o,i);c=c.add(s.targetContainer),g=g.add(s.newDOMs)}),r.triggerRendered(t,a,g,c),g},triggerRendered:function(t,n,a,i){n.triggerHandler("rendered",[a,i,t]),e(document).triggerHandler("rendered",[n,a,i,t])},getPageSectionConfiguration:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).settings.configuration[a]},getTargetConfiguration:function(t,n,a,i){var r=this,o=r.getTemplatePath(t,n,a,i),s=r.getPageSectionConfiguration(t,n);return o&&e.each(o,function(e,t){s=s[t]}),s},overrideFromItemObject:function(t,n,a){t&&e.each(a,function(e,a){n[a.key]=t[a.field]})},replaceFromItemObject:function(t,n,a,i,r,o,s){var c=this,g=c.getTopLevelFeedback(t),u=c.getTargetConfiguration(t,n,a,i);e.each(s,function(t,n){var a=n["replace-where-field"],i=n["replace-where-path"],s=n["replace-from-field"]||a,c=n.replacements,l=u[s];e.each(c,function(e,t){var n=t["replace-str"];if(r){var a=t["replace-with-field"];if(a&&n!=r[a]){var i=r[a];t["encode-uri-component"]?i=encodeURIComponent(i):t["encode-uri"]&&(i=encodeURI(i)),l=l.replace(new RegExp(n,"g"),i)}}var o=t["replace-from-feedback"];o&&n!=g[o]&&(l=l.replace(new RegExp(n,"g"),g[o]))});var d=o;i&&e.each(i,function(e,t){d[t]={},d=d[t]}),d[a]=l})},getTemplateHtml:function(t,n,a,i,r,o,s){var c=this,g=c.getTargetConfiguration(t,n,a,i);if(r=r||{},targetContext=g,c.getTemplatePath(t,n,a,i).length){var u=c.getBlock(a);c.initContextSettings(t,n,u,targetContext),c.extendContext(targetContext,t,o,s)}var l=r.extendContext;return l&&(targetContext=e.extend({},targetContext,l)),c.getHtml(i,targetContext)},extendContext:function(t,n,a,i,r){var o=this;if(r=r||{},e.extend(t,r),a&&(e.extend(t,{itemDBKey:a}),i)){var s=o.getItemObject(n,a,i);e.extend(t,{itemObject:s,itemObjectDBKey:a})}},initTopLevelJson:function(t){var n=this,a=e("#"+popPageSectionManager.getTopLevelSettingsId()),i=JSON.parse(a.html());e(document).triggerHandler("initTopLevelJson",[i]),n.sitemapping=i.sitemapping,n.state[t].database=i.database||{},n.state[t].userdatabase=i.userdatabase||{};var r=n.getMemory(t);r.settings=i.settings,r.runtimesettings=i.runtimesettings,r.dataset=i.dataset,r.feedback=i.feedback,r["query-state"]=i["query-state"],e.each(r.dataset,function(t,n){"array"==e.type(n)&&(r.dataset[t]={})}),e.each(r["query-state"].general,function(t,n){"array"==e.type(n)&&(r["query-state"].general[t]={})}),e.each(r["query-state"].domain,function(t,n){"array"==e.type(n)&&(r["query-state"].domain[t]={})}),e.each(r.feedback.pagesection,function(t,n){"array"==e.type(n)&&(r.feedback.pagesection[t]={})}),e.each(r.feedback.block,function(t,n){"array"==e.type(n)&&(r.feedback.block[t]={})}),n.saveUrlPointers(i),n.addReplicableMemory(i),n.addInitialBlockMemory(i)},getBlockDefaultParams:function(){return{url:{},loading:[],reload:[],operation:{},action:{},domain:{},timestamps:{},"paramsscope-url":{},"post-data":"",filter:""}},getBlockDefaultMultiDomainParams:function(){return{}},getPageSectionDefaultParams:function(){return{url:{},target:{},"fetch-url":{},loading:[]}},initPageSectionRuntimeMemory:function(e,t,n){var a=this,i=a.newRuntimeMemoryPage(e,t,t,n);a.getSettingsId(t);i["query-state"]=a.getPageSectionDefaultParams();var r={domain:e,pageSection:t,runtimeMempage:i};popJSLibraryManager.execute("initPageSectionRuntimeMemory",r)},initBlockRuntimeMemory:function(t,n,a,i){var r=this,o=r.newRuntimeMemoryPage(t,n,a,i),s=r.getMemory(t),c=r.getSettingsId(n),g=r.getSettingsId(a);o.id=a.attr("id"),o["query-url"]=r.getRuntimeSettings(t,n,a,"query-url"),o["query-multidomain-urls"]={},o["query-state"]={general:e.extend(r.getBlockDefaultParams(),s["query-state"].general[c][g]),domain:{}};var u=r.getRuntimeSettings(t,n,a,"query-multidomain-urls");e.each(u,function(t,n){query_url_domain=getDomain(n),o["query-multidomain-urls"][query_url_domain]=n,o["query-state"].domain[query_url_domain]=e.extend(r.getBlockDefaultMultiDomainParams(),s["query-state"].domain[c][g])});var l={domain:t,pageSection:n,block:a,runtimeMempage:o};popJSLibraryManager.execute("initBlockRuntimeMemory",l)},getViewport:function(e,t){var n=t.closest(".pop-viewport");return n.length?n:e},getDOMContainer:function(t,n){var a=this;return M.DOMCONTAINER_ID?e("#"+M.DOMCONTAINER_ID):a.getViewport(t,n)},getBlock:function(t){return t.hasClass("pop-block")?t:t.closest(".pop-block").length?t.closest(".pop-block"):t.closest("[data-block]").length?e(t.closest("[data-block]").data("block")):null},getTargetParamsScopeURL:function(e){return e.data(M.PARAMS_PARAMSSCOPE_URL)},getBlockTopLevelURL:function(e){return e.data(M.PARAMS_TOPLEVEL_URL)},getBlockTopLevelDomain:function(e){return e.data(M.PARAMS_TOPLEVEL_DOMAIN)},isBlockGroup:function(e){return e.hasClass("pop-blockgroup")},getBlockGroupActiveBlock:function(e){return e.find(".tab-pane.active .pop-block, .collapse.in .pop-block")},getBlockGroupBlocks:function(e){return e.find(".pop-block")},getTemplateSource:function(e){return this.sitemapping["template-sources"][e]||e},initPageSectionSettings:function(t,n,a){var i=this,r=i.getTopLevelSettings(t);e.extend(a,{tls:r});var o=i.getPageSectionSettings(t,n),s=i.getSettingsId(n),c=a[M.JS_FRONTENDID];e.extend(a,{pss:o}),i.expandJSKeys(a),a[M.JS_MODULES]&&e.each(a[M.JS_MODULES],function(n,a){var g=a[M.JS_FRONTENDID],u=i.getBlockSettings(t,t,s,n,c,g);e.extend(a,{tls:r,pss:o,bs:u}),i.expandJSKeys(a)})},initContextSettings:function(t,n,a,i){var r=this,o=r.getTopLevelSettings(t);e.extend(i,{tls:o});var s=r.getPageSectionSettings(t,n);e.extend(i,{pss:s});var c=r.getSettingsId(n),g=n.attr("id"),u=r.getSettingsId(a),l=a.attr("id"),d=r.getBlockSettings(t,r.getBlockTopLevelDomain(a),c,u,g,l);e.extend(i,{pss:s,bs:d}),r.expandJSKeys(i),i.itemDBKey||(i.itemDBKey=d["db-keys"]["db-key"])},copyToConfiguration:function(t,n,a,i){"array"==e.type(n)?a[t]={}:"object"==e.type(n)?(a[t]||(a[t]={}),i?e.extend(!0,a[t],n):e.extend(a[t],n)):a[t]=n},integratePageSection:function(t,n){var a=this;e.extend(a.sitemapping["template-sources"],n.sitemapping["template-sources"]);var i=a.getMemory(t);e.each(n.settings.configuration,function(r,o){i["query-state"].general[r]=i["query-state"].general[r]||{},i["query-state"].domain[r]=i["query-state"].domain[r]||{},i.dataset[r]=i.dataset[r]||{},i.feedback.pagesection[r]=i.feedback.pagesection[r]||{},i.feedback.block[r]=i.feedback.block[r]||{},i.runtimesettings["query-url"][r]=i.runtimesettings["query-url"][r]||{},i.runtimesettings["query-multidomain-urls"][r]=i.runtimesettings["query-multidomain-urls"][r]||{},i.runtimesettings.configuration[r]=i.runtimesettings.configuration[r]||{},i.runtimesettings["js-settings"][r]=i.runtimesettings["js-settings"][r]||{},i.settings["js-settings"][r]=i.settings["js-settings"][r]||{},i.settings.jsmethods.pagesection[r]=i.settings.jsmethods.pagesection[r]||{},i.settings.jsmethods.block[r]=i.settings.jsmethods.block[r]||{},i.settings["templates-cbs"][r]=i.settings["templates-cbs"][r]||{},i.settings["templates-paths"][r]=i.settings["templates-paths"][r]||{},i.settings["db-keys"][r]=i.settings["db-keys"][r]||{},i.settings.configuration[r]=i.settings.configuration[r]||{},e.extend(i["query-state"].general[r],n["query-state"].general[r]),e.extend(i["query-state"].domain[r],n["query-state"].domain[r]),e.extend(i.dataset[r],n.dataset[r]),e.extend(i.feedback.pagesection[r],n.feedback.pagesection[r]),e.extend(i.feedback.block[r],n.feedback.block[r]),e.extend(i.runtimesettings["query-url"][r],n.runtimesettings["query-url"][r]),e.extend(i.runtimesettings["query-multidomain-urls"][r],n.runtimesettings["query-multidomain-urls"][r]),e.extend(i.runtimesettings.configuration[r],n.runtimesettings.configuration[r]),e.extend(i.runtimesettings["js-settings"][r],n.runtimesettings["js-settings"][r]),e.extend(i.settings["js-settings"][r],n.settings["js-settings"][r]),e.extend(i.settings.jsmethods.pagesection[r],n.settings.jsmethods.pagesection[r]),e.extend(i.settings.jsmethods.block[r],n.settings.jsmethods.block[r]),e.extend(i.settings["templates-cbs"][r],n.settings["templates-cbs"][r]),e.extend(i.settings["templates-paths"][r],n.settings["templates-paths"][r]),e.extend(i.settings["db-keys"][r],n.settings["db-keys"][r]);var s=i.settings.configuration[r];e.each(o,function(e,t){a.copyToConfiguration(e,t,s,!1)});var c=o[M.JS_FRONTENDID],g=e("#"+c);a.initPageSectionSettings(t,g,s)})},getTopLevelSettings:function(e){var t=this;return{domain:e,"domain-id":getDomainId(e),feedback:t.getTopLevelFeedback(e)}},getPageSectionSettings:function(e,t){var n=this,a=n.getSettingsId(t),i=t.attr("id");return{feedback:n.getPageSectionFeedback(e,t),pssId:a,psId:i}},isMultiDomain:function(e,t,n){var a=this.getRuntimeSettings(e,t,n,"query-multidomain-urls");return a&&a.length>=2},getBlockSettings:function(e,t,n,a,i,r){var o=this,s={"db-keys":o.getDatabaseKeys(e,n,a),dataset:o.getBlockDataset(e,n,a),feedback:o.getBlockFeedback(e,n,a),bsId:a,bId:r,"toplevel-domain":t,"is-multidomain":o.isMultiDomain(t,n,a)};return o.expandBlockSettingsJSKeys(s),s},expandBlockSettingsJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&e["db-keys"]&&e["db-keys"][M.JS_SUBCOMPONENTS]&&(e["db-keys"].subcomponents=e["db-keys"][M.JS_SUBCOMPONENTS])},getBlockDataset:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).dataset[i][r]},getBlockFeedback:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).feedback.block[i][r]},getPageSectionFeedback:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).feedback.pagesection[a]},getTopLevelFeedback:function(e){return this.getMemory(e).feedback.toplevel},getSettings:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n);return i.getMemory(e).settings[a][r][o]},getRuntimeSettings:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n);return i.getMemory(e).runtimesettings[a][r][o]},getQueryUrl:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-url"]},getQueryMultiDomainUrls:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-multidomain-urls"]},getRuntimeConfiguration:function(e,t,n,a){var i=this;a=a||n;var r=i.getTemplateOrObjectSettingsId(a);return i.getRuntimeSettings(e,t,n,"configuration")[r]||{}},getDatabaseKeys:function(e,t,n){return this.getSettings(e,t,n,"db-keys")},getBlockFilteringUrl:function(e,t,n,a){var i=this,r=i.getQueryUrl(t,n);!r&&a&&(r=i.getTopLevelFeedback(e)[M.URLPARAM_URL]);var o=i.getBlockPostData(e,t,n,{paramsGroup:"visible"});return o&&(r.indexOf("?")>-1?r+="&":r+="?",r+=o),r},click:function(t,n,a){n=n||"",a=a||e(document.body),e('<a href="'+t+'" target="'+n+'" class="hidden"></a>').appendTo(a).trigger("click")},getUnembedUrl:function(t){var n=popJSLibraryManager.execute("getUnembedUrl",{url:t});return e.each(n,function(e,n){if(n)return t=n,-1}),t},getEmbedUrl:function(t){var n=popJSLibraryManager.execute("getEmbedUrl",{url:t});return e.each(n,function(e,n){if(n)return t=n,-1}),t},getAPIUrl:function(t){return e.each(M.API_URLPARAMS,function(e,n){t=add_query_arg(e,n,t)}),t},getPrintUrl:function(t){var n=popJSLibraryManager.execute("getPrintUrl",{url:t});return e.each(n,function(e,n){if(n)return t=n,-1}),t},getDestroyUrl:function(e){var t=getDomain(e);return t+"/destroy"+e.substr(t.length)},getTemplateOrObjectSettingsId:function(t){return"object"==e.type(t)?t.data("templateid"):t},getPageSectionJsSettings:function(e,t){var n=this;n.getSettingsId(t);return n.getSettings(e,t,t,"js-settings")||{}},getJsSettings:function(t,n,a,i){var r=this;i=i||a;r.getSettingsId(n),r.getSettingsId(a);var o=r.getTemplateOrObjectSettingsId(i),s=r.getSettings(t,n,a,"js-settings"),c=r.getRuntimeSettings(t,n,a,"js-settings"),g={};return s[o]&&e.extend(g,s[o]),c[o]&&e.extend(!0,g,c[o]),g},getPageSectionJsMethods:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).settings.jsmethods.pagesection[a]||{}},getBlockJsMethods:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).settings.jsmethods.block[i][r]||{}},restoreInitialBlockMemory:function(t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n),s=i.getTargetParamsScopeURL(n),c=i.getInitialBlockMemory(s),g=i.getRuntimeMemoryPage(t,n,a)["query-state"];g.general=e.extend(i.getBlockDefaultParams(),c["query-state"].general[r][o]);var u=c.dataset[r][o],l=i.getQueryMultiDomainUrls(t,n);e.each(l,function(t,n){g.domain[t]=e.extend(i.getBlockDefaultMultiDomainParams(),c["query-state"].domain[r][o]);var a=i.getMemory(t);a.runtimesettings.configuration[r][o]=e.extend({},c.runtimesettings.configuration[r][o]),a.feedback.block[r][o]=e.extend({},c.feedback.block[r][o]),u.length?e.extend(a.dataset[r][o],u):a.dataset[r][o]=[]})},getBlockQueryState:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n)["query-state"].general},getBlockMultiDomainQueryState:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n)["query-state"].domain},getBlockDomainQueryState:function(e,t,n,a){return this.getBlockMultiDomainQueryState(t,n,a)[e]||{}},getPageSectionParams:function(e,t){return this.getRuntimeMemoryPage(e,e,t)["query-state"]},getTarget:function(t){var n=t.attr("id"),a=M.URLPARAM_TARGET_MAIN;return e.each(M.FETCHTARGET_SETTINGS,function(e,t){if(t==n)return a=e,-1}),a},targetExists:function(e){return M.FETCHTARGET_SETTINGS[e]},getFetchTargetPageSection:function(t){return t&&"_self"!=t&&M.FETCHTARGET_SETTINGS[t]||(t=M.URLPARAM_TARGET_MAIN),e("#"+M.FETCHTARGET_SETTINGS[t])},getFetchPageSectionSettings:function(e){var t=e.attr("id");return M.FETCHPAGESECTION_SETTINGS[t]||{}},getTemplatesCbs:function(t,n,a,i){var r=this;i=i||"main";var o=r.getSettings(t,n,a,"templates-cbs"),s=o.cbs,c=o.actions;if(e.isArray(c)&&!c.length)return s;var g=[];return e.each(s,function(e,t){(!c[t]||c[t].indexOf(i)>-1)&&g.push(t)}),g},getTemplatePath:function(e,t,n,a){return this.getSettings(e,t,n,"templates-paths")[a]},getScriptTemplate:function(e){var t=this.getTemplateSource(e);return Handlebars.templates[t]},getPageSectionGroup:function(e){return e.closest(".pop-pagesection-group").addBack(".pop-pagesection-group")},getPageSection:function(e){return e.closest(".pop-pagesection").addBack(".pop-pagesection")},getPageSectionPage:function(e){var t=this,n=e.closest(".pop-pagesection-page").addBack(".pop-pagesection-page");return n.length?n:t.getPageSection(e)},getBlockId:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n).id},getHtml:function(e,t){var n=this.getScriptTemplate(e);if(void 0===n)return console.error("No template for "+e),"";try{return n(t)}catch(t){console.log("Error in "+e+": "+t.message)}return""},getItemObject:function(t,n,a){var i=this,r={},o={},s=i.getUserDatabase(t),c=i.getDatabase(t);return s[n]&&s[n][a]&&(r=s[n][a]),c[n]&&c[n][a]&&(o=c[n][a]),e.extend({},r,o)},getFrameTarget:function(e){return e.data("frametarget")||M.URLPARAM_TARGET_MAIN},getClickFrameTarget:function(e){var t=this;return e.data("clickframetarget")||t.getFrameTarget(e)},getOriginalLink:function(e){var t=this,n=e.data("interceptedTarget");return n?t.getOriginalLink(n):e}}}(jQuery);
;!function(t){popTopLevelJSON={strings:{},getProperties:function(){var n=this,i={};if(!t.isEmptyObject(n.strings))for(var e in n.strings)n.strings.hasOwnProperty(e)&&(i[e]=JSON.parse(n.strings[e]));return i},init:function(){var n=this;t(document).on("initTopLevelJson",function(i,e){t.extend(e,n.getProperties())})}}}(jQuery),popTopLevelJSON.init();
;!function(a){popCustomBootstrap={initDocument:function(){a(document).on("focusin",function(t){a(t.target).closest(".mce-window").length&&t.stopImmediatePropagation()})},runScriptsBefore:function(t){var e=this;t.pageSection;t.newDOMs.find(".collapse").addBack(".collapse").on("show.bs.collapse",function(){e.addBubblingFlag(a(this),".collapse","show")}).on("shown.bs.collapse",function(){e.addBubblingFlag(a(this),".collapse","shown")}).on("hide.bs.collapse",function(){e.addBubblingFlag(a(this),".collapse","hide")}).on("hidden.bs.collapse",function(){e.addBubblingFlag(a(this),".collapse","hidden")})},pageSectionNewDOMsInitialized:function(a){var t=this,e=a.domain,n=a.pageSection,o=a.newDOMs;t.activateNestedComponents(n,o),t.showComponentInitializeJS(e,n,o),t.triggerTabPaneEvents(o)},onBootstrapEventWindowResize:function(a){var t=a.targets;t.find(".collapse").addBack(".collapse").on("shown.bs.collapse hidden.bs.collapse",windowResize),t.find(".tab-pane").addBack(".tab-pane").on("shown.bs.tabpane",windowResize),t.find(".carousel").addBack(".carousel").on("slid.bs.carousel",windowResize)},isHidden:function(a){var t=a.targets;return!!t.parents(".collapse,.modal").not(".in").length||!!t.parents(".tab-pane").not(".active").length},isActive:function(a){var t=a.targets;return!(t.hasClass("tab-pane")&&!t.hasClass("active"))},activeTabLink:function(t){t.targets.click(function(t){a(this).parent("li").addClass("active").siblings("li").removeClass("active")})},activatePageTab:function(t){var e=this,n=t.pageSection,o=t.targets;o.click(function(){var t=a(this),o=a(t.data("target"));e.clickPageTab(n,o)}),o.each(function(){var t=a(this);t.closest(".pop-pagesection-page").find(".pop-pagetab-btn").not(".pop-inactive").length&&t.trigger("click")})},customQuickView:function(a){var t=a.pageSection,e=t.closest(".modal");t.on("fetched",function(){popBootstrap.showingModal(e)||(popBootstrap.closeModals(),e.modal("show"))}),popManager.getPageSectionGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":closed",function(){e.modal("hide")})},destroyPageOnModalClose:function(t){t.pageSection;t.targets.each(function(){var t=a(this);t.closest(".modal").on("hidden.bs.modal",function(){t.trigger("click")})})},customCloseModals:function(a){a.pageSection.on("destroy",function(){popBootstrap.closeModals()})},showComponentInitializeJS:function(a,t,e){var n=this,o=e.find(".collapse.pop-bscomponent").addBack(".collapse.pop-bscomponent");o.length&&n.initComponentHandlers(a,t,o,"shown.bs.collapse");var i=e.find(".modal.pop-bscomponent").addBack(".modal.pop-bscomponent");i.length&&n.initComponentHandlers(a,t,i,"shown.bs.modal");var s=e.find(".tab-pane.pop-bscomponent").addBack(".tab-pane.pop-bscomponent");s.length&&n.initComponentHandlers(a,t,s,"shown.bs.tabpane");var c=e.find(".carousel.pop-bscomponent").addBack(".carousel.pop-bscomponent");c.length&&n.initComponentHandlers(a,t,c,"slid.bs.carousel",!0)},initComponentHandlers:function(t,e,n,o,i){var s=this;n.on(o,function(n){var o=a(i?n.relatedTarget:this),c=a(o.data("initjs-targets")),r={"post-data":o.data("post-data")};s.recursiveSetBlockData(t,e,c,r)}),n.on(o,function(n){var o=a(i?n.relatedTarget:this),s=a(o.data("initjs-targets")).not("."+M.JS_INITIALIZED);if(s.length){var c={"force-init":!0},r=o.data("intercept-url")||o.data("original-url");r&&(c.url=r),popManager.initBlockBranches(t,e,s,c)}}),n.on(o,function(n){var o=a(i?n.relatedTarget:this),c=a(o.data("initjs-targets"));o.data("onetime-refetch")&&s.recursiveOneTimeRefetch(t,e,c),s.triggerBlocksVisible(t,e,c)})},recursiveSetBlockData:function(t,e,n,o){var i=this;n.each(function(){var n=a(this);a.each(o,function(a,t){n.data(a,t)});var s=popManager.getJsSettings(t,e,n)["initjs-blockbranches"];s&&i.recursiveSetBlockData(t,e,a(s.join(", ")),o)})},recursiveOneTimeRefetch:function(t,e,n){var o=this;n.each(function(){var n=a(this);popBlockDataQuery.makeOneTimeRefetch(e,n);var i=popManager.getJsSettings(t,e,n)["initjs-blockbranches"];i&&o.recursiveOneTimeRefetch(t,e,a(i.join(", ")))})},triggerBlocksVisible:function(t,e,n){var o=this;n.each(function(){var n=a(this);n.triggerHandler("visible");var i=popManager.getJsSettings(t,e,n)["initjs-blockbranches"];i&&o.triggerBlocksVisible(t,e,a(i.join(", ")))})},activateNestedComponents:function(t,e){var n=this;e.find("div.tab-pane div.tab-pane").addBack("div.tab-pane div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterTabPanes(a(this))}),e.find("div.tab-pane div.collapse").addBack("div.tab-pane div.collapse").on("shown.bs.collapse",function(){n.activateOuterTabPanes(a(this))}),e.find("div.carousel div.collapse").addBack("div.carousel div.collapse").on("shown.bs.collapse",function(){n.activateOuterCarousel(a(this))}),e.find("div.carousel div.tab-pane").addBack("div.carousel div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterCarousel(a(this))})},activateOuterTabPanes:function(t){var e=t.parents(".tab-pane").not(".active");e.length&&a('a[href="#'+e.attr("id")+'"]').tab("show")},activateOuterCarousel:function(a){var t=a.closest(".carousel");popBootstrapCarousel.showElement(t,a)},triggerTabPaneEvents:function(t){var e=this;t.find('a[data-toggle="tab"]').addBack('a[data-toggle="tab"]').on("show.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"show.bs.tabpane")}).on("shown.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"shown.bs.tabpane")}).on("hide.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"hide.bs.tabpane")}).on("hidden.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"hidden.bs.tabpane")})},triggerTabPaneEvent:function(t,e,n){var o=a(a(e.target).attr("href"));o.data("post-data",t.data("post-data")),o.data("onetime-refetch",t.data("onetime-refetch")),o.data("intercept-url",t.data("intercept-url")),o.data("original-url",t.data("original-url")),o.triggerHandler(n,[e])},resetBubbling:function(){a("[data-bubbling]").attr("data-bubbling",null),a("[data-bubbling-origin]").attr("data-bubbling-origin",null)},bubbling:function(a,t){if(a.is(t)){var e=a.attr("data-bubbling");if(e&&a.find('[data-bubbling-origin="'+e+'"]').length)return!0}return!1},addBubblingFlag:function(a,t,e){if(a.parents(t).length){var n=getRandomInt(1,1e10),o=a.attr("id")+"-"+e+"-"+n;a.attr("data-bubbling-origin",o),a.parents(t).attr("data-bubbling",o)}},activatePageTabs:function(a,t,e){e&&t.filter(".pop-pagesection-page").find(".pop-pagetab-btn").addClass("pop-inactive")},activateSideTabpanes:function(a,t,e){var n=t.filter(".tab-pane");if(n.length){var o=popManager.isFirstLoad(a);e||(o||t.siblings(".tab-pane").removeClass("active"),n.addClass("active")),n.on("shown.bs.tabpane",function(){"automatic"==popPageSectionManager.getOpenMode(a)&&(popPageSectionManager.open(a),popManager.scrollTop(a))}),e||o||popManager.scrollTop(a)}},activateQuickviewTabpanes:function(a,t,e){var n=t.filter(".tab-pane");n.length&&n.addClass("active").siblings(".tab-pane").removeClass("active")},activateModals:function(a,t){var e=t.filter(".modal");e.length&&(popBootstrap.closeModals(),e.modal("show"),e.on("show.bs.modal",function(a){popManager.closeMessageFeedback(e)}),e.on("shown.bs.modal",function(a){windowResize()}))},activateTabPanes:function(t,e,n,o,i){var s=this,c=e.filter(".tab-pane");if(c.length){var r=popManager.isFirstLoad(t);if(!n){if(!r){var l=e.siblings(".tab-pane.active");s.savePosition(t,l),l.removeClass("active")}c.addClass("active")}c.on("show.bs.tabpane",function(){var e=a(this).siblings(".active");e.length&&s.savePosition(t,e)}).on("shown.bs.tabpane",function(){var e=a(this);popPageSectionManager.open(t),s.newPageSectionJS(t,o,i,e)}),n||r||s.newPageSectionJS(t,o,i)}},clickPageTab:function(a,t){a.find(".pop-pagetab-btn").removeClass("active"),t.addClass("active")},savePosition:function(a,t){t.data("lastposition",popManager.getPosition(a)),t.data("theater",popPageSectionManager.isTheater())},newPageSectionJS:function(t,e,n,o){n.each(function(){var t=a(this);popPageSectionManager.close(t,"xs")}),popBootstrap.closeModals();var i;o?(void 0!==o.data("lastposition")&&(popManager.scrollTop(t,o.data("lastposition")),o.data("lastposition",null)),i=o.data("theater")||!1,o.data("theater",null)):popManager.scrollTop(t,0),e&&!i&&popPageSectionManager.theater(!1),i&&popPageSectionManager.theater(!0),windowResize()}}}(jQuery),popJSLibraryManager.register(popCustomBootstrap,["initDocument","runScriptsBefore","pageSectionNewDOMsInitialized","activeTabLink","isHidden","isActive"],!0),popJSLibraryManager.register(popCustomBootstrap,["customQuickView","destroyPageOnModalClose","customCloseModals","activatePageTab","onBootstrapEventWindowResize"]);
;!function(e){popBootstrap={modal:function(o){o.targets.on("show.bs.modal",function(o){var t=e(this),a=e(o.relatedTarget),n=(a=popManager.getOriginalLink(a)).data("header")||"";t.find(".modal-header .pop-box").html(n)})},closeModals:function(){e(".modal.in").modal("hide")},showingModal:function(e){return e.hasClass("in")},popover:function(e){var o=this,t=e.pageSection,a=e.block,n=e.targets;o.execPopover(t,a,n)},contentPopover:function(e){var o=this,t=e.pageSection,a=e.block,n=e.targets;o.execPopover(t,a,n.find("a[data-popover-target]"))},tooltip:function(e){var o=e.pageSection,t=e.targets;jQuery(document).ready(function(e){popManager.getPageSectionPage(t).one("destroy",function(){t.tooltip("destroy")}),t.each(function(){var t=e(this),a="#"+popManager.getDOMContainer(o,t).attr("id"),n={placement:t.data("tooltip-placement")||"top",title:t.attr("title"),container:a};t.tooltip(n)})})},openParentCollapse:function(e){var o=this,t=e.targets;o.execOpenParentCollapse(t)},alertCloseOnTimeout:function(e){var o=this,t=(e.pageSection,e.targets),a=t.data("closetime")||3e3;t.data("close",!0),t.mouseenter(function(){t.data("close",null),t.addClass("hover")}),t.mouseleave(function(){t.data("close",!0),o.execAlertCloseOnTimeout(t,a),t.removeClass("hover")}),o.execAlertCloseOnTimeout(t,a)},execOpenParentCollapse:function(e){e.closest(".collapse").not(".in").collapse("show")},execPopover:function(e,o,t){jQuery(document).ready(function(a){popManager.getPageSectionPage(o).one("destroy",function(){t.popover("destroy")});var n={animation:!1,html:!0,trigger:"manual focus",placement:"auto",delay:{hide:100},container:"#"+popManager.getDOMContainer(e,o).attr("id")};t.each(function(){var e=a(this),o=a(e.data("popover-target")).first();if(o.length){var t=o.html();t='<span data-block="'+("#"+popManager.getBlock(e).attr("id"))+'">'+t+"</span>";var r=a.extend({},n,{content:t});e.popover(r).on("mouseenter",function(){var e=this;a(this).popover("show"),a(".popover").on("mouseleave",function(){a(e).popover("hide")})}).on("mouseleave",function(){var e=this;setTimeout(function(){a(".popover:hover").length||a(e).popover("hide")},r.delay.hide)})}})})},execAlertCloseOnTimeout:function(e,o){setTimeout(function(){e.data("close")&&e.alert("close")},o)},scrollTop:function(e){var o=e.elem,t=(e.top,e.animate,o.closest(".modal").addBack(".modal"));return!!t.length&&(t.animate({scrollTop:0},"fast"),!0)}}}(jQuery),popJSLibraryManager.register(popBootstrap,["modal","closeModals","popover","contentPopover","tooltip","openParentCollapse","alertCloseOnTimeout","scrollTop"]);
;Handlebars.registerHelper("latestCountTargets",function(e,a){var t=[],s=".pop-block."+M.JS_INITIALIZED+" > .blocksection-latestcount > .pop-latestcount",n=e["post-type"],r=e.cats;return r&&r.length&&t.push(s+"."+n+"-"+r.join("."+n+"-")),jQuery.each(e.tags,function(e,a){var n=s+".tag"+a;t.push(n)}),jQuery.each(e.authors,function(e,a){var o=s+".author"+a;r&&r.length&&(o+=".author-"+n+"-"+r.join(".author-"+n+"-")),t.push(o)}),jQuery.each(e.references,function(e,a){var o=s+".single"+a;r&&r.length&&(o+=".single-"+n+"-"+r.join(".single-"+n+"-")),t.push(o)}),new Handlebars.SafeString(t.join(","))}),Handlebars.registerHelper("formatFeedbackMessage",function(e,a){var t=a.hash.tls,s=a.hash.pss,n=a.hash.bs;return e=popFeedbackMessage.formatFeedbackMessage(e,t,s,n),new Handlebars.SafeString(e)});
;!function(e){popSystem={destroyPage:function(t){var a=t.domain,o=t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),r=e(n.data("target"));popManager.destroyPageSectionPage(a,o,r)})},closePageSection:function(e){var t=e.pageSection;e.targets.click(function(e){e.preventDefault(),popPageSectionManager.close(t)})}}}(jQuery),popJSLibraryManager.register(popSystem,["closePageSection","destroyPage"]);
;!function(e){popAddEditPost={formCreatePostBlock:function(e){var t=this,a=e.domain,o=e.pageSection,n=e.block;popManager.getSettingsId(o),popManager.getSettingsId(n);n.one("fetched",function(e,i){t.execFormCreatePostBlock(a,o,n,i)})},manageStatus:function(e){var t=this,a=e.pageSection,o=e.block,n=e.targets;t.execManageStatus(n);var i=popManager.getSettingsId(a),r=popManager.getSettingsId(o);o.on("fetched",function(e,a){!0===a.feedback.block[i][r].result&&t.execManageStatus(n)})},execFormCreatePostBlock:function(e,t,a,o){var n=this,i=popManager.getSettingsId(t),r=popManager.getSettingsId(a);!0===o.feedback.block[i][r].result?popEventReactions.execDestroyPageOnUserLoggedOut(e,a):a.one("fetched",function(o,i){n.execFormCreatePostBlock(e,t,a,i)})},execManageStatus:function(t){t.each(function(){var t=e(this);t.val()==M.POSTSTATUS.PUBLISH?(t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled",!1)):(t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled",!1))})}}}(jQuery),popJSLibraryManager.register(popAddEditPost,["formCreatePostBlock","manageStatus"]);
;!function(t){popEditor={editor:function(i){var e=this,o=i.pageSection,n=i.block,r=i.targets;n.one("rerender",function(t){e.destroy(r)}),popManager.getPageSectionPage(n).one("destroy",function(){e.destroy(r)}),r.each(function(){var i=t(this).find(".pop-editor"),e=i.attr("id");i.closest("form").on("beforeSubmit",function(){tinymce.get(e)&&tinymce.get(e).save()})}),r.filter(".pop-editor-form-clear").each(function(){var i=t(this).find(".pop-editor"),e=i.attr("id");i.closest("form").on("clear",function(){tinymce.get(e)&&tinymce.get(e).setContent("")})}),!POP_CACHED_SETTINGS&&popManager.isFirstLoad(o)||t(document).ready(function(t){r.each(function(){var i=t(this).find(".pop-editor"),e=i.attr("id"),o=tinyMCEPreInit.mceInit[M.TEMPLATE_EDITOR_NAME];i.hasClass("pop-editor-autofocus")&&(o=t.extend({},o,{auto_focus:e})),tinyMCE.init(o),tinymce.execCommand("mceAddEditor",!0,e);var n=t.extend({},tinyMCEPreInit.qtInit[M.TEMPLATE_EDITOR_NAME],{id:e});quicktags(n),window.wpActiveEditor||(window.wpActiveEditor=e),"undefined"!=typeof jQuery?i.closest(".wp-editor-wrap").on("click.wp-editor",function(){this.id&&(window.wpActiveEditor=this.id.slice(3,-5))}):document.getElementById("wp-"+e+"-wrap").onclick=function(){window.wpActiveEditor=this.id.slice(3,-5)}})})},destroy:function(i){i.each(function(){var i=t(this).find(".pop-editor").attr("id");tinymce.execCommand("mceRemoveEditor",!1,i)})}}}(jQuery),popJSLibraryManager.register(popEditor,["editor"]);
;function mentions_source(e,n,t){popMentions.source(e,n,t)}function mentions_insert(e){return popMentions.insert(e)}function mentions_render(e){return popMentions.render(e)}!function(e){popMentions={previousData:{},documentInitialized:function(n){var t=this;e(document).ready(function(e){t.prefetch()})},prefetch:function(){var n=this;e.each(M.MENTIONS.TYPES,function(e,t){n.fetchData(e,t.baseline)})},fetchData:function(n,t,r){var i=this,a=popManager.getStoredData(t);a?i.processData(n,a,r):e.getJSON(t,function(e){popManager.storeData(t,e,864e5),i.processData(n,e,r)})},processData:function(e,n,t){this.previousData[e]=n,t&&t(n)},source:function(e,n,t){var r=this;if(M.MENTIONS.TYPES[t]){var i;if(i=e?M.MENTIONS.TYPES[t].url.replace(M.MENTIONS.QUERYWILDCARD,e):M.MENTIONS.TYPES[t].baseline){var a={url:i,delimiter:t,query:e};popJSLibraryManager.execute("mentionsSource",a),i=a.url,n(r.previousData[t]||[]),r.fetchData(t,i,n)}}},render:function(e){var n=this.infereDelimiter(e);return'<li><a href="javascript:;"><span>'+popManager.getHtml(M.MENTIONS.TYPES[n].template,e)+"</span></a></li>"},insert:function(e){var n=this.infereDelimiter(e);return"<span>"+n+e[M.MENTIONS.TYPES[n].key]+"</span>&nbsp;"},infereDelimiter:function(n){var t="";return e.each(M.MENTIONS.TYPES,function(e,r){if(void 0!==n[r.key])return t=e,-1}),t}}}(jQuery),popJSLibraryManager.register(popMentions,["documentInitialized"]);
;!function(e){popFeaturedImage={frame:null,documentInitialized:function(t){var a=this;e(document).ready(function(e){a.frame=wp.media({title:M.LABELS.MEDIA_FEATUREDIMAGE_TITLE,multiple:!1,library:{type:"image"},button:{text:M.LABELS.MEDIA_FEATUREDIMAGE_BTN}}),a.frame.on("open",function(){var e=a.getOpenFeaturedImage().find('input[type="hidden"]');if(e.val()){var t=a.frame.state().get("selection");attachment=wp.media.attachment(e.val()),attachment.fetch(),t.add(attachment?[attachment]:[])}}),a.frame.on("close",function(){var t=e(".pop-featuredimage.open"),n=a.frame.state().get("selection");if(n.length){var i,r,o=t.data("img-size");n.map(function(e){var t=(e=e.toJSON()).sizes[o]||e.sizes.medium||e.sizes.thumbnail;i=e.id,r={src:t.url,width:t.width,height:t.height}});var m=popManager.getBlock(t),g=popManager.getPageSection(m),p=popManager.getBlockTopLevelDomain(m);a.merge(p,g,m,t,i,r)}t.removeClass("open")}),e(document).triggerHandler("initialized.featuredImage",[a.frame])})},featuredImageSet:function(t){var a=this;t.pageSection,t.block;t.targets.click(function(t){t.preventDefault(),e(this).closest(".pop-featuredimage").addClass("open"),a.frame.open()})},featuredImageRemove:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this).closest(".pop-featuredimage");a.remove(n,i,r,o)})},merge:function(e,t,a,n,i,r){var o={extendContext:{value:i,img:r}},m=n.data("merge-template");popJSRuntimeManager.setBlockURL(a),popManager.mergeTargetTemplate(e,t,a,m,o),popManager.runJSMethods(e,t,a,m,"full")},remove:function(e,t,a,n){this.merge(e,t,a,n,"","")},getFrame:function(){return this.frame},getOpenFeaturedImage:function(){return e(".pop-featuredimage.open")}}}(jQuery),popJSLibraryManager.register(popFeaturedImage,["documentInitialized","featuredImageSet","featuredImageRemove"]);
;!function(e){popMediaManager={domain:null,initialized:{},needsRefresh:{},documentInitialized:function(){var i=this;e(document).on("uploader:start:settings",function(e,t){i.setUploadSettings(t)}),e(document.body).on("click.add-media-button",".insert-media",function(t){var a=e(t.currentTarget),n=e("#"+a.data("editor")),r=popManager.getBlock(n);i.domain=popManager.getBlockTopLevelDomain(r)}),e(document).on("user:loggedout",function(e){i.needsRefresh={featuredImage:!0,"editor-gallery":!0,"editor-insert":!0}}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var t=wp.media.frame.state();["gallery","insert"].indexOf(t.id)>-1&&(i.initialized["editor-"+t.id]&&i.needsRefresh["editor-"+t.id]&&i.refresh(t),i.initialized["editor-"+t.id]=!0,i.needsRefresh["editor-"+t.id]=!1)}),popFeaturedImage.getFrame().on("open",function(){i.initialized.featuredImage&&i.needsRefresh.featuredImage&&i.refresh(wp.media.frame.state()),i.initialized.featuredImage=!0,i.needsRefresh.featuredImage=!1})})},featuredImageSet:function(e){var i=this,t=e.domain;e.targets.click(function(e){i.domain=t})},getDomain:function(){return this.domain},refresh:function(e){e.get("library")._requery(!0)},setUploadSettings:function(e){e.multipart_params.post_id&&delete e.multipart_params.post_id}}}(jQuery),popJSLibraryManager.register(popMediaManager,["documentInitialized"]),popJSLibraryManager.register(popMediaManager,["featuredImageSet"],!0);
;!function(e){popMediaManagerCORS={domains:{"editor-gallery":null,"editor-insert":null,featuredImage:null},documentInitialized:function(){var a=this;e(document).on("wp.ajax:send:options",function(e,t){a.setEditorOptions(t)}),e(document).on("uploader:start:settings",function(e,t){a.setUploadSettings(t)}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var t=popMediaManager.getDomain(),n=wp.media.frame.state();["gallery","insert"].indexOf(n.id)>-1&&(t&&a.domains["editor-"+n.id]&&t!=a.domains["editor-"+n.id]&&(popMediaManager.needsRefresh["editor-"+n.id]=!0),a.domains["editor-"+n.id]=t)})}),e(document).on("initialized.featuredImage",function(e){popFeaturedImage.getFrame().on("open",function(){var e=popMediaManager.getDomain();e&&a.domains.featuredImage&&e!=a.domains.featuredImage&&(popMediaManager.needsRefresh.featuredImage=!0),a.domains.featuredImage=e})})},setEditorOptions:function(e){var a=popMediaManager.getDomain();if(a&&(a!=M.HOME_DOMAIN&&(e.url=a+M.AJAXURL,e.xhrFields={withCredentials:!0},e.crossDomain=!0),e.data&&e.data.action)){var t={"query-attachments":"media-form","save-attachment-compat":"media-form","save-attachment-order":"media-form","send-attachment-to-editor":"media-send-to-editor","send-link-to-editor":"media-send-to-editor"}[e.data.action];if(t){var n=popManager.getTopLevelFeedback(a)[M.URLPARAM_NONCES][t];e.data._wpnonce&&(e.data._wpnonce=n),e.data.nonce&&(e.data.nonce=n),e.data.query&&e.data.query._wpnonce&&(e.data.query._wpnonce=n),e.data.query&&e.data.query.nonce&&(e.data.query.nonce=n)}}},setUploadSettings:function(e){var a=popMediaManager.getDomain();if(a){e.url=a+M.UPLOADURL;var t={"upload-attachment":"media-form"}[e.multipart_params.action];t&&(e.multipart_params._wpnonce=popManager.getTopLevelFeedback(a)[M.URLPARAM_NONCES][t])}}}}(jQuery),popJSLibraryManager.register(popMediaManagerCORS,["documentInitialized"],!0);
;!function(e){popTabs={documentInitialized:function(a){e(document).ready(function(e){var a=!1,t=popManager.getTabsCurrentURL(),n=popManager.getScreenOpenTabs();if(e.each(n,function(e,n){if(n.length>1||e!=M.URLPARAM_TARGET_MAIN&&n.length||e==M.URLPARAM_TARGET_MAIN&&n[0]!=t)return a=!0,-1}),a)if(e.cookie("opentabs"))"true"==e.cookie("opentabs")?popManager.openTabs():popManager.keepScreenOpenTab(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);else{var r=e("#"+M.IDS_APPSTATUS),p="popTabs.keepScreenOpenTab('{0}', '{1}')".format(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);r.prepend(M.TABS_REOPENMSG.format("popTabs.openTabs()",p))}})},onDestroyPageSwitchTab:function(a){var t=this;a.pageSection;a.targets.each(function(){var a=e(this);popManager.getPageSectionPage(a).on("destroy",function(){t.switchTab(a)})})},addOpenTab:function(a){var t=this,n=a.pageSection,r=a.targets;!1!==a.addOpenTab&&r.each(function(){var a=e(this),r=t.getDestroyPageTabParams(n,a);popManager.addOpenTab(r.url,r.target)})},closePageTab:function(a){var t=this,n=a.pageSection;a.targets.click(function(a){a.preventDefault();var r=e(this),p=t.getDestroyPageTabParams(n,r);popManager.triggerDestroyTarget(p.url,p.target)})},getDestroyPageTabParams:function(e,a){return{url:a.data("url")||popManager.getTargetParamsScopeURL(popManager.getBlock(a)),target:a.attr("target")||popManager.getFrameTarget(e)}},switchTab:function(e){if(e.prev("a.pop-pagetab-btn").hasClass("active")){var a=popManager.getPageSectionPage(e),t=a.nextAll(".pop-pagesection-page").first();t.length||(t=a.prevAll(".pop-pagesection-page").first()),t.length&&t.find("a.pop-pagetab-btn").trigger("click")}},saveCookie:function(a){e("#"+M.IDS_TABS_REMEMBERCHECKBOX).prop("checked")&&e.cookie("opentabs",a,{expires:365,path:"/"})},openTabs:function(){this.saveCookie("true"),popManager.openTabs()},keepScreenOpenTab:function(e,a){this.saveCookie("false"),popManager.keepScreenOpenTab(e,a)}}}(jQuery),popJSLibraryManager.register(popTabs,["documentInitialized","onDestroyPageSwitchTab","addOpenTab","closePageTab"]);
;!function(e){popUserAccount={sessions:{},initDocument:function(e){var s=this,n=e.domain;s.initialLogin(n)},initDomain:function(e){var s=this,n=e.domain;s.sessions[n]={initialuserdata:!0,loggedin:!1,id:null,name:"",avatar:"",url:"",roles:[],userattributes:[]}},documentInitialized:function(e){var s=this;e.domain;s.checkpointInvalidateBlocks(),s.fetchAllDomainsLoggedInUserData()},pageSectionInitialized:function(e){var s=this;e.pageSection.on("fetched",function(e,n,i,t){s.feedbackLoginOut(t,!1)})},blockInitialized:function(e){var s=this;e.pageSection;e.block.on("fetched",function(e,n,i,t){s.feedbackLoginOut(t,!1)})},loadAvatar:function(e){var s=this,n=e.domain;e.targets.attr("src",s.sessions[n].avatar)},initialLogin:function(e){var s=this;feedbackAvailable=s.feedbackLoginOut(e,!0),s.sessions[e].initialuserdata=!feedbackAvailable},fetchAllDomainsLoggedInUserData:function(s){var n=this;e.each(M.USERLOGGEDIN_DATA_PAGEURLS,function(e,i){var t=getDomain(i);n.sessions[t].initialuserdata&&n.fetchLoggedInUserData(i,s)})},fetchLoggedInUserData:function(e,s){(s=s||{})["loadingmsg-target"]=M.USERLOGGEDIN_LOADINGMSG_TARGET,s.silentDocument=!0,popManager.fetch(e,s)},isLoggedInAnyDomain:function(){var s=this,n=!1;return e.each(s.sessions,function(e,s){if(s.loggedin)return n=!0,-1}),n},isLoggedIn:function(e){return this.sessions[e].loggedin},updateUserInfo:function(s,n,i,t,o,a,r){var d=this,u={},c=getDomainId(s);d.sessions[s].name!=i&&(d.sessions[s].name=i,e(".pop-user-name."+c).text(i),u.name=i),d.sessions[s].id==n&&d.sessions[s].avatar==t||(d.sessions[s].id=n,d.sessions[s].avatar=t,e(".pop-user-avatar."+c).attr("src",t),u.avatar=t),d.sessions[s].url!=o&&(d.sessions[s].url=o,e(".pop-user-url."+c).attr("href",o),u.url=o),0===e(d.sessions[s].roles).not(a).length&&0===e(a).not(d.sessions[s].roles).length||(d.sessions[s].roles=a,e.each(M.ROLES,function(s,n){e(document.body).removeClass(n+"-"+c)}),e.each(d.sessions[s].roles,function(s,n){e(document.body).addClass(n+"-"+c)}),u.roles=a),0===e(d.sessions[s].userattributes).not(r).length&&0===e(r).not(d.sessions[s].userattributes).length||(d.sessions[s].userattributes=r,e.each(M.USERATTRIBUTES,function(s,n){e(document.body).removeClass(n+"-"+c)}),e.each(d.sessions[s].userattributes,function(s,n){e(document.body).addClass(n+"-"+c)}),u.userattributes=r),e.isEmptyObject(u)||(u.id=n,e(document).triggerHandler("user:updated",[u,s]),e(document).triggerHandler("user:updated:"+s,[u]))},loginout:function(s,n,i,t,o,a,r,d,u){var c=this;if(c.updateUserInfo(n,t,o,a,r,d,u),c.sessions[n].loggedin!=i){c.sessions[n].loggedin=i;var l=[];n==M.HOME_DOMAIN&&l.push("loggedin-localdomain");var o,g=e(document.body),f=getDomainId(n);c.sessions[n].loggedin?(l.push("loggedin-anydomain"),g.data("loggedinuser-id-"+f,t).addClass("loggedin-"+f+" user-"+t+"-"+f),e.each(l,function(e,s){g.addClass(s)}),o="user:loggedin"):(c.isLoggedInAnyDomain()||l.push("loggedin-anydomain"),g.removeClass("loggedin-"+f).removeClass("user-"+g.data("loggedinuser-id-"+f)+"-"+f).data("loggedinuser-id-"+f,""),e.each(l,function(e,s){g.removeClass(s)}),o="user:loggedout"),"initialfeedback"!=s&&c.closeCheckpointMessages(n),e(document).triggerHandler(o,[s,n]),e(document).triggerHandler(o+":"+n,[s]),e(document).triggerHandler("user:loggedinout",[s,n]),e(document).triggerHandler("user:loggedinout:"+n,[s])}},feedbackLoginOut:function(e,s){var n=this,i=popManager.getTopLevelFeedback(e)[M.DATALOAD_USER];if(void 0!==i){var t,o,a,r,d;t=i[M.DATALOAD_USER_LOGGEDIN],o=i[M.DATALOAD_USER_ID],a=i[M.DATALOAD_USER_NAME],r=i[M.DATALOAD_USER_AVATAR],d=i[M.DATALOAD_USER_URL],roles=i[M.DATALOAD_USER_ROLES],userattributes=i[M.DATALOAD_USER_ATTRIBUTES];var u="feedback";return s?u="initialfeedback":n.sessions[e].initialuserdata&&(u="initialuserdata",n.sessions[e].initialuserdata=!1),n.loginout(u,e,t,o,a,r,d,roles,userattributes),!0}return!1},checkpointInvalidateBlocks:function(){var s=this;e(document).on("user:loggedin",function(e,n,i){"initialfeedback"!=n&&"initialuserdata"!=n&&s.closeCheckpointMessages(i)})},closeCheckpointMessages:function(e){jQuery(document).ready(function(s){s(".alert.in.pop-messagefeedback.checkpoint."+getDomainId(e)).removeClass("fade").alert("close")})},getLoggedInUserId:function(e){var s=this;return!(!s.sessions[e]||!s.sessions[e].loggedin)&&s.sessions[e].id}}}(jQuery),popJSLibraryManager.register(popUserAccount,["initDocument","initDomain","documentInitialized","pageSectionInitialized","blockInitialized","loadAvatar"]);
;jQuery,popWaypoints={waypointsHistoryStateNew:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=t.getOptions(n,a),r=new Waypoint({element:a,handler:function(t){var n=this.element;popManager.isHidden(n)||"up"==t&&popManager.historyReplaceState(e(this))},context:i.context,offset:"bottom-in-view"}),s=new Waypoint({element:a,handler:function(t){var n=this.element;popManager.isHidden(n)||"down"==t&&popManager.historyReplaceState(e(this))},context:i.context});t.destroy(n,o,r),t.destroy(n,o,s)})})},waypointsHistoryStateOriginal:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=t.getOptions(n,a),r=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||"up"==e&&popManager.historyReplaceState(t)},context:i.context});t.destroy(n,o,r)})})},waypointsToggleClass:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=e(a.data("target")),r=a.data("class");if(i.length&&r){var s=t.getOptions(n,a),c=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?i.addClass(r):"up"==e&&i.removeClass(r))},context:s.context,offset:s.context?0:function(){return t.getOffset(this.element)}});t.destroy(n,o,c)}})})},waypointsToggleCollapse:function(e){var t=this,n=e.targets;jQuery(document).ready(function(e){n.each(function(){var n=e(this),o=e(n.data("collapse-target"));if(o.length){var a=popManager.getBlock(o),i=popManager.getBlock(a);t.execWaypointsToggleCollapse(i,a,o,n)}})})},waypointsTheater:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=t.getOptions(n,a),r=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?popPageSectionManager.theater(!0):"up"==e&&popPageSectionManager.theater(!1))},context:i.context,offset:i.context?0:function(){return t.getOffset(this.element)}});t.destroy(n,o,r)})})},waypointsFetchMore:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){var i=[],r=popManager.isContentLoaded(n,o);a.each(function(){var a=e(this),s=t.getOptions(n,a),c=new Waypoint({element:a,handler:function(e){var t=this.element;if("down"==e){if(popManager.isHidden(t))return;t.trigger("click")}},context:s.context,enabled:r,offset:"bottom-in-view"});t.destroy(n,o,c),i.push(c)}),o.on("fetchCompleted",function(o){var a=e(this);popManager.stopFetchingBlock(n,a)?e.each(i,function(e,o){o.enabled&&(o.disable(),t.reEnable(n,a,o))}):e.each(i,function(e,t){t.enabled||t.enable(),t.context.refresh()})})})},reEnable:function(e,t,n){var o=this;t.one("beforeReload",function(){t.one("fetchCompleted",function(){popManager.stopFetchingBlock(e,t)?o.reEnable(e,t,n):n.enable()})})},execWaypointsToggleCollapse:function(e,t,n,o){var a=this,i=a.getOptions(e,n),r=new Waypoint({element:n,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?o.collapse("show"):"up"==e&&o.collapse("hide"))},context:i.context});a.destroy(e,t,r)},getOptions:function(e,t){var n={},o=e.filter(".pop-waypoints-context");return o.length?n.context=o:(o=t.closest(".pop-waypoints-context")).length&&(n.context=o),n},getOffset:function(e){return popManager.getPageSection(e).offset().top},destroy:function(e,t,n){popManager.getPageSectionPage(t).one("destroy",function(){n.destroy()})}},popJSLibraryManager.register(popWaypoints,["waypointsFetchMore","waypointsToggleClass","waypointsToggleCollapse","waypointsTheater","waypointsHistoryStateOriginal","waypointsHistoryStateNew"]);
;!function(i){popWindow={windowSize:function(e){var n=this;e.pageSection;e.targets.click(function(e){e.preventDefault();var a=i(this),m=i(a.data("target"));if(m.length){var s=a.data("toggle");"window-fullsize"==s?n.fullsize(m):"window-maximize"==s?n.maximize(m):"window-minimize"==s&&n.minimize(m)}})},getSize:function(i){return i.hasClass("fullsize")?"fullsize":i.hasClass("maximized")?"maximized":i.hasClass("minimized")?"minimized":null},fullsize:function(i){i.removeClass("maximized minimized").addClass("fullsize"),i.triggerHandler("fullsize.bs.window")},maximize:function(i){i.removeClass("fullsize minimized").addClass("maximized"),i.triggerHandler("maximized.bs.window")},minimize:function(i){i.removeClass("fullsize maximized").addClass("minimized"),i.triggerHandler("minimized.bs.window")}}}(jQuery),popJSLibraryManager.register(popWindow,["windowSize"]);
;!function(t){popMultiselect={multiselect:function(e){e.pageSection;var n=e.block,l=e.targets;popManager.getPageSectionPage(n).one("destroy",function(){l.multiselect("destroy")});var s={buttonClass:"btn btn-default",buttonContainer:'<div class="btn-group multiselect-btn-group" />',enableHTML:!0,nonSelectedText:M.MULTISELECT_NONSELECTEDTEXT,nSelectedText:M.MULTISELECT_NSELECTEDTEXT,allSelectedText:M.MULTISELECT_ALLSELECTEDTEXT};l.each(function(){var e=t(this),n=t.extend({},s);e.attr("title")&&(n.nonSelectedText=e.attr("title")),e.hasClass("input-sm")&&(n.buttonClass+=" btn-sm"),e.hasClass("input-lg")&&(n.buttonClass+=" btn-lg"),e.multiselect(n)})}}}(jQuery),popJSLibraryManager.register(popMultiselect,["multiselect"]);
;jQuery,popDynamicMaxHeight={dynamicMaxHeight:function(a){a.targets.dynamicMaxHeight()}},popJSLibraryManager.register(popDynamicMaxHeight,["dynamicMaxHeight"]);
;!function(a){popDateRange={dateRange:function(e){var t=this,s=e.pageSection,n=(e.block,e.targets),r=M.DATERANGE_FORMAT||"DD/MM/YYYY",l={autoUpdateInput:!1,autoApply:!0,linkedCalendars:!0,showWeekNumbers:!1,timePicker:!1,buttonClasses:["btn"],applyClass:"btn-success",cancelClass:"btn-warning",format:r,separator:M.DATERANGE_SEPARATOR,locale:{applyLabel:M.DATERANGE_APPLY,cancelLabel:M.DATERANGE_CANCEL,fromLabel:M.DATERANGE_FROM,toLabel:M.DATERANGE_TO,customRangeLabel:M.DATERANGE_CUSTOMRANGE,daysOfWeek:M.DATERANGE_DAYSOFWEEK,monthNames:M.DATERANGE_MONTHNAMES,firstDay:1}},o={maxDate:moment().add(1,"days")},i={minDate:moment().subtract(1,"days")},m={opens:"right"},A={opens:"left"};n.each(function(){var e=a(this),n=e.hasClass("opens-left")?A:m,c={parentEl:"#"+popManager.getDOMContainer(s,e).attr("id")},p=a.extend({},l,n,c);if(e.hasClass("daterange-future")&&!e.hasClass("daterange-past")?a.extend(p,i):e.hasClass("daterange-past")&&!e.hasClass("daterange-future")&&a.extend(p,o),e.hasClass("timepicker")){var E=M.DATERANGE_TIMEFORMAT||"h:mm A";p.locale.format=r+" "+E;var f={autoApply:!1,timePicker:!0,timePicker24Hour:"h:mm A"!=E,timePickerIncrement:15};a.extend(p,f)}e.on("apply.daterangepicker",function(e,t){a(this).val(t.startDate.format(t.locale.format)+" - "+t.endDate.format(t.locale.format))}),e.daterangepicker(p,t.callback)})},callback:function(a,e){var t=this.element;t.siblings(".from").val(a.format("YYYY-MM-DD")),t.siblings(".to").val(e.format("YYYY-MM-DD")),t.siblings(".fromtime").length&&(t.siblings(".fromtime").val(a.format("HH:mm")),t.siblings(".totime").val(e.format("HH:mm")))}}}(jQuery),popJSLibraryManager.register(popDateRange,["dateRange"]);
;!function(e){popTypeahead={typeaheadSearchBtn:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.click(function(){var t=e(this).closest(".pop-typeahead");a.executeTypeaheadSearch(n,i,t)})},typeaheadSearchInput:function(t){var a=this,n=t.pageSection,i=t.block;t.targets.keypress(function(t){if(13==event.which){event.preventDefault();var r=e(this).closest(".pop-typeahead");r.find('input[type="text"].tt-input').typeahead("close"),a.executeTypeaheadSearch(n,i,r)}})},fillTypeahead:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block;t.targets.each(function(){var t=e(this),o=t.data("urlparam");if(o){var p=popManager.getBlockTopLevelURL(r),c=getParam(o,p);if(c){var l=t.data("database-key");e.each(c,function(e,o){var p=popManager.getItemObject(n,l,o);a.selectTypeahead(n,i,r,t,p)}),popBootstrap.execOpenParentCollapse(t)}}})},selectDatum:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this),p=e(o.data("target")),c=o.data("objectid"),l=o.data("db-key"),d=popManager.getItemObject(n,l,c);a.selectTypeahead(n,i,r,p,d)})},selectableTypeahead:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block,o=t.targets;a.typeahead(n,i,r,o),o.each(function(){var t=e(this);a.validateMaxSelected(i,r,t),t.bind("typeahead:selected",function(t,o,p){var c=e(this);a.selectTypeahead(n,i,r,c,o)})})},fetchlinkTypeahead:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block,o=t.targets;a.typeahead(n,i,r,o),o.each(function(){e(this).bind("typeahead:selected",function(t,a,n){var i=e(this).closest(".pop-typeahead");popManager.click(a.url,"",i)})})},selectableTypeaheadTrigger:function(t){var a=this;t.pageSection,t.block;t.targets.on("close.bs.alert",function(){var t=e(this),n=t.closest(".pop-typeahead"),i=a.getElementsToDisable(n);i.attr("disabled",!1),i.removeClass("disabled");var r=t.children('input[type="hidden"]').val();n.triggerHandler("close",[t,r])})},removeLocalStorageItem:function(e){var t=e.path,a=e.key;e.result=e.result||a.startsWith("__"+t)},selectTypeahead:function(e,t,a,n,i){var r=this,o=n.find('input[type="text"].tt-input');r.triggerSelect(e,t,a,n,i),o.typeahead("val","")},executeTypeaheadSearch:function(e,t,a){var n=a.find('input[type="text"].tt-input'),i=popManager.getQueryUrl(e,t);n.typeahead("val")&&(i=i.replace(M.JSPLACEHOLDER_QUERY,n.typeahead("val")),popManager.click(i,"",a))},getElementsToDisable:function(e){return e.children("div.pop-operation").find("a, button, input")},typeahead:function(t,a,n,i){var r=this;popManager.getPageSectionPage(n).one("destroy",function(){r.destroy(i)}),n.one("rerender",function(e){r.destroy(i)}),i.each(function(){var i=e(this),r=i.find('input[type="text"]'),o=popManager.getJsSettings(t,a,n,i),p=[];e.each(o["dataset-components"],function(e,i){var r=popManager.getJsSettings(t,a,n,i);p.push(r.dataset)}),e.each(p,function(e,t){var a=t.layout;t.template=popManager.getScriptTemplate(a);var n={};t.prefetch&&(n.url=t.prefetch,popJSLibraryManager.execute("typeaheadPrefetchURL",n),t.prefetch=n.url),t.remote&&(n.url=t.remote,popJSLibraryManager.execute("typeaheadRemoteURL",n),t.remote=n.url)});var c=[],l=[];e.each(p,function(t,a){var n=a.limit;p.length>1&&n>3&&(n=3);var i={datumTokenizer:function(t){var n=[];return e.each(a.tokenizerKeys,function(e,a){n=n.concat(Bloodhound.tokenizers.whitespace(t[a]))}),n},queryTokenizer:Bloodhound.tokenizers.whitespace};a.local&&(i.local=a.local),a.prefetch&&(i.prefetch={url:a.prefetch,thumbprint:a[M.KEYS_THUMBPRINT]}),a.remote&&(i.remote={url:a.remote,wildcard:M.JSPLACEHOLDER_QUERY});var r=new Bloodhound(i);c.push(r);var o;o=a.staticSuggestions?function(t,n){var i=[];e.each(a.staticSuggestions,function(a,n){var r={};e.each(n,function(e,a){"string"==typeof a&&(a=a.replace(M.JSPLACEHOLDER_QUERY,t)),r[e]=a}),i.push(r)}),n(i)}:r.ttAdapter(),l.push({source:o,name:a.name,display:a.valueKey,limit:n,templates:{suggestion:a.template,header:a.header,pending:a.pending,notFound:a.notFound}})}),e.each(c,function(e,t){t.initialize()}),1==l.length?r.typeahead({highlight:!0},l[0]):2==l.length?r.typeahead({highlight:!0},l[0],l[1]):3==l.length?r.typeahead({highlight:!0},l[0],l[1],l[2]):4==l.length&&r.typeahead({highlight:!0},l[0],l[1],l[2],l[3])})},triggerSelect:function(t,a,n,i,r){var o=this;if(r&&r.id&&0==i.find('input[type="hidden"][value="'+r.id+'"]').length){var p=popManager.getJsSettings(t,a,n,i),c=p["trigger-layout"],l=(popManager.getSettingsId(a),popManager.getSettingsId(n),{extendContext:e.extend({itemObject:r},p["datum-context"])});popJSRuntimeManager.setBlockURL(n);var d=popManager.getTemplateHtml(t,a,n,c,l);popManager.mergeHtml(d,i.find(".pop-box")),popManager.runJSMethods(t,a,n,c,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(t,a,n,c),o.validateMaxSelected(a,n,i),i.triggerHandler("selected",[r])}},validateMaxSelected:function(e,t,a){var n=this;if(a.data("max-selected")&&a.find('input[type="hidden"]').length==a.data("max-selected")){var i=n.getElementsToDisable(a);i.attr("disabled","disabled"),i.addClass("disabled")}},removeSelected:function(e,t){e.find('input[type="hidden"][value="'+t+'"]').closest(".alert").alert("close")},destroy:function(e){e.find('input[type="text"].tt-input').typeahead("destroy")}}}(jQuery),popJSLibraryManager.register(popTypeahead,["selectableTypeahead","fillTypeahead","selectDatum","fetchlinkTypeahead","selectableTypeaheadTrigger","typeaheadSearchBtn","typeaheadSearchInput","removeLocalStorageItem"]);
;jQuery,popGA={documentInitialized:function(){var t=t||[];t.push(["_setAccount",M.GOOGLEANALYTICS]),t.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},replaceState:function(t){_gaq.push(["_trackPageview"])}},popJSLibraryManager.register(popGA,["documentInitialized","replaceState"]);
;jQuery,popPerfectScrollbar={scrollbarHorizontal:function(r){r.pageSection;var e=r.targets;jQuery(document).ready(function(r){e.perfectScrollbar({suppressScrollY:!0})})},scrollbarVertical:function(r){r.pageSection;var e=r.targets;jQuery(document).ready(function(r){e.perfectScrollbar({suppressScrollX:!0})})},getPosition:function(r){var e=r.elem.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(e.length){var l=e.children(".perfect-scrollbar-offsetreference");if(l.length)return-1*l.position().top}return 0},doScroll:function(r,e,l){l?r.animate({scrollTop:e}):r.scrollTop(e),r.perfectScrollbar("update")},scrollToElem:function(r){var e=this,l=r.elem,o=r.position,t=r.animate,c=l.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(c.length){var a=0;if(o){var n=c.children(".perfect-scrollbar-offsetreference");n.length||(n=l),a=o.offset().top-n.offset().top}return e.doScroll(c,a,t),!0}return!1},scrollTop:function(r){var e=this,l=r.elem,o=r.top,t=r.animate;o=o||0;var c=l.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");return!!c.length&&(e.doScroll(c,o,t),!0)}},popJSLibraryManager.register(popPerfectScrollbar,["scrollbarHorizontal","scrollbarVertical","getPosition","scrollToElem","scrollTop"]);
;!function(e){popFunctions={expandJSKeys:function(e){var t=e.context;t[M.JS_FONTAWESOME]&&(t.fontawesome=t[M.JS_FONTAWESOME]),t[M.JS_DESCRIPTION]&&(t.description=t[M.JS_DESCRIPTION])},beep:function(e){beep()},showmore:function(t){var a=t.targets;a.find(".pop-showmore-more").click(function(t){t.preventDefault();var a=e(this).closest(".pop-content");a.find(".pop-showmore-more").addClass("hidden"),a.find(".pop-showmore-less").removeClass("hidden"),a.find(".pop-showmore-more-full").removeClass("hidden")}),a.find(".pop-showmore-less").click(function(t){t.preventDefault();var a=e(this).closest(".pop-content");a.find(".pop-showmore-less").addClass("hidden"),a.find(".pop-showmore-more").removeClass("hidden"),a.find(".pop-showmore-more-full").addClass("hidden")})},hideEmpty:function(e){e.targets.closest(".pop-hide-empty").addClass("hidden")},switchTargetClass:function(t){t.targets.click(function(t){var a=e(this);a.is('a[href="#"]')&&t.preventDefault();var o=e(a.data("target"))||e(document.body),n=a.data("mode")||"add",r=a.data("class");"add"==n?o.addClass(r):"remove"==n?o.removeClass(r):"toggle"==n&&o.toggleClass(r)})},doNothing:function(e){e.targets.click(function(e){e.preventDefault()})},fetchMore:function(e){var t=e.pageSection,a=e.block,o=e.targets;a.on("beforeFetch",function(e,t){t["skip-status"]||o.button("loading")}),a.on("fetchCompleted",function(e){popManager.stopFetchingBlock(t,a)?o.addClass("hidden"):(o.removeClass("hidden"),o.button("reset"))}),o.click(function(e){e.preventDefault(),popManager.fetchBlock(t,a,{operation:M.URLPARAM_OPERATION_APPEND})})},fetchMoreDisable:function(e){var t=e.block,a=e.targets;t.on("beforeFetch",function(e,t){t["skip-status"]||a.addClass("disabled").attr("disabled","disabled")}),t.on("fetchCompleted",function(e){a.removeClass("disabled").attr("disabled",!1)})},saveLastClicked:function(t){t.pageSection;var a=t.block;t.targets.click(function(t){var o=e(this);a.find('[data-action="retry"]').data("lastclicked","#"+o.attr("id")).removeClass("hidden")})},retrySendRequest:function(t){t.pageSection,t.block;t.targets.click(function(t){t.preventDefault();var a=e(this);a.data("lastclicked")&&e(a.data("lastclicked")).trigger("click")})},reset:function(t){var a=t.domain,o=t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),r=popManager.getBlock(n);popManager.reset(a,o,r),popManager.closeMessageFeedback(r)})},sortable:function(t){t.pageSection,t.block;var a=t.targets;e(document).ready(function(e){a.sortable({cursor:"move"})})},onActionThenClick:function(t){t.targets.each(function(){var t=e(this),a=e(t.data("triggertarget")),o=t.data("trigger-action")||"click";t.data("triggertarget-internal")&&(a=a.find(t.data("triggertarget-internal"))),a.on(o,function(e){t.trigger("click")})})},getUrl:function(t,a,o){var n=(a=popManager.getOriginalLink(a)).data("target-url");if(!n){var r=e(a.data("blocktarget")),i=popManager.getPageSection(r);n=popManager.getBlockFilteringUrl(t,i,r,o)}return n}}}(jQuery),popJSLibraryManager.register(popFunctions,["expandJSKeys","showmore","hideEmpty","switchTargetClass","doNothing","fetchMore","fetchMoreDisable","saveLastClicked","retrySendRequest","reset","sortable","onActionThenClick","beep"]);
;!function(t){popInputFunctions={fillURLParamInput:function(a){var n=this,l=a.block;a.targets.each(function(){var a=t(this),r=n.getURLParamInputValue(l,a);a.val(r)})},fillAddonInput:function(a){var n=this,l=a.targets,r=a.relatedTarget;r&&l.each(function(){var a=t(this);n.fillInput(a,r)})},fillModalInput:function(a){var n=this;a.targets.each(function(){var a=t(this);a.closest(".modal").on("show.bs.modal",function(l){var r=t(l.relatedTarget);n.fillInput(a,r)})})},fillAddonURLInput:function(a){var n=this,l=a.domain,r=a.targets,i=a.relatedTarget;i&&r.each(function(){var a=t(this);n.fillURLInput(l,a,i)})},fillModalURLInput:function(a){var n=this,l=a.domain;a.targets.each(function(){var a=t(this);a.closest(".modal").on("show.bs.modal",function(r){var i=t(r.relatedTarget);n.fillURLInput(l,a,i)})})},browserUrl:function(t){var a=t.targets;a.closest("form").on("beforeSubmit",function(){var t=window.location.href;a.val(t)})},getURLParamInputValue:function(t,a){var n,l=a.data("urlparam");if(l){var r=popManager.getBlockTopLevelURL(t);n=getParam(l,r)}return n||""},fillInput:function(t,a){a=popManager.getOriginalLink(a);var n,l=t.data("attr");l&&(n=a.data(l)),n=n||"",t.val(n)},fillURLInput:function(t,a,n){n=popManager.getOriginalLink(n);var l=popFunctions.getUrl(t,n);a.val(l)}}}(jQuery),popJSLibraryManager.register(popInputFunctions,["fillURLParamInput","fillAddonInput","fillModalInput","fillAddonURLInput","fillModalURLInput","browserUrl"]);
;!function(e){popEmbedFunctions={modalReloadEmbedPreview:function(a){var t=this,r=a.domain,n=a.pageSection;a.targets.each(function(){var a=e(this),o=popManager.getBlock(a),i=popManager.getJsSettings(r,n,o,a)["url-type"]||"embed";o.closest(".modal").on("show.bs.modal",function(d){o.data("embed-iframe")&&(a=e(o.data("embed-iframe")));var p=e(d.relatedTarget),g=popFunctions.getUrl(r,p,!0);"embed"==i?g=popManager.getEmbedUrl(g):"api"==i&&(g=popManager.getAPIUrl(g)),t.embedPreview(r,n,o,a,g)})})},reloadEmbedPreview:function(a){var t=this,r=a.domain,n=a.pageSection,o=a.block;a.targets.each(function(){var a=e(this);e(a.data("input-target")).change(function(){e(this);t.embedPreviewFromInput(r,n,o,a)}),t.embedPreviewFromInput(r,n,o,a)})},replaceCode:function(a){var t=this,r=a.domain,n=a.pageSection;a.targets.each(function(){var a=e(this),o=popManager.getBlock(a),i=popManager.getJsSettings(r,n,o,a)["url-type"]||"";a.closest(".modal").on("show.bs.modal",function(n){var o=e(n.relatedTarget),d=popFunctions.getUrl(r,o);"embed"==i?d=popManager.getEmbedUrl(d):"api"==i&&(d=popManager.getAPIUrl(d)),t.execReplaceCode(a,d)})})},embedPreviewFromInput:function(a,t,r,n){var o=this,i=e(n.data("input-target")).val();if(i&&isUrlValid(i)){var d=e(n.data("iframe-target")),p=o.embedPreview(a,t,r,d,i);n.data("iframe-target","#"+p.targetContainer.attr("id"))}},embedPreview:function(e,a,t,r,n){var o={operation:M.URLPARAM_OPERATION_REPLACEINLINE,extendContext:{src:n},"merge-target":"#"+r.attr("id")},i=r.data("templateid");popJSRuntimeManager.setBlockURL(t);var d=popManager.mergeTargetTemplate(e,a,t,i,o);popManager.runJSMethods(e,a,t,i,"full");var p=popJSRuntimeManager.getLastGeneratedId(e,popManager.getSettingsId(a),popManager.getSettingsId(t),i);return t.data("embed-iframe","#"+p),d},execReplaceCode:function(e,a){var t=e.data("code-placeholder").format(a);e.val(t)}}}(jQuery),popJSLibraryManager.register(popEmbedFunctions,["replaceCode","modalReloadEmbedPreview","reloadEmbedPreview"]);
;!function(n){popPrintFunctions={printWindow:function(i){getParam(M.URLPARAM_ACTION,window.location.href)==M.URLPARAM_ACTION_PRINT&&n(document).ready(function(n){window.print()})}}}(jQuery),popJSLibraryManager.register(popPrintFunctions,["printWindow"]);
;jQuery,popContentFunctions={imageResponsive:function(n){n.targets.find("div.pop-content").addBack("div.pop-content").find("img, .wp-caption").addClass("img-responsive")}},popJSLibraryManager.register(popContentFunctions,["imageResponsive"]);
;!function(e){popTargetFunctions={copyHeader:function(e){var a=e.targets,r=e.relatedTarget;if(r){var t=(r=popManager.getOriginalLink(r)).data("header");t&&a.find(".pop-header").removeClass("hidden").find(".pop-box").html(t)}},highlight:function(a){a.targets.each(function(){var a=e(this),r=popManager.getPageSection(a);popManager.scrollToElem(r,a,!0)})}}}(jQuery),popJSLibraryManager.register(popTargetFunctions,["copyHeader","highlight"]);
;!function(e){popSocialMedia={socialmediaCounter:function(a){a.targets.one("mouseenter",function(){e(this).children("a.socialmedia-item").each(function(){var a=e(this),r=a.data("provider");if(r){var i=M.SOCIALMEDIA[r];i&&e.ajax({type:"GET",dataType:i.dataType,url:i["counter-url"].replace("%s",a.data("url")),success:function(e){if(e.hasOwnProperty(i.property)){var r=e[i.property];0!=r&&a.children(".pop-counter").html(r)}}})}})})}}}(jQuery),popJSLibraryManager.register(popSocialMedia,["socialmediaCounter"]);
;!function(e){popEmbeddable={fullscreen:function(n){var l=n.targets;e(document).bind("fullscreenchange",function(){var n=l.find(".glyphicon");e(document).fullScreen()?n.removeClass("glyphicon-fullscreen").addClass("glyphicon-resize-small"):n.addClass("glyphicon-fullscreen").removeClass("glyphicon-resize-small")}),l.click(function(n){n.preventDefault(),e(this).closest(".pop-fullscreen").toggleFullScreen()})},newWindow:function(e){e.targets.click(function(e){e.preventDefault(),window.open(popManager.getUnembedUrl(window.location.href),"_blank")})}}}(jQuery),popJSLibraryManager.register(popEmbeddable,["newWindow","fullscreen"]);
;!function(e){popBlockDataQuery={initDelegatorFilter:function(t){var o=t.pageSection;t.targets.submit(function(t){t.preventDefault();var n=e(this);if(n.data("blocktarget")){var a=e(n.data("blocktarget")),i=popManager.getPageSection(a);popManager.isBlockGroup(a)?popBlockGroupDataQuery.filterBlockGroup(i,a,n):popManager.filter(i,a,n),popPageSectionManager.close(o,"xs")}})},initBlockFilter:function(t){var o=t.pageSection,n=t.block;t.targets.submit(function(t){t.preventDefault();var a=e(this);a.data("blocktarget")&&(n=e(a.data("blocktarget")),o=popManager.getPageSection(n)),popManager.filter(o,n,a)})},reloadBlock:function(e){var t=e.pageSection,o=e.block;e.targets.click(function(e){e.preventDefault(),popManager.reload(t,o)})},loadLatestBlock:function(e){var t=e.domain,o=e.pageSection,n=e.block;e.targets.click(function(e){e.preventDefault(),popManager.loadLatest(t,o,n)})},timeoutLoadLatestBlock:function(t){var o=this,n=t.domain,a=t.pageSection,i=t.block;t.targets.each(function(){var t=e(this),c=t.data("clicktime")||3e4;o.execTimeoutLoadLatestBlock(n,a,i,t,c)})},refetchBlockOnUserLoggedIn:function(t){var o=this,n=t.domain,a=t.pageSection,i=t.targets;e(document).one("user:loggedin:"+n,function(e,t){"initialfeedback"!=t&&o.execRefetchBlock(a,i)})},nonendingRefetchBlockOnUserLoggedIn:function(e){var t=this,o=e.domain,n=e.pageSection,a=e.targets;t.execNonendingRefetchBlockOnUserEvent(n,a,"user:loggedin:"+o)},nonendingRefetchBlockOnUserLoggedInOut:function(e){var t=this,o=e.domain,n=e.pageSection,a=e.targets;t.execNonendingRefetchBlockOnUserEvent(n,a,"user:loggedinout:"+o)},deleteBlockFeedbackValueOnUserLoggedInOut:function(t){var o=t.domain,n=t.pageSection,a=t.block;e(document).on("user:loggedinout:"+o,function(t,c){if("initialfeedback"!=c&&"initialuserdata"!=c){var r=popManager.getJsSettings(o,n,a)["user:loggedinout-deletefeedbackvalue"]||[];if(r.length){var l=popManager.getBlockFeedback(o,n,a);e.each(r,function(e,t){var o=l;for(i=0;i<t.length-1;i++)o=o[t[i]];delete o[t[t.length-1]]})}}})},initFilter:function(t){var o=t.pageSection,n=t.block;t.targets.each(function(){var t=e(this);popManager.setFilterBlockParams(o,n,t)})},makeAlwaysRefetchBlock:function(t){var o=this,n=t.pageSection;t.block.on("visible",function(){var t=e(this);o.refetchBlock(n,t)})},execTimeoutLoadLatestBlock:function(t,o,n,a,i){var c=this,r=popManager.getJsSettings(t,o,n,a),l={"skip-status":!0,"datasetcount-target":r["datasetcount-target"],"datasetcount-updatetitle":r["datasetcount-updatetitle"]};!(r["only-loggedin"]||!1)||popUserAccount.isLoggedIn(t)?setTimeout(function(){e("#"+a.attr("id")).length&&(popManager.loadLatest(t,o,n,l),c.execTimeoutLoadLatestBlock(t,o,n,a,i))},i):e(document).one("user:loggedin:"+t,function(e,r){c.execTimeoutLoadLatestBlock(t,o,n,a,i)})},execNonendingRefetchBlockOnUserEvent:function(t,o,n){var a=this;e(document).on(n,function(e,n){"initialfeedback"!=n&&"initialuserdata"!=n&&a.execRefetchBlock(t,o)})},execRefetchBlock:function(t,o){var n=this;o.each(function(){var o=e("#"+e(this).attr("id"));o.length&&n.refetchBlock(t,o)})},refetchBlock:function(e,t){var o={"post-data":t.data("post-data"),"show-disabled-layer":!0};popManager.refetch(e,t,o)},makeOneTimeRefetch:function(t,o){popManager.jsInitialized(o)&&popManager.isContentLoaded(t,o)&&o.one("visible",function(){var o=e(this);popBlockDataQuery.refetchBlock(t,o)})}}}(jQuery),popJSLibraryManager.register(popBlockDataQuery,["initDelegatorFilter","initBlockFilter","reloadBlock","loadLatestBlock","timeoutLoadLatestBlock","refetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedInOut","initFilter","makeAlwaysRefetchBlock"]);
;!function(e){popBlockGroupDataQuery={initBlockGroupFilter:function(o){var t=this,r=o.pageSection,a=o.block,c=o.targets;c.each(function(o){var t=e(this);blocks.each(function(){var o=e(this);popManager.setFilterBlockParams(r,o,t)})}),c.submit(function(o){o.preventDefault();var c=e(this);t.filterBlockGroup(r,a,c)})},reloadBlockGroup:function(e){var o=e.pageSection,t=e.block;e.targets.click(function(e){e.preventDefault();var r=popManager.getBlockGroupActiveBlock(t);popManager.reload(o,r)})},refetchBlockGroupOnUserLoggedIn:function(o){var t=o.domain,r=o.pageSection,a=o.targets;e(document).one("user:loggedin:"+t,function(o,t){"initialfeedback"!=t&&a.each(function(){var o=e("#"+e(this).attr("id"));if(o.length){var t=popManager.getBlockGroupBlocks(o),a=popManager.getBlockGroupActiveBlock(o);t.each(function(){var o=e(this);o.attr("id")==a.attr("id")?popBlockDataQuery.refetchBlock(r,o):popBlockDataQuery.makeOneTimeRefetch(r,o)})}})})},filterBlockGroup:function(o,t,r){var a=popManager.getBlockGroupActiveBlock(t);popManager.getBlockGroupBlocks(t).each(function(){var t=e(this);popManager.setFilterBlockParams(o,t,r),t.attr("id")==a.attr("id")?popManager.reload(o,t):popBlockDataQuery.makeOneTimeRefetch(o,t)})}}}(jQuery),popJSLibraryManager.register(popBlockGroupDataQuery,["initBlockGroupFilter","reloadBlockGroup","refetchBlockGroupOnUserLoggedIn"]);
;!function(e){popMenus={activeLinks:function(a){var i=a.pageSection,t=a.targets,n=a.domain;if(popManager.getFetchPageSectionSettings(i).activeLinks){var c=popManager.getTopLevelFeedback(n)[M.URLPARAM_PARENTPAGEID];c&&t.find(".menu-item-object-id-"+c).each(function(){var a=e(this);a.addClass("active"),a.parents(".menu-item").addClass("active")})}}}}(jQuery),popJSLibraryManager.register(popMenus,["activeLinks"]);
;!function(t){popDatasetCount={displayBlockDatasetCount:function(a){var e=a.domain,n=a.pageSection,o=a.block;if(o.data("datasetcount-target")){var u=popManager.getJsSettings(e,n,o),c=u["display-datasetcount-when"]||["oncreated"],d=u["datasetcount-updatetitle"];c.indexOf("oncreated")>-1&&t(document).ready(function(t){var a=t(o.data("datasetcount-target"));popManager.displayDatasetCount(e,n,o,a,d)}),c.indexOf("onrendered")>-1&&o.on("rendered",function(a){var u=t(o.data("datasetcount-target"));popManager.displayDatasetCount(e,n,o,u,d)})}},clearDatasetCount:function(a){var e=this;a.pageSection,a.block;a.targets.each(function(){var a=t(this),n=t(a.data("datasetcount-target")),o=!!a.data("datasetcount-updatetitle");a.click(function(t){t.preventDefault(),e.execClearDatasetCount(n,o)}),a.hover(function(){e.execClearDatasetCount(n,o)})})},clearDatasetCountOnUserLoggedOut:function(a){var e=this;a.pageSection,a.block;a.targets.each(function(){var a=t(this),n=t(a.data("datasetcount-target")),o=!!a.data("datasetcount-updatetitle");t(document).on("user:loggedout",function(t){e.execClearDatasetCount(n,o)})})},execClearDatasetCount:function(t,a){t.html("").addClass("hidden"),a&&(document.title=popManager.documentTitle)}}}(jQuery),popJSLibraryManager.register(popDatasetCount,["displayBlockDatasetCount","clearDatasetCount","clearDatasetCountOnUserLoggedOut"]);
;!function(e){popReplicate={replicateTopLevel:function(a){var t=this,n=a.pageSection;a.targets.each(function(){var a=e(this),i=a.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?t.replicateMultipleTopLevel(n,a):i==M.REPLICATETYPES.SINGLE&&t.replicateSingleTopLevel(n,a)})},replicatePageSection:function(a){var t=this,n=a.pageSection;a.targets.each(function(){var a=e(this),i=a.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?t.replicateMultiplePageSection(n,a):i==M.REPLICATETYPES.SINGLE&&t.replicateSinglePageSection(n,a)})},replicateMultipleTopLevel:function(a,t){var n=this;t.click(function(t){t.preventDefault();var i=e(this),r=i.data("unique-url")||!1;n.execReplicateTopLevel(a,i,!0,r)})},replicateSingleTopLevel:function(a,t){var n=this;t.one("click",function(t){t.preventDefault();var i=e(this);n.execReplicateTopLevel(a,i,!1,!1)})},execReplicateTopLevel:function(a,t,n,i){var r=t.data("original-url"),p=getDomain(r),c=(popManager.getMemory(p),t.data("intercept-url")),o=popManager.getFrameTarget(a),l=popManager.getReplicableMemory(c,o),g=popManager.getTopLevelFeedback(p);e.each(l.feedback.toplevel,function(a,t){"array"==e.type(t)&&0==t.length||("object"==e.type(t)?(g[a]||(g[a]={}),e.extend(g[a],t)):g[a]=t)}),n&&(i&&r.indexOf("#")>-1?g[M.UNIQUEID]=r.substr(r.indexOf("#")+1):(popManager.generateUniqueId(p),i&&(r=popManager.addUniqueId(r))));var u=t.data("title");g[M.URLPARAM_TITLE]=u,g[M.URLPARAM_PARENTPAGEID]=null,g[M.URLPARAM_URL]=r,popManager.maybeUpdateDocument(p,a)},replicateMultiplePageSection:function(a,t){var n=this;t.click(function(t){t.preventDefault();var i=e(this);n.execReplicatePageSection(a,i)})},replicateSinglePageSection:function(a,t){var n=this;t.one("click",function(t){t.preventDefault();var i=e(this);n.execReplicatePageSection(a,i)})},execReplicatePageSection:function(a,t){t.data("block-settingsid"),popManager.getSettingsId(a);var n=t.data("templateid"),i=t.data("intercept-url"),r=getDomain(i),p=popManager.getMemory(r),c=popManager.getFrameTarget(a),o=popManager.getReplicableMemory(i,c);e.extend(p.feedback.pagesection,o.feedback.pagesection),e.each(o.feedback.block,function(a,t){e.extend(p.feedback.block[a],t),e.extend(p.dataset[a],o.dataset[a]),e.extend(p["query-state"].general[a],o["query-state"].general[a]),e.extend(p["query-state"].domain[a],o["query-state"].domain[a])});var l=popManager.getTopLevelFeedback(r),g=popManager.getPageSectionFeedback(r,a),u=popManager.getPageSectionConfiguration(r,a);g["intercept-urls"][n]||(g["intercept-urls"][n]={}),g["intercept-urls"][n][n]=l[M.URLPARAM_URL],u[M.JS_TEMPLATE]=n;var d={};t.next(".pop-interceptor-blocksettingsids").children().each(function(){var a=e(this),t=a.data("value");t=a.data("value")?[a.data("value")]:[],d[a.data("key")]=t}),u[M.JS_BLOCKSETTINGSIDS]=d,popManager.initPageSectionSettings(r,a,u);var s={"js-args":{relatedTarget:t},url:l[M.URLPARAM_URL]};popManager.renderPageSection(r,a,s)}}}(jQuery),popJSLibraryManager.register(popReplicate,["replicateTopLevel","replicatePageSection"]);
;!function(e){popForms={interceptForm:function(a){a.pageSection;a.targets.click(function(a){a.preventDefault();var t=e(this),n=e(t.data("target")),r=splitParams(t.data("post-data"));e.each(r,function(e,a){n.find('input[name="'+e+'"]').val(a)}),n.submit()})},forms:function(a){var t=a.pageSection,n=a.block,r=a.targets,o=popManager.getSettingsId(t),i=popManager.getSettingsId(n);r.submit(function(a){a.preventDefault();var r=e(this);r.triggerHandler("beforeSubmit"),popManager.fetchBlock(t,n,{type:"POST","post-data":r.serialize()}),popManager.blockScrollTop(t,n)}),n.on("fetched",function(e,a){var c=a.feedback.block[o][i];!0===c.result&&r.triggerHandler("clear"),c["show-msgs"]&&c.msgs&&c.msgs.length&&popManager.scrollToElem(t,n.children(".blocksection-messagefeedback").first(),!0),popManager.maybeRedirect(c)})},formHandleDisabledLayer:function(e){var a=e.pageSection,t=e.block,n=e.targets,r=popManager.getSettingsId(a),o=popManager.getSettingsId(t);t.on("fetched",function(e,a){var t=a.feedback.block[r][o];t["validate-checkpoints"]&&t["checkpointvalidation-failed"]||n.children(".form-inner").children(".pop-disabledlayer").addClass("hidden")})},clearInput:function(a){a.pageSection;a.targets.each(function(){var a=e(this);a.closest("form").on("clear",function(){a.val("")})})}}}(jQuery),popJSLibraryManager.register(popForms,["interceptForm","forms","formHandleDisabledLayer","clearInput"]);
;!function(e){popLinks={documentInitialized:function(){this.links()},linkBlankTarget:function(e){e.attr("target")||e.attr("target","_blank")},maybeaddspinner:function(t,a){var n=!t.hasClass("hidden")&&(M.ADDANCHORSPINNER&&void 0===t.data("addspinner")||t.data("addspinner"));if(n){var r=e('<span class="pop-spinner">'+M.SPINNER+"</span>");t.find("img").length&&r.addClass("spinner-img"),e(document).one("urlfetchcompleted:"+escape(a),function(){t.removeClass("loading").children(".pop-spinner").remove()}),t.trigger("blur").addClass("loading").prepend(r)}return n},links:function(){var t=this,a=new RegExp(/\.(gif|jpg|jpeg|tiff|png)$/i),n=new RegExp(/\.(pdf|css|js|zip|tar|ppt|pptx|doc|docx|xls|xlsx)$/i),r=[];e.each(M.ALLOWED_DOMAINS,function(e,t){r.push('a[href^="'+t+'"]')}),e(document).on("click",r.join(","),function(r){var i=e(this),o=i.attr("href");if(a.test(o)){if(popJSLibraryManager.getLibraries("linksImage").length){r.preventDefault();var p={anchor:i};popJSLibraryManager.execute("linksImage",p)}else t.linkBlankTarget(i)}else if(n.test(o))t.linkBlankTarget(i);else{popCustomBootstrap.resetBubbling();var l=popManager.getPageSection(i),s=i.attr("target")||M.URLPARAM_TARGET_MAIN;if(s==M.URLPARAM_TARGET_FULL)return r.preventDefault(),t.maybeaddspinner(i,o),void(window.location=o);if(s==M.URLPARAM_TARGET_PRINT)return r.preventDefault(),void t.openPrint(o);if(popManager.targetExists(s)){r.preventDefault(),o==M.HOME_DOMAIN&&(o=M.HOME_DOMAIN+"/");var g=!1,d={},c={};if(i.data("reloadurl"))d.reloadurl=!0;else{c={event:r,relatedTarget:i,target:i.attr("target")||popManager.getClickFrameTarget(l)};var f=o;i.data("append-intercepturl")&&(f+=i.data("append-intercepturl")),g=popURLInterceptors.getInterceptors(f,c).length}if(g)popURLInterceptors.intercept(f,c);else{d.target=s,d["js-args"]={relatedTarget:i};var u=t.maybeaddspinner(i,o)?"":null;void 0!==i.data("loadingmsg-target")&&(u=i.data("loadingmsg-target")),null!=u&&(d["loadingmsg-target"]=u),r.metaKey&&(d.silentDocument=!0,d["js-args"].inactivePane=!0),popManager.fetch(o,d)}}}}),e(document).on("click",'a[target="'+M.URLPARAM_TARGET_SOCIALMEDIA+'"]',function(a){a.preventDefault();var n=e(this).attr("href");t.openSocialMedia(n)}),e(document).on("click",'a[href^="#"]',function(t){var a=e(this),n=a.attr("href");if(n.length>1){var r=e(n),i=void 0!==a.data("toggle")||void 0!==a.data("slide");r.length&&!i&&(t.preventDefault(),popManager.scrollToElem(popManager.getPageSection(r),r,!0))}}),e(document).on("click",'a[href^="http://"],a[href^="https://"]',function(a){var n=e(this),r=n.attr("href"),i=!0;e.each(M.ALLOWED_DOMAINS,function(e,t){if(r.startsWith(t))return i=!1,-1}),i&&t.linkBlankTarget(n)})},openPrint:function(e){window.open(e,"_blank")},openSocialMedia:function(e){window.open(e,"_blank","left=20,top=20,width=500,height=400,toolbar=1,resizable=0")}}}(jQuery),popJSLibraryManager.register(popLinks,["documentInitialized"]);
;!function(a){popClasses={addDomainClass:function(s){var e=s.domain,n=s.pageSection,i=s.block,o=s.targets;o.each(function(){var s=a(this),t=popManager.getJsSettings(e,n,i,s).prefix||"";o.addClass(t+getDomainId(e))})}}}(jQuery),popJSLibraryManager.register(popClasses,["addDomainClass"]);
;!function(r){popScrolls={scrollHandler:function(l){var o=0;l.pageSection.scroll(function(){var l=r(this).scrollTop();Math.abs(o-l)>=200&&(l>o?r(window).triggerHandler("scroll:down"):r(window).triggerHandler("scroll:up"),o=l)})}}}(jQuery),popJSLibraryManager.register(popScrolls,["scrollHandler"]);
;!function(n){popOnlineOffline={documentInitialized:function(){this.onlineOffline()},onlineOffline:function(){var n=this;window.addEventListener("online",n.checkOnlineOffline),window.addEventListener("offline",n.checkOnlineOffline),n.checkOnlineOffline()},checkOnlineOffline:function(){navigator.onLine?n(document.body).addClass("online").removeClass("offline"):n(document.body).addClass("offline").removeClass("online")}}}(jQuery),popJSLibraryManager.register(popOnlineOffline,["documentInitialized"]);
;!function(e){popEventReactions={resetOnSuccess:function(t){var o=t.domain,a=t.pageSection,n=t.targets,g=popManager.getSettingsId(a);n.on("fetched",function(t,n){var r=e(this),s=popManager.getSettingsId(r);!0===n.feedback.block[g][s].result&&popManager.reset(o,a,r,{"skip-restore":!0})})},resetOnUserLogout:function(t){var o=t.domain,a=t.pageSection,n=t.targets;e(document).on("user:loggedout:"+o,function(t,g){n.each(function(){var t=e("#"+e(this).attr("id"));t.length&&popManager.reset(o,a,t)})})},destroyPageOnSuccess:function(t){var o=t.pageSection,a=t.targets,n=popManager.getSettingsId(o);a.on("fetched",function(t,a){var g=e(this),r=popManager.getSettingsId(g),s=a.feedback.block[n][r],c=popManager.getFrameTarget(o);if(!0===s.result){var i=g.data("destroytime")||0;setTimeout(function(){popManager.triggerDestroyTarget(popManager.getTargetParamsScopeURL(g),c)},i)}})},destroyPageOnUserLoggedOut:function(e){var t=this,o=e.domain,a=e.pageSection,n=e.targets;a.one("completed",function(){t.execDestroyPageOnUserLoggedOut(o,n)})},destroyPageOnUserNoRole:function(e){var t=this,o=e.domain,a=e.pageSection,n=e.targets;a.one("completed",function(){t.execDestroyPageOnUserNoRole(o,a,n)})},deleteBlockFeedbackValueOnUserLoggedInOut:function(t){var o=t.domain,a=t.pageSection,n=t.block;e(document).on("user:loggedinout:"+o,function(t,g){if("initialfeedback"!=g&&"initialuserdata"!=g){var r=popManager.getJsSettings(o,a,n)["user:loggedinout-deletefeedbackvalue"]||[];if(r.length){var s=popManager.getBlockFeedback(o,a,n);e.each(r,function(e,t){var o=s;for(i=0;i<t.length-1;i++)o=o[t[i]];delete o[t[t.length-1]]})}}})},scrollTopOnUserLoggedInOut:function(t){var o=t.domain,a=t.pageSection,n=t.block,g=t.targets;e(document).on("user:loggedinout:"+o,function(t,r){"initialfeedback"!=r&&"initialuserdata"!=r&&g.each(function(){var t=e(this);if(e("#"+t.attr("id")).length){var g=popManager.getJsSettings(o,a,n,t)["scrolltop-animate"]||!1;popManager.scrollToElem(t,t,g)}})})},closeMessageFeedbacksOnPageSectionOpen:function(e){var t=e.pageSection;e.targets;popPageSectionManager.getGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":opened",function(){popManager.closeMessageFeedbacks(t)})},closePageSectionOnSuccess:function(t){var o=this,a=t.pageSection,n=t.targets,g=popManager.getSettingsId(a);n.on("fetched",function(t,n){var r=e(this),s=popManager.getSettingsId(r);if(!0===n.feedback.block[g][s].result){var c=r.data("closetime")||0;o.timeoutClosePageSection(a,c)}})},closePageSectionOnTabpaneShown:function(t){var o=t.pageSection;t.targets.each(function(){var t=e(this);popManager.getPageSectionPage(t).on("shown.bs.tabpane",function(){popPageSectionManager.close(o)}),popPageSectionManager.close(o)})},timeoutClosePageSection:function(e,t){setTimeout(function(){popPageSectionManager.close(e),popManager.closeMessageFeedbacks(e)},t)},execDestroyPageOnUserLoggedOut:function(t,o){e(document).one("user:loggedout:"+t,function(t,a){o.each(function(){var t=e("#"+e(this).attr("id"));if(t.length){var o=popManager.getPageSection(t),a=popManager.getFrameTarget(o);popManager.triggerDestroyTarget(popManager.getTargetParamsScopeURL(t),a)}})})},execDestroyPageOnUserNoRole:function(t,o,a){var n=this,g=a.data("neededrole");e(document).one("user:updated:"+t,function(r,s){if((a=e("#"+a.attr("id"))).length)if(s.roles&&-1==s.roles.indexOf(g)){var c=popManager.getFrameTarget(o);popManager.triggerDestroyTarget(popManager.getTargetParamsScopeURL(a),c)}else n.execDestroyPageOnUserNoRole(t,o,a)})}}}(jQuery),popJSLibraryManager.register(popEventReactions,["closePageSectionOnTabpaneShown","resetOnSuccess","resetOnUserLogout","closeMessageFeedbacksOnPageSectionOpen","closePageSectionOnSuccess","destroyPageOnUserLoggedOut","destroyPageOnUserNoRole","deleteBlockFeedbackValueOnUserLoggedInOut","scrollTopOnUserLoggedInOut","destroyPageOnSuccess"]);
;jQuery,popFeedbackMessage={formatFeedbackMessage:function(e,a,s,r){var g={message:e,tls:a,pss:s,bs:r};return popJSLibraryManager.execute("formatFeedbackMessage",g),g.message}};
;!function(e){popBootstrapCarousel={carouselStatic:function(e){var t=this,o=e.pageSection,a=e.block,r=e.targets;t.prepareCarousel(o,a,r),r.carousel({interval:!1,wrap:!1})},carouselAutomatic:function(t){var o=this,a=t.pageSection,r=t.block,i=t.targets;r.on("beforeReload",function(e){i.carousel("pause")}),o.prepareCarousel(a,r,i),carousel.find(".item.active").length&&(gdBootstrapCarousel.numberSlides(carousel)>=2?(e(window).width()>=768?carousel.carousel():carousel.carousel({interval:!1,wrap:!1}),carousel.find(".pop-carousel-controls").removeClass("hidden")):carousel.find(".pop-carousel-controls").addClass("hidden"))},prepareCarousel:function(e,t,o){var a=this;t.on("rendered",function(){a.targetsAddActive(o)}),a.targetsAddActive(o)},targetsAddActive:function(t){var o=this;t.each(function(){var t=e(this);o.addActive(t)})},addActive:function(e){0==e.find(".item.active").length&&e.find(".item:first-child").addClass("active")},showElement:function(e,t){var o=this,a=t.closest(".item"),r=a.parent().children().index(a);o.slideTo(e,r)},slideTo:function(e,t){e.carousel(t)},next:function(e){e.carousel("next")},prev:function(e){e.carousel("prev")},isFirstSlide:function(e){return e.find(".item:first-child").hasClass("active")},isLastSlide:function(e){return e.find(".item:last-child").hasClass("active")},isNthSlide:function(e,t){return e.find(".item:nth-child("+t+")").hasClass("active")},isNthLastSlide:function(e,t){return e.find(".item:nth-last-child("+t+")").hasClass("active")},numberSlides:function(e){return e.find(".item").length}}}(jQuery),function(e){popBootstrapCarouselControls={initBlockRuntimeMemory:function(e){var t=this,o=e.pageSection,a=e.block;e.runtimeMempage.carouselControls={},t.resetBlockRuntimeMemory(o,a)},carouselControls:function(e){var t=this,o=e.pageSection,a=e.block,r=e.targets,i=t.getCarousel(r),s=r.children(".pop-carousel-control.right");t.controlCarouselNext(o,a,i,r,s);var n=r.children(".pop-carousel-control.left");t.controlCarouselPrev(o,a,i,r,n),a.on("fetchDomainCompleted",function(e,i,s){t.handleReload(s,o,a,r)}),t.setEnabledDisabled(o,a,r)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).carouselControls},resetBlockRuntimeMemory:function(t,o){var a=this.getRuntimeMemoryPage(t,o),r={state:""};e.extend(a,r)},slideNext:function(e,t,o,a){var r=this;popBootstrapCarousel.isNthLastSlide(o,2)&&popManager.stopFetchingBlock(e,t)&&r.disable(a),r.enable(a.siblings(".pop-carousel-control.left")),popBootstrapCarousel.next(o)},controlCarouselNext:function(t,o,a,r,i){var s=this,n=popManager.getBlockQueryState(t,o);i.click(function(r){r.preventDefault();var i=e(this);if(!s.disabled(i))if(popBootstrapCarousel.isLastSlide(a)){if(n.loading.length||popManager.stopFetchingBlock(t,o))return;popManager.fetchBlock(t,o,{operation:M.URLPARAM_OPERATION_APPEND}),s.setControlState(t,o,"loading")}else s.slideNext(t,o,a,i)})},controlCarouselPrev:function(t,o,a,r,i){var s=this;i.click(function(t){t.preventDefault();var o=e(this);s.disabled(o)||(popBootstrapCarousel.isNthSlide(a,2)&&s.disable(o),popBootstrapCarousel.numberSlides(a)>1&&s.enable(o.siblings(".pop-carousel-control.right")),popBootstrapCarousel.prev(a))})},handleReload:function(e,t,o,a){var r=this,i=popManager.getBlockDataset(e,t,o);if(r.setEnabledDisabled(t,o,a),i&&i.length&&"loading"==r.getControlState(t,o)){var s=r.getCarousel(a),n=a.children(".pop-carousel-control.right");r.slideNext(t,o,s,n)}r.setControlState(t,o,"")},getControlState:function(e,t){return this.getRuntimeMemoryPage(e,t).state},setControlState:function(e,t,o){this.getRuntimeMemoryPage(e,t).state=o},getCarousel:function(t){return e(t.data("target"))},setEnabledDisabled:function(e,t,o){var a=this,r=a.getCarousel(o),i=o.children(".pop-carousel-control.left"),s=o.children(".pop-carousel-control.right");0==popBootstrapCarousel.numberSlides(r)?(a.disable(i),a.disable(s)):(popBootstrapCarousel.isFirstSlide(r)?a.disable(i):a.enable(i),popBootstrapCarousel.isLastSlide(r)&&popManager.stopFetchingBlock(e,t)?a.disable(s):a.enable(s))},disable:function(e){e.addClass("disabled"),e.attr("disabled",!0)},enable:function(e){e.removeClass("disabled"),e.attr("disabled",!1)},disabled:function(e){return e.hasClass("disabled")}}}(jQuery),popJSLibraryManager.register(popBootstrapCarousel,["carouselStatic","carouselAutomatic"]),popJSLibraryManager.register(popBootstrapCarouselControls,["initBlockRuntimeMemory","controlCarouselPrev","controlCarouselNext","carouselControls"]);
;!function(a){popModals={modalForm:function(o){o.pageSection;o.targets.on("show.bs.modal",function(o){var e=a(this);a(o.relatedTarget);a(e.data("initjs-targets")).each(function(){var o=a(this);popManager.closeMessageFeedback(o)})})}}}(jQuery),popJSLibraryManager.register(popModals,["modalForm"]);
;!function(e){popControls={controlPrint:function(t){var r=this,n=t.domain,o=t.pageSection;t.block;t.targets.click(function(t){t.preventDefault();var a=e(this),i=r.getBlockFilteringUrl(n,o,a,!0);i=popManager.getPrintUrl(i),popLinks.openPrint(i)})},controlSocialMedia:function(t){var r=this,n=t.domain,o=t.pageSection;t.block;t.targets.click(function(t){t.preventDefault();var a=e(this),i=a.data("shareurl")?a.data("shareurl"):r.getBlockFilteringUrl(n,o,a,!0),l=a.data("sharetitle")?a.data("sharetitle"):popManager.documentTitle,c=a.data("provider"),p=M.SOCIALMEDIA[c]["share-url"].replace(new RegExp("%url%","g"),encodeURIComponent(i)).replace(new RegExp("%title%","g"),encodeURIComponent(l));popLinks.openSocialMedia(p)})},getBlockFilteringUrl:function(t,r,n,o){var a=e(n.data("blocktarget"));return popManager.getBlockFilteringUrl(t,r,a,o)}}}(jQuery),popJSLibraryManager.register(popControls,["controlPrint","controlSocialMedia"]);
;!function(t,i,e,n){"use strict";t.fn.dynamicMaxHeight=function(i){function e(t,i){var e;e=t.hasClass(d)?i.data("replace-text"):i.attr("title"),i.text(e)}function n(t,i){t.find("."+c).css("max-height",i)}function a(t,i){i.css("display","inline-block")}var c="dynamic-height-wrap",d="dynamic-height-active",o="js-dynamic-show-hide";return this.each(function(i,s){var h=t(s),u=h.data("maxheight"),l=h.find("."+c).outerHeight(),r=h.find("."+o);h.attr("data-itemheight",l),l>u&&(n(h,u),h.toggleClass(d),a(h,r)),r.click(function(){h.hasClass(d)?n(h,l):n(h,u),e(h,r),h.toggleClass(d)})})}}(window.jQuery||window.$,document,window),"undefined"!=typeof module&&module.exports&&(module.exports=dynamicMaxHeight);
;!function(t){popCDN={localStorageKey:"PoP:cdn-thumbprints",thumbprintValues:{},documentInitialized:function(e){var a=this,r=e.domain,n=popManager.getTopLevelFeedback(r)[M.CDN_THUMBPRINTVALUES];a.thumbprintValues=popManager.getStoredData(a.localStorageKey,!1),a.thumbprintValues?a.updateThumbprintValues(n):(a.thumbprintValues=t.extend({},n),a.storeData())},pageSectionFetchSuccess:function(t){var e=this,a=t.response;e.fetchSuccess(a)},blockFetchSuccess:function(t){var e=this,a=t.response;e.fetchSuccess(a)},modifyFetchArgs:function(t){var e=this,a=t.options,r=t.url;if(e.useCDN(r)){t.url=e.getCDNUrl(r);var n=e.getThumbprintValue(r);n&&(a.params=a.params||{},a.params[M.CDN_URLPARAM_THUMBPRINT]=n)}},modifyFetchBlockArgs:function(t){var e=this,a=t.options,r=t.url;if("GET"==t.type&&e.useCDN(r)){t.url=e.getCDNUrl(r);var n=e.getThumbprintValue(r);n&&(a["onetime-post-data"]=a["onetime-post-data"]?a["onetime-post-data"]+"&":"",a["onetime-post-data"]+=M.CDN_URLPARAM_THUMBPRINT+"="+n)}},fetchSuccess:function(t){this.updateThumbprintValues(t.feedback.toplevel[M.CDN_THUMBPRINTVALUES])},updateThumbprintValues:function(t){var e=this,a=!1;for(var r in t)t[r]>e.thumbprintValues[r]&&(e.thumbprintValues[r]=t[r],a=!0);a&&e.storeData()},storeData:function(){var t=this;popManager.storeData(t.localStorageKey,t.thumbprintValues)},useCDN:function(t){return M.CDN_CONTENT_URI&&t.startsWith(M.HOME_DOMAIN)&&popCDNThumbprints.canUseCDN(t)},getCDNUrl:function(t){return M.CDN_CONTENT_URI+t.substr(M.HOME_DOMAIN.length)},getThumbprintValue:function(e){var a=this,r=popCDNThumbprints.getThumbprints(e),n=[];return t.each(r,function(t,e){n.push(a.thumbprintValues[e])}),n.join(M.CDN_SEPARATOR_THUMBPRINT)},convertURL:function(t){var e=this;if(e.useCDN(t)){var a=e.getThumbprintValue(t);t=e.getCDNUrl(t),a&&(t=add_query_arg(M.CDN_URLPARAM_THUMBPRINT,a,t))}return t}}}(jQuery),popJSLibraryManager.register(popCDN,["documentInitialized","pageSectionFetchSuccess","blockFetchSuccess"],!0),popJSLibraryManager.register(popCDN,["modifyFetchArgs","modifyFetchBlockArgs"]);
;!function(t){popCDNThumbprints={canUseCDN:function(t){var r=this;return!!popCDNConfig&&!r.evalCriteria(t,popCDNConfig.criteria.rejected)},getThumbprints:function(r){var e=this;if(!popCDNConfig)return console.log("There is no popCDNConfig object, no thumbprints returned"),[];var n=[];return t.each(popCDNConfig.thumbprints,function(t,i){e.evalCriteria(r,popCDNConfig.criteria.thumbprints[i])&&n.push(i)}),n},isHome:function(t){var r=removeParams(t);return[M.HOME_DOMAIN,M.HOME_DOMAIN+"/",M.HOMELOCALE_URL,M.HOMELOCALE_URL+"/"].indexOf(r)>-1},evalCriteria:function(r,e){var n=this,i=function(t){var e=t[0],n=t[1],i=getParam(e,r);return"object"==typeof i?searchInObject(i,n):i==n},a=[{isHome:e.isHome&&n.isHome(r),startsWith:e.startsWith.full.some(function(t){return r.startsWith(t)}),pageStartsWith:e.startsWith.partial.some(function(t){return r.startsWith(M.HOMELOCALE_URL+"/"+t)}),hasParamValues:e.hasParamValues.some(i)},{noParamValues:!e.noParamValues.some(i)}],o=0;return t.each(a,function(t,r){Object.keys(r).filter(function(t){return r[t]}).length&&o++}),o==a.length}}}(jQuery);
;jQuery,popCDNCoreHooks={mentionsSource:function(e){e.url=popCDN.convertURL(e.url)},typeaheadPrefetchURL:function(e){e.url=popCDN.convertURL(e.url)},typeaheadRemoteURL:function(e){e.url=popCDN.convertURL(e.url)}},popJSLibraryManager.register(popCDNCoreHooks,["mentionsSource","typeaheadPrefetchURL","typeaheadRemoteURL"]);
;!function(e){popServiceWorkers={pages:{},documentInitialized:function(t){var r=this;"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=function(t){var a=JSON.parse(t.data);if("refresh"===a.type&&r.pages[a.url]){var o=e("#"+r.pages[a.url]);o&&o.data("fetch-url")&&(r.showRefreshMessage(o),delete r.pages[a.url])}},navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){e("#"+M.IDS_APPSTATUS).prepend(M.SW_MESSAGES_WEBSITEUPDATED.format(window.location.href))}))},pageSectionNewDOMsBeforeInitialize:function(e){var t=this,r=e.pageSection,a=e.newDOMs,o=r.attr("id");if(M.SW_MAIN_PAGESECTIONS&&M.SW_MAIN_PAGESECTIONS.indexOf(o)>-1){var i=a.filter(".pop-pagesection-page");if(i.length){var n=i.data("fetch-url");n&&(t.pages[n]=i.attr("id"),i.one("destroy",function(){delete t.pages[n]}))}}},modifyFetchArgs:function(e){var t=e.options;t["js-args"]&&(anchor=t["js-args"].relatedTarget,anchor&&anchor.data("sw-networkfirst")&&(t.params=t.params||{},t.params[M.SW_URLPARAM_NETWORKFIRST]="true"))},modifyFetchBlockArgs:function(e){var t=e.options;e.url;t.reload&&(t["onetime-post-data"]=t["onetime-post-data"]?t["onetime-post-data"]+"&":"",t["onetime-post-data"]+=M.SW_URLPARAM_NETWORKFIRST+"=true")},fetchBrowserURL:function(t){e(document).on("initialized.pop.document",function(){var e={skipPushState:!0},t=window.location.href;t.startsWith(M.HOMELOCALE_URL+"/")||(t=M.HOMELOCALE_URL+t.substr(M.HOME_DOMAIN.length)),popManager.fetch(t,e)})},resetTimestamp:function(e){var t=e.pageSection,r=e.block;"serviceWorker"in navigator&&(popManager.getBlockQueryState(t,r)[M.URLPARAM_TIMESTAMP]=Math.floor(Date.now()/1e3)+60*M.GMT_OFFSET*60)},showRefreshMessage:function(e){var t=e.data("url"),r=e.data("target");e.prepend(M.SW_MESSAGES_PAGEUPDATED.format(t,r))}}}(jQuery),popJSLibraryManager.register(popServiceWorkers,["documentInitialized","pageSectionNewDOMsBeforeInitialize","modifyFetchArgs","modifyFetchBlockArgs","fetchBrowserURL","resetTimestamp"]);
;!function(t){popNotifications={timeFromNow:function(o){var i=this;o.targets.each(function(){var o=t(this);i.execTimeFromNow(o)})},execTimeFromNow:function(o){var i=this;if(t("#"+o.attr("id")).length){var e=o.data("time"),r=o.data("format");o.html(moment(e,r).fromNow()),setTimeout(function(){i.execTimeFromNow(o)},6e4)}}}}(jQuery),popJSLibraryManager.register(popNotifications,["timeFromNow"]);
;!function(e){popFileUpload={fileUpload:function(a){var o=a.domain,l=a.pageSection;a.targets.each(function(){var a=this,p=e(this),t=p.data("action"),n=popManager.getBlock(p);p.fileupload({url:t,autoUpload:!0,maxNumberOfFiles:1,maxFileSize:2e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:function(a){var o=p.data("template-upload"),l=e(),t={o:a,locale:locale};popJSRuntimeManager.setBlockURL(n);var d=popManager.getHtml(o,t),i=e(d);return l=l.add(i)},downloadTemplate:function(a){var t=p.data("template-download"),d=e(),i=popManager.getTargetConfiguration(o,l,n,t);popManager.expandJSKeys(i);var r=e.extend({},i,{o:a,locale:locale});popJSRuntimeManager.setBlockURL(n);var u=popManager.getHtml(t,r),g=e(u);return e(document).triggerHandler("gd-fileupload:rendered",[g]),d=d.add(g)},completed:function(e,a){p.find(".pop-fileuploaded-hide").hide()},destroyed:function(e,a){p.find(".pop-fileuploaded-hide").show()}}),p.hasClass("pop-fileupload-loadfromserver")&&e.getJSON(t,function(o){o&&o.files&&o.files.length&&p.fileupload("option","done").call(a,e.Event("done"),{result:o})})})}}}(jQuery),popJSLibraryManager.register(popFileUpload,["fileUpload"]);
;Handlebars.registerHelper("locationsPageURL",function(e,r){return M.LOCATIONS_PAGE_URL[e]});
;!function(t){popCreateLocation={createLocationModal:function(t){var a=this,e=t.pageSection,o=t.targets;a.execCreateLocationModal(e,o)},createLocationModalBlock:function(t){var a=this,e=t.pageSection,o=t.targets,r=t.relatedTarget;a.transferAttributes(o.closest(".modal"),r),a.execCreateLocationModal(e,o.closest(".modal"))},maybeCloseLocationModal:function(a){var e=a.pageSection,o=a.targets,r=popManager.getSettingsId(e);o.on("fetched",function(a,e){var o=t(this),n=popManager.getSettingsId(o);!0===e.feedback.block[r][n].result&&o.closest(".modal").modal("hide")})},transferAttributes:function(t,a){a=popManager.getOriginalLink(a),t.data("typeahead-target",a.data("typeahead-target"))},execCreateLocationModal:function(a,e){var o=this;e.addClass("pop-createlocation"),e.on("show.bs.modal",function(a){var e=t(this),r=t(a.relatedTarget);o.transferAttributes(e,r)})}}}(jQuery),popJSLibraryManager.register(popCreateLocation,["createLocationModal","createLocationModalBlock","maybeCloseLocationModal"]);
;!function(e){popMap={initBlockRuntimeMemory:function(e){var r=this,t=e.pageSection,a=e.block;e.runtimeMempage.map={},r.resetBlockRuntimeMemory(t,a)},map:function(r){var t=this,a=r.domain,n=r.pageSection,o=r.block,i=r.targets;o.one("rerender",function(e){t.destroy(n,o,i)}),i.each(function(){var r=e(this);t.triggerShowMap(a,n,o,r)})},mapModal:function(r){var t=this,a=r.domain,n=r.pageSection;r.targets.on("shown.bs.modal",function(){var r=e(this);e.each(r.find(".pop-map"),function(){var r=e(this),o=popManager.getBlock(r);popManager.jsInitialized(o)&&t.triggerShowMap(a,n,o,r)})})},mapStandalone:function(r){var t=this,a=r.pageSection,n=r.block,o=r.targets;popPageSectionManager.getGroup(a).on("on.bs.pagesection:theater off.bs.pagesection:theater",function(r){o.each(function(){var r=e(this);popManager.isHidden(r)||t.refresh(a,n,r)})}),n.on("fetchDomainCompleted",function(r,i,s){popJSRuntimeManager.setBlockURL(n),o.each(function(){var r=e(this);t.triggerAddMarkers(s,a,n,r,i)})}),o.each(function(){var r=e(this);t.hoverBlockElems(a,n,r)})},getRuntimeMemoryPage:function(e,r){return popManager.getRuntimeMemoryPage(e,r).map},resetBlockRuntimeMemory:function(r,t){var a=this,n=a.getRuntimeMemoryPage(r,t),o=a.getEmtpyBlockRuntimeMemory();e.extend(n,o)},getEmtpyBlockRuntimeMemory:function(){return{markers:{},markersPos:{},markersOpen:{},maps:{}}},destroy:function(r,t,a){var n=this.getRuntimeMemoryPage(r,t);a.each(function(){var r=e(this).attr("id");delete n.maps[r]})},triggerShowMap:function(e,r,t,a){var n=this;popManager.isHidden(a)?n.pendingTriggerMap("showmap",e,r,t,a):n.execTriggerShowMap(e,r,t,a)},triggerAddMarkers:function(e,r,t,a,n){var o=this;if(popManager.isHidden(a))o.pendingTriggerMap("addmarkers",e,r,t,a,n);else{var i=n.reload&&n.isFirst;o.addMarkers(e,r,t,a,i)}},triggerFunction:function(e,r,t,a,n,o){var i=this;"showmap"==e?i.triggerShowMap(r,t,a,n):"addmarkers"==e&&i.triggerAddMarkers(r,t,a,n,o)},pendingTriggerMap:function(r,t,a,n,o,i){var s=this,m=popManager.getPageSectionPage(n);popPageSectionManager.execIsHidden(a)?popPageSectionManager.getGroup(a).one("on.bs.pagesection-group:pagesection-"+a.attr("id")+":opened",function(){(n=e("#"+n.attr("id"))).length&&s.triggerFunction(r,t,a,n,o,i)}):o.parents(".collapse").not(".in").length?o.parents(".collapse").not(".in").one("shown.bs.collapse",function(){s.triggerFunction(r,t,a,n,o,i)}):m.hasClass("tab-pane")&&!popManager.isActive(m)&&m.one("shown.bs.tabpane",function(){s.triggerFunction(r,t,a,n,o,i)})},execTriggerShowMap:function(e,r,t,a){this.addMarkers(e,r,t,a,a.data("markers-removecurrent")),windowResize()},refresh:function(e,r,t){var a=this.getGMap(e,r,t);a&&a.refresh()},hoverBlockElems:function(r,t,a){var n=this;t.on("mouseenter",".pop-openmapmarkers",function(){var o,i=e(this);if(i.hasClass("make-popover")){var s=i.attr("aria-describedby");s&&(o=e("#"+s).find("a.pop-modalmap-link"))}else o=i.find("a.pop-modalmap-link");n.openMapMarkers(r,t,a,o)})},openMapMarkers:function(e,r,t,a){var n=this;popManager.isHidden(t)||(n.closeMarkers(e,r,t),a.length&&n.openMarkers(e,r,t,a))},closeMarkers:function(r,t,a){var n=this,o=n.getGMap(r,t,a);if(o){var i=n.getMarkersInfo(r,t,a);o.hideInfoWindows(),e.each(i.markersOpen,function(e,r){markerPos=i.markersPos[r],o.markers[markerPos]&&o.markers[markerPos].setIcon("https://maps.google.com/mapfiles/ms/icons/red-dot.png")})}},getMarkerIdsFromLinkURLs:function(r){var t=[];return r.each(function(){var r=e(this),a=(r=popManager.getOriginalLink(r)).attr("href"),n=getParam(M.LOCATIONSID_FIELDNAME,a);n&&e.each(n,function(e,r){t.push(r)})}),t},openMarkers:function(r,t,a,n){var o=this,i=o.getMarkerIdsFromLinkURLs(n);if(i.length){i=i.filter(function(e,r){return i.indexOf(e)==r});var s=o.getGMap(r,t,a);if(s){var m=o.getMarkersInfo(r,t,a);e.each(i,function(e,r){markerPos=m.markersPos[r],s.markers[markerPos]&&s.markers[markerPos].setIcon("https://maps.google.com/mapfiles/ms/icons/green-dot.png")}),1==i.length?(markerPos=m.markersPos[i[0]],s.markers[markerPos]&&"undefined"!=typeof google&&google.maps.event.trigger(s.markers[markerPos],"click")):s.fitZoom(),o.setMarkersOpen(r,t,a,i,!0)}}},initMarker:function(e,r,t,a){var n=this.getRuntimeMemoryPage(e,r),o=n.markers[t];if(o){if(o.title.split(" | ").indexOf(a.title)>-1)return;a.title=o.title+" | "+a.title,a.infoWindow.content=a.infoWindow.content+"<hr/>"+o.infoWindow.content,a.icon="https://maps.google.com/mapfiles/ms/icons/red-dot.png"}n.markers[t]=a},hasMarker:function(e,r,t){return this.getRuntimeMemoryPage(e,r).markers[t]},getGMap:function(e,r,t){var a=this;if("undefined"!=typeof google&&"undefined"!=typeof GMaps){var n=a.getRuntimeMemoryPage(e,r),o=t.attr("id"),i=n.maps[o];return i||(i=n.maps[o]=new GMaps({div:"#"+o,lat:M.LOCATIONSMAP_LAT,lng:M.LOCATIONSMAP_LNG,zoom:parseInt(M.LOCATIONSMAP_ZOOM)})),i}},getMarkersInfo:function(e,r,t){var a=this,n=t.data("markers-pagesection")||e,o=t.data("markers-block")||r,i=a.getEmtpyBlockRuntimeMemory();try{i=a.getRuntimeMemoryPage(n,o)}catch(e){console.log("Error: "+e.message)}var s=t.attr("id");return{markers:i.markers||{},markersPos:i.markersPos[s]||{},markersOpen:i.markersOpen[s]||[]}},setMarkersOpen:function(e,r,t,a,n){var o=this.getRuntimeMemoryPage(e,r),i=t.attr("id");!n&&o.markersOpen[i]||(o.markersOpen[i]=[]),a&&(o.markersOpen[i]=o.markersOpen[i].concat(a))},setMarkersPos:function(r,t,a,n,o){var i=this.getRuntimeMemoryPage(r,t),s=a.attr("id");!o&&i.markersPos[s]||(i.markersPos[s]={}),n&&e.extend(i.markersPos[s],n)},removeMarker:function(e,r,t,a){var n=this,o=n.getGMap(e,r,t);if(o){var i=n.getMarkersInfo(e,r,t);markerPos=i.markersPos[a],o.markers[markerPos]&&o.markers[markerPos].setMap(null),n.zoom(e,r,t)}},zoom:function(e,r,t){var a=this.getGMap(e,r,t);if(a)if(a.markers.length>1)a.fitZoom();else if(1==a.markers.length){var n=a.markers[0].getPosition();a.setCenter(n.lat(),n.lng()),a.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM))}},addMarkers:function(r,t,a,n,o){var i=this,s=i.getGMap(t,a,n);if(s){o&&(s.removeMarkers(),i.setMarkersOpen(t,a,n,null,!0),i.setMarkersPos(t,a,n,null,!0));var m=n.data("marker-ids-"+removeScheme(r));if(m&&m.length){n.data("marker-ids-"+removeScheme(r),null);var g,p,c,M=i.getMarkersInfo(t,a,n),k={};e.each(m,function(e,r){if(g=M.markers[r]){var t={content:g.infoWindow.header+"<br/>"+g.infoWindow.content},a={lat:g.coordinates.lat,lng:g.coordinates.lng,title:g.title,infoWindow:t,icon:g.icon};"undefined"!=typeof google&&(a.animation=google.maps.Animation.DROP),p=s.addMarker(a),c=s.markers.length-1,k[r]=c}}),i.setMarkersPos(t,a,n,k);var d=n.data("open-onemarker-infowindow");1==m.length&&d&&(s.hideInfoWindows(),"undefined"!=typeof google&&google.maps.event.trigger(p,"click")),i.zoom(t,a,n)}}},geocode:function(e,r,t,a,n,o){var i=this.getGMap(e,r,t);i&&GMaps.geocode({address:a,callback:function(e,r){if("OK"==r){i.removeMarkers();var t=e[0].geometry.location;i.setCenter(t.lat(),t.lng()),i.addMarker({lat:t.lat(),lng:t.lng(),draggable:!0}),i.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM)),n.val(t.lat()),o.val(t.lng());var a=i.markers[0];"undefined"!=typeof google&&google.maps.event.addListener(a,"dragend",function(){var e=a.getPosition();n.val(e.lat()),o.val(e.lng())})}}})}}}(jQuery),function(e){popMapRuntime={initBlockRuntimeMemory:function(e){var r=this,t=e.pageSection,a=e.block;e.runtimeMempage.mapRuntime={},r.resetBlockRuntimeMemory(t,a)},getRuntimeMemoryPage:function(e,r){return popManager.getRuntimeMemoryPage(e,r).mapRuntime},resetBlockRuntimeMemory:function(r,t){var a=this.getRuntimeMemoryPage(r,t),n={content:"",title:"",marker_ids:[]};e.extend(a,n)},drawMarkers:function(e,r,t,a){var n=this;popManager.jsInitialized(t)?n.execDrawMarkers(e,r,t,a):t.one("initialize",function(){n.execDrawMarkers(e,r,t,a)})},execDrawMarkers:function(e,r,t,a){var n=this.getRuntimeMemoryPage(r,t);a.data("marker-ids-"+removeScheme(e),n.marker_ids)},resetMarkerIds:function(e,r){var t=this;popManager.jsInitialized(r)?t.execResetMarkerIds(e,r):r.one("initialize",function(){t.execResetMarkerIds(e,r)})},execResetMarkerIds:function(e,r){this.getRuntimeMemoryPage(e,r).marker_ids=[]},setMarkerData:function(e,r,t,a){var n=this;popManager.jsInitialized(r)?n.execSetMarkerData(e,r,t,a):r.one("initialize",function(){n.execSetMarkerData(e,r,t,a)})},execSetMarkerData:function(e,r,t,a){var n=this.getRuntimeMemoryPage(e,r);n.title||(n.title=t),n.content||(n.content=a)},initMarker:function(e,r,t,a,n,o,i){var s=this;popManager.jsInitialized(r)?s.execInitMarker(e,r,t,a,n,o,i):r.one("initialize",function(){s.execInitMarker(e,r,t,a,n,o,i)})},execInitMarker:function(e,r,t,a,n,o,i){var s=this,m=s.getRuntimeMemoryPage(e,r);s.setMarkerData(e,r,o,i);var g=m.title,p={coordinates:{lat:a,lng:n},title:g,infoWindow:{header:"<strong>"+g+"</strong>",content:m.content},icon:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"};m.marker_ids.push(t),popMap.initMarker(e,r,t,p),m.content="",m.title=""}}}(jQuery),popJSLibraryManager.register(popMap,["initBlockRuntimeMemory","map","mapModal","mapStandalone"]),popJSLibraryManager.register(popMapRuntime,["initBlockRuntimeMemory"]);
;!function(e){popTypeaheadMap={typeaheadMap:function(a){var p=a.domain,t=a.pageSection,o=a.block;a.targets.each(function(){var a=e(this),r=a.find(".pop-typeahead"),n=a.find(".pop-map"),d=a.data("addmarker-template");r.on("selected",function(r,i){if(!popMap.hasMarker(t,o,i.id)){var M=popManager.getTargetConfiguration(p,t,o,d);e.extend(M,{itemObject:i}),popJSRuntimeManager.setBlockURL(o);var g=popManager.getTemplateHtml(p,t,o,d);popManager.mergeHtml(g,a),popManager.runJSMethods(p,t,o,d,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(p,t,o,d)}n.data("marker-ids-"+removeScheme(p),[i.id]),popMap.addMarkers(p,t,o,n)}),r.on("close",function(e,a,p){popMap.removeMarker(t,o,n,p)})})}}}(jQuery),popJSLibraryManager.register(popTypeaheadMap,["typeaheadMap"]);
;!function(a){popMapCollection={formMapLocationGeocode:function(o){var e=o.pageSection,n=o.block;o.targets.find("input.address-input").change(function(){var o=a(this).closest("div.pop-map-locationgeocode"),t=[];o.find("input.address-input").each(function(){var o=a(this);o.val()&&t.push(o.val())});var p=o.find("div.pop-map"),r=o.find("input.address-lat"),i=o.find("input.address-lng");popMap.geocode(e,n,p,t.join(", "),r,i)})},modalMap:function(o){var e=this,n=o.domain;o.targets.on("show.bs.modal",function(o){var t=a(this),p=a(o.relatedTarget);e.execModalMap(n,t,p)})},modalMapBlock:function(a){var o=this,e=a.domain,n=(a.pageSection,a.block,a.targets),t=a.relatedTarget,p=n.closest(".modal");o.execModalMap(e,p,t)},execModalMap:function(a,o,e){e=popManager.getOriginalLink(e);var n=popManager.getBlock(e),t=popManager.getPageSection(n),p=o.find(".pop-map");p.data("markers-pagesection",t),p.data("markers-block",n),p.data("markers-removecurrent",!0);var r=popMap.getMarkerIdsFromLinkURLs(e);p.data("marker-ids-"+removeScheme(a),r)}}}(jQuery),popJSLibraryManager.register(popMapCollection,["formMapLocationGeocode","modalMap","modalMapBlock"]);
;!function(e){popFullCalendar={initBlockRuntimeMemory:function(e){var t=this,n=e.pageSection,a=e.block;e.runtimeMempage.fullCalendar={},t.resetBlockRuntimeMemory(n,a)},calendar:function(t){var n=this,a=t.domain,r=t.pageSection,o=t.block,i=t.targets,l=popManager.getPageSectionPage(o);l.one("destroy",function(){i.fullCalendar("destroy")}),l.hasClass("tab-pane")&&!popManager.isActive(l)&&l.one("shown.bs.tabpane",function(){i.fullCalendar("render")}),o.on("beforeRender",function(t,a){var o=e(this);a.operation==M.URLPARAM_OPERATION_REPLACE&&n.resetBlockRuntimeMemory(r,o)}),o.on("rendered",function(t,a,r,o){var l=e(this),d=popManager.getPageSection(l);n.execCalendar(o,d,l,i,"update"),windowResize()}),n.execCalendar(a,r,o,i,"new")},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).fullCalendar},resetBlockRuntimeMemory:function(t,n){var a=this.getRuntimeMemoryPage(t,n),r={eventsHtml:{},runJS:!1,events:[],loadedEventIds:{},loadedDates:{}};e.extend(a,r)},addEvents:function(e,t,n){var a=this;n.length&&(popManager.jsInitialized(t)?a.execAddEvents(e,t,n):t.one("initialize",function(){a.execAddEvents(e,t,n)}))},execAddEvents:function(t,n,a){var r=this,o=r.getRuntimeMemoryPage(t,n),i=[];e.each(a,function(e,a){r.isEventLoaded(t,n,a.domain,a.id)||(i.push(a),r.setEventLoaded(t,n,a.domain,a.id))}),e.merge(o.events,i)},execCalendar:function(t,n,a,r,o){var i,l=this,d=l.getRuntimeMemoryPage(n,a),s=l.getDate(n,a);"new"==o&&(i={header:{left:"title",center:"",right:""},events:function(e,t,n,a){a(d.events)},defaultDate:s,fixedWeekCount:!1,height:"auto",contentHeight:"auto",dayNamesShort:M.DATERANGE_DAYSOFWEEK}),r.each(function(){var r=e(this);l.execFullCalendar(t,n,a,r,o,i)}),l.setDateLoaded(n,a,s)},execFullCalendar:function(t,n,a,r,o,i){var l=this;if("new"==o){var d=popManager.getJsSettings(t,n,a,r),s=d.options||{},u=e.extend({},i,s),c=d.layouts;u.eventRender=function(e,t){l.renderEvent(n,a,c,e,t)},u.eventAfterAllRender=function(e){l.renderEventAfterAll(n,a,c)},r.fullCalendar(u)}else"update"==o&&r.fullCalendar("refetchEvents")},setDateLoaded:function(e,t,n){this.getRuntimeMemoryPage(e,t).loadedDates[n.year()+"-"+(n.month()+1)]=!0},isDateLoaded:function(e,t,n){return!0===this.getRuntimeMemoryPage(e,t).loadedDates[n.year()+"-"+(n.month()+1)]},setEventLoaded:function(e,t,n,a){var r=this.getRuntimeMemoryPage(e,t);r.loadedEventIds[n]=r.loadedEventIds[n]||{},r.loadedEventIds[n][a]=!0},isEventLoaded:function(e,t,n,a){var r=this.getRuntimeMemoryPage(e,t);return r.loadedEventIds[n]&&!0===r.loadedEventIds[n][a]},getDate:function(e,t){var n=popManager.getBlockQueryState(e,t),a=parseInt(n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]),r=parseInt(n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]);return moment(a+"-"+r+"-01","YYYY-M-DD")},renderEvent:function(t,n,a,r,o){var i=this.getRuntimeMemoryPage(t,n),l=r.domain,d=r.id;i.eventsHtml[l]=i.eventsHtml[l]||{};var s=i.eventsHtml[l][d];if(s)i.runJS=!0;else{var u={},c=popManager.getDatabaseKeys(l,t,n)["db-key"];s="",popJSRuntimeManager.setBlockURL(n),e.each(a,function(e,a){s+=popManager.getTemplateHtml(l,t,n,a,u,c,d)}),i.eventsHtml[l][d]=s}o.html(s)},renderEventAfterAll:function(t,n,a){var r=this.getRuntimeMemoryPage(t,n);if(popManager.triggerHTMLMerged(),r.runJS){r.runJS=!1;var o=popManager.getQueryMultiDomainUrls(t,n);e.each(o,function(r,o){e.each(a,function(e,a){popManager.runJSMethods(r,t,n,a,"full")})})}},fetch:function(e,t,n){var a=this,r=a.getDate(e,t);n.fullCalendar("gotoDate",r),a.isDateLoaded(e,t,r)||popManager.fetchBlock(e,t,{operation:M.URLPARAM_OPERATION_APPEND})}}}(jQuery),function(e){popFullCalendarControls={controlCalendarPrev:function(t){var n=this,a=t.pageSection,r=t.block;t.targets.click(function(t){var o=e(this);n.execute(a,r,o,"prev")})},controlCalendarNext:function(t){var n=this,a=t.pageSection,r=t.block;t.targets.click(function(t){var o=e(this);n.execute(a,r,o,"next")})},setCalendarBlockParams:function(e,t,n){var a=popManager.getBlockQueryState(e,t);a[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]=n.year(),a[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]=n.month()+1},execute:function(t,n,a,r){var o=this,i=e(a.closest(".pop-calendar-controls").data("target")),l=i.fullCalendar("getDate");"next"==r?l.add(1,"months"):l=l.subtract(1,"months"),o.setCalendarBlockParams(t,n,l),popManager.closeMessageFeedback(n),popFullCalendar.fetch(t,n,i)}}}(jQuery),popJSLibraryManager.register(popFullCalendar,["initBlockRuntimeMemory","calendar"]),popJSLibraryManager.register(popFullCalendarControls,["controlCalendarPrev","controlCalendarNext"]);
;function wsl_wordpress_social_login_callback(){if(wsl_login_url&&popUserAccount.isLoggedIn(getDomain(wsl_login_url))&&popWSL.loginBlock){var o=popManager.getPageSection(popWSL.loginBlock),l=M.WSL_LOGINUSER_CLOSETIME||1500;popEventReactions.timeoutClosePageSection(o,l)}}!function(o){popWSL={loginBlock:null,wslNetworkLink:function(l){var i=this;l.targets.click(function(l){l.preventDefault();var n=o(this);popupurl=n.data("url");var r=popManager.getBlock(n);i.loginBlock=o(r.data("loginblock")),window.open(popupurl,"hybridauth_social_sing_on","location=1,status=0,scrollbars=0,width=600,height=400")})}}}(jQuery),popJSLibraryManager.register(popWSL,["wslNetworkLink"]);var wsl_login_url="";window.wsl_wordpress_social_login=function(o){var l={params:o};popWSL.loginBlock&&(l["disable-layer"]=popWSL.loginBlock,l["urlfetched-callbacks"]=[wsl_wordpress_social_login_callback]),wsl_login_url="";var i=popBrowserHistory.getApplicationURL(window.location.href),n=getDomain(i);$.each(M.USERLOGGEDIN_DATA_PAGEURLS,function(o,l){if(l.startsWith(n))return wsl_login_url=l,-1}),wsl_login_url&&popUserAccount.fetchLoggedInUserData(wsl_login_url,l)};
;jQuery,popPPP={loadResourcesDB:function(r){var e=r.url,a=r.path,s=r.config;if(!a&&"1"==getParam(M.PARAMS_PREVIEW,e)){var P=getParam(M.PARAMS_PATH,e);P&&(r.jsResourcesDB=s.resources.js.single[P])}}},popJSLibraryManager.register(popPPP,["loadResourcesDB"]);
;!function(t){popPhotoSwipe={linksImage:function(e){var i=this,a=e.anchor;new PhotoSwipe(t("#pswp")[0],PhotoSwipeUI_Default,i.getItems(a),i.getOptions(a)).init()},getOptions:function(t){return{index:this.getIndex(t),bgOpacity:.8,showHideOpacity:!0,history:!1,loop:!1,shareButtons:[{id:"download",label:M.LABELS.DOWNLOAD,url:"{{raw_image_url}}?fileaction=download",download:!0}]}},getItem:function(t){var e=t.children("img"),i={src:t.attr("href"),msrc:e.attr("src"),w:640,h:480};if(e.attr("width")&&e.attr("height")&&(i.w=e.attr("width"),i.h=e.attr("height")),t.data("size")){var a=t.data("size").split("x");i.w=a[0],i.h=a[1]}return t.attr("title")?i.title=t.attr("title"):e.attr("alt")&&(i.title=e.attr("alt")),i},getItems:function(e){var i=this,a=[],r=e.closest(".gallery");return r.length?r.find(".gallery-item a").each(function(){a.push(i.getItem(t(this)))}):a.push(i.getItem(e)),a},getIndex:function(t){var e=t.closest(".gallery-item");return e.length?e.index():0}}}(jQuery),popJSLibraryManager.register(popPhotoSwipe,["linksImage"]);
;!function(e){popCustomFunctions={addPageSectionIds:function(e){var a=e.domain,o=e.pageSection,n=e.template,t=popManager.getSettingsId(o),i=o.attr("id");i==M.PS_HOVER_ID?popJSRuntimeManager.addPageSectionId(a,t,n,i,"closehover"):i==M.PS_FRAME_NAVIGATOR_ID?popJSRuntimeManager.addPageSectionId(a,t,n,i,"closenavigator"):i==M.PS_ADDONS_ID&&(popJSRuntimeManager.addPageSectionId(a,t,n,i,"window-fullsize"),popJSRuntimeManager.addPageSectionId(a,t,n,i,"window-maximize"),popJSRuntimeManager.addPageSectionId(a,t,n,i,"window-minimize"))},pageSectionInitialized:function(e){var a=e.pageSection;a.attr("id")==M.PS_PAGETABS_ID&&popManager.getPageSectionGroup(a).on("on.bs.pagesection-group:pagesection-"+M.PS_HOVER_ID+":closed",function(){a.find("a.pop-pagetab-btn.active").trigger("click")})},pageSectionNewDOMsBeforeInitialize:function(a){var o=this,n=a.pageSection,t=a.newDOMs,i=a.inactivePane,r=n.attr("id");i=!0===i&&t.siblings(".pop-pagesection-page").length>0;var s=popManager.isFirstLoad(n),d=t.filter(".tab-pane"),p=[M.PS_PAGETABS_ID,M.PS_ADDONTABS_ID];if([M.PS_MAIN_ID,M.PS_ADDONS_ID].indexOf(r)>-1){if(i){if(r==M.PS_MAIN_ID){var c=e("#"+M.PS_PAGETABS_ID);popPageSectionManager.open(c),popPageSectionManager.open(c,"xs")}}else d.addClass("active");if(r==M.PS_ADDONS_ID)d.on("shown.bs.tabpane",function(){o.handleWindow(n,"minimized")}),i||s||o.handleWindow(n,"minimized");else{var l=e("#"+M.PS_ADDONS_ID);d.on("shown.bs.tabpane",function(){o.handleWindow(l,"fullsize")}),i||s||o.handleWindow(l,"fullsize")}}else p.indexOf(r)>-1&&i&&t.filter(".pop-pagesection-page").find(".pop-pagetab-btn").addClass("pop-highlight");var g=[M.PS_MAIN_ID,M.PS_HOVER_ID,M.PS_ADDONS_ID,M.PS_FRAME_NAVIGATOR_ID],S=[M.PS_QUICKVIEW_ID,M.PS_QUICKVIEWINFO_ID],_=[M.PS_SIDEINFO_ID],I=[M.PS_MODALS_ID];if(g.indexOf(r)>-1){var u=r==M.PS_MAIN_ID,_=e("#"+M.PS_SIDEINFO_ID+",#"+M.PS_FRAME_SIDE_ID+",#"+M.PS_FRAME_NAVIGATOR_ID);popCustomBootstrap.activateTabPanes(n,t,i,u,_)}else p.indexOf(r)>-1?popCustomBootstrap.activatePageTabs(n,t,i):_.indexOf(r)>-1?popCustomBootstrap.activateSideTabpanes(n,t,i):S.indexOf(r)>-1?popCustomBootstrap.activateQuickviewTabpanes(n,t,i):I.indexOf(r)>-1&&popCustomBootstrap.activateModals(n,t)},isUserIdSameAsLoggedInUser:function(e){var a=e.domain;if(popUserAccount.isLoggedIn(a)){var o=e.input;return popUserAccount.getLoggedInUserId(a)==o}return!1},getEmbedUrl:function(e){var a=this,o=e.url;return a.addURLParams(add_query_arg(M.URLPARAM_THEMEMODE,M.THEMEMODE_WASSUP_EMBED,o))},getUnembedUrl:function(e){var a=e.url;return removeQueryFields(a,[M.URLPARAM_THEMEMODE])},getPrintUrl:function(e){var a=this,o=e.url;return a.addURLParams(add_query_arg(M.URLPARAM_ACTION,M.URLPARAM_ACTION_PRINT,add_query_arg(M.URLPARAM_THEMEMODE,M.THEMEMODE_WASSUP_PRINT,o)))},scrollToElem:function(e){var a=this,o=e.elem,n=e.position,t=e.animate,i=popManager.getPageSection(n),r=n.offset().top-i.offset().top;return a.execScrollTop(o,r,t)},scrollTop:function(e){var a=this,o=e.elem,n=e.top,t=e.animate;return a.execScrollTop(o,n,t)},getPosition:function(e){var a=e.elem;return a.attr("id")!=M.PS_MAIN_ID||a.hasClass("perfect-scrollbar")?0:body.scrollTop},closeMessageFeedback:function(a){var o=a.elem;e(document).ready(function(e){o.find(".pop-messagefeedback").removeClass("fade").alert("close")})},closeMessageFeedbacks:function(a){var o=a.pageSection;e(document).ready(function(e){o.find(".pop-messagefeedback").removeClass("fade").alert("close")})},execScrollTop:function(a,o,n){return a.attr("id")==M.PS_MAIN_ID&&!a.hasClass("perfect-scrollbar")&&(n?e("html, body").animate({scrollTop:o},"fast"):window.scrollTo(0,o),!0)},addURLParams:function(e){return M.THEMESTYLE&&(e=add_query_arg(M.URLPARAM_THEMESTYLE,M.THEMESTYLE,e)),e},handleWindow:function(e,a){var o=e.closest(".window");popWindow.getSize(o)==a&&popWindow.maximize(o)}}}(jQuery),popJSLibraryManager.register(popCustomFunctions,["addPageSectionIds","pageSectionNewDOMsBeforeInitialize"],!0),popJSLibraryManager.register(popCustomFunctions,["pageSectionInitialized","getEmbedUrl","getUnembedUrl","getPrintUrl","isUserIdSameAsLoggedInUser","getPosition","scrollToElem","scrollTop","closeMessageFeedback","closeMessageFeedbacks"]);
;function showTopNav(){popPageSectionManager.open(popCustomPageSectionManager.getTopNav())}function hideTopNav(){popPageSectionManager.close(popCustomPageSectionManager.getTopNav())}!function(o){popCustomPageSectionManager={enableShowHideTopNav:function(){o(window).on("scroll:down",hideTopNav),o(window).on("scroll:up",showTopNav)},disableShowHideTopNav:function(){o(window).off("scroll:down",hideTopNav),o(window).off("scroll:up",showTopNav)},getTopNav:function(){return popPageSectionManager.getGroup().find(".offcanvas-topnav")}}}(jQuery);
;!function(e){popUserRole={filterByCommunity:function(a){var t=a.domain,r=a.pageSection,o=a.block;a.targets.change(function(a){var i=e(this),p=i.val(),n=e(i.data("target"));if(i.is(":checked")){var c=i.data("user-datum");popTypeahead.triggerSelect(t,r,o,n,c)}else popTypeahead.removeSelected(n,p)})}}}(jQuery),popJSLibraryManager.register(popUserRole,["filterByCommunity"]);
;jQuery,popUREAAL={isActionUpdatedUserMembership:function(i){return i.input==M.ACTION_USER_UPDATEDUSERMEMBERSHIP},isActionJoinedCommunity:function(i){return i.input==M.ACTION_USER_JOINEDCOMMUNITY},isObjectTypeUser:function(i){return i.input==M.OBJECTTYPE_USER}},popJSLibraryManager.register(popUREAAL,["isActionUpdatedUserMembership","isActionJoinedCommunity","isObjectTypeUser"]);